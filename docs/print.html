<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" sizes="32x32" href="/favicon.ico">
<meta name="theme-color" content="#039623">
<link rel="manifest" href="/site.webmanifest">
<script src="/js/muestra-codigo.js"></script>
 <title>Aplicaciones web orientadas a servicios y mashups - GilPG AWOAS</title>
 <meta name="description" content="Página para imprimir todo el contenido de GilPG AWOAS, que introduce conceptos de desarrollo multiplataforma.">
 <style>
 :root {
  --introDuracion: 2s;
  --introFuncion: ease-out;
  --padCont: 0.5rem;
  --padNav: 0.75rem 0.5rem;
  --anchoNav: 300px;
  --anchoLectura: 900px;
  --colLetra: black;
  --colFondo: white;
  --colTituloLetra: #00811c;
  --colTituloShadow: 3px 1px 2px #bdbdbd;
  --colTituloStrong: #684601;
  --colTituloStrongSel: #ffdc97;
  --colTarget: #cef4ff;
  --colSombra: #49494980;
  --navSombra: 0.5rem 0 0.5rem var(--colSombra);
  --padCtrl: 0.2rem 0.3rem;
  --borderCtrl: solid thin;
  --colFondoNav: #f2f2f2;
  --colNavResaltada: #7a2c99;
  --colSecundario: #ffff82;
  --colStack1: black;
  --colStack2: #224ba5;
  --colStack3: #92731f;
  --colScrollbar: #CFD8DC;
  --colThumb: #90a4ae;
  --colThumbActivo: #3f3f3f;
  --anchoThumb: 7px;
  --borderRadiusThumb: 3.5px;
  --gap: 0.5rem;
  --fontMono: monospace;
  --fontSans: sans-serif;
  --fontSerif: serif;
  font-family: var(--fontSerif);
  color: var(--colLetra);
  background-color: var(--colFondo);
  scrollbar-width: thin;
  scrollbar-color: var(--colThumb) var(--colScrollbar);
 }

 body::-webkit-scrollbar {
  width: var(--anchoThumb);
  height: var(--anchoThumb);
 }

 body::-webkit-scrollbar-track {
  background: var(--colScrollbar);
 }

 body::-webkit-scrollbar-thumb {
  background-color: var(--colThumb);
  border-radius: var(--borderRadiusThumb);
 }

 body::-webkit-scrollbar-thumb:active {
  background-color: var(--colThumbActivo);
 }

 .anterior,
 .siguiente {
  display: inline-block;
  text-decoration: none;
  padding: var(--padCtrl);
  border: var(--borderCtrl);
  cursor: pointer;
 }

 .anterior.bye,
 .siguiente.bye {
  display: none;
 }

 a[data-logo] {
  display: block;
  height: 54px;
  line-height: 54px;
  padding-left: 54px;
  margin-top: 1rem;
  background-image: url("/img/icono/maskable_icon_x48.png");
  background-position: 3px center;
  background-repeat: no-repeat;
 }

 a strong,
 a code,
 h1 strong,
 h1 code {
  color: var(--colTituloStrong);
 }

 nav a {
  font-family: var(--fontSans);
 }

 pre {
  font-family: var(--fontMono);
 }

 code {
  color: var(--colTituloStrong);
  font-family: var(--fontMono);
 }

 h1:not(.default) {
  font-family: var(--fontSans);
  color: var(--colTituloLetra);
 }

 .autor {
  font-family: var(--fontSans);
  font-size: 1.5rem;
  color: var(--colTituloLetra);
 }

 figure {
  text-align: center;
 }

 figure img {
  max-width: 100%;
  max-height: 65vh;
 }

 figure img.med {
  max-height: 55vh;
 }

 figcaption {
  font-family: var(--fontMono);
 }

 .print .noPrint {
  display: none;
 }

 @media print {
  .noPrint {
   display: none;
  }

  .pruebaDeEscritorio {
   page-break-before: always;
  }
 }

 iframe {
  box-sizing: border-box;
  width: 100%;
 }

 .lectura {
  max-width: var(--anchoLectura);
  margin: 1rem auto;
 }

 .lectura p,
 .lectura blockquote {
  text-align: justify;
 }

 /* No funciona bien con display:flex en pantallas pequeñas. */
 .horizontal {
  text-align: center;
 }

 .horizontal>* {
  display: inline-block;
  vertical-align: top;
  text-align: left;
 }

 .horizontal>*:not(:first-child) {
  margin-left: 1rem;
 }

 .columnas4 {
  columns: 4 180px;
  column-gap: 1rem;
 }

 .columnas2 {
  columns: 2 360px;
  column-gap: 1rem;
 }

 .resaltado {
  background-color: rgb(255, 255, 89);
 }

 .resaltado2 {
  background-color: rgb(255, 214, 139);
 }

 table.borde {
  margin-left: auto;
  margin-right: auto;
 }

 table.borde,
 table.borde td {
  border: thin solid;
  border-collapse: collapse;
 }

 table.borde th,
 table.borde td {
  padding: 0.4rem;
 }

 muestra-codigo>div>div {
  white-space: nowrap;
 }

 footer {
  margin-top: 1rem;
  display: block;
  text-align: center;
  font-family: var(--fontSans);
  font-size: small;
 }
</style>
 <style>
 .pruebaDeEscritorio section {
  display: inline-block;
  vertical-align: top;
  margin: 1em;
 }

 .pruebaDeEscritorio section pre {
  margin: 0;
 }

 .pruebaDeEscritorio samp {
  font-weight: bold;
 }

 .pruebaDeEscritorio .activo {
  display: inline-block;
  margin: 0 0.2rem 0 0;
  vertical-align: top;
  background-color: var(--colSecundario);
  border: 1px solid var(--colSecundario);
 }

 .pruebaDeEscritorio :target,
 .pruebaDeEscritorio :target caption {
  background-color: var(--colTarget);
 }

 .pruebaDeEscritorio .numero1 {
  display: inline-block;
  margin: 0 0.2rem 0 0;
  color: var(--colStack1);
  border: 1px solid var(--colStack1);
 }

 .pruebaDeEscritorio .numero2 {
  display: inline-block;
  color: var(--colStack2);
  border: 1px solid var(--colStack2);
 }

 .pruebaDeEscritorio .numero3 {
  display: inline-block;
  color: var(--colStack3);
  border: 1px solid var(--colStack3);
 }

 .pruebaDeEscritorio a.parametro1,
 .pruebaDeEscritorio .parametro1 {
  color: var(--colPar1);
 }

 .pruebaDeEscritorio a.parametro2,
 .pruebaDeEscritorio .parametro2 {
  color: var(--colPar2);
 }

 .pruebaDeEscritorio .descongela {
  color: var(--colDescongela);
 }

 .pruebaDeEscritorio table.tabla1,
 .pruebaDeEscritorio table.tabla1 th,
 .pruebaDeEscritorio table.tabla1 td {
  border: 1px solid var(--colStack1);
 }

 .pruebaDeEscritorio table.tabla2,
 .pruebaDeEscritorio table.tabla2 th,
 .pruebaDeEscritorio table.tabla2 td {
  border: 1px solid var(--colStack2);
 }

 .pruebaDeEscritorio table.tabla3,
 .pruebaDeEscritorio table.tabla3 th,
 .pruebaDeEscritorio table.tabla3 td {
  border: 1px solid var(--colStack3);
 }

 .pruebaDeEscritorio .frame {
  font-family: var(--fontMono);
  border-collapse: collapse;
 }

 .pruebaDeEscritorio .frame,
 .pruebaDeEscritorio .frame th,
 .pruebaDeEscritorio .frame td {
  border: thin solid;
 }

 .pruebaDeEscritorio .frame caption {
  font-style: italic;
 }

 .pruebaDeEscritorio .objeto caption {
  text-decoration: underline;
  font-style: italic;
 }

 .pruebaDeEscritorio .creación {
  display: flex;
 }
</style>
</head>
<body class="print">
   <h1 class="sitio">Aplicaciones web orientadas a servicios y mashups</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p class="autor">por Gilberto Pacheco Gallegos</p>
 <ul>
  <li>
   <p>
    Este sitio es continuación de
    <a href="https://gilpgijs.github.io" rel="nooper"
      target="_blank">https://gilpgijs.github.io</a>,
    <a href="https://gilpgpoojs.github.io" rel="nooper"
      target="_blank">https://gilpgpoojs.github.io</a>,
    y
    <a href="https://gilpgihc.github.io" rel="nooper"
      target="_blank">https://gilpgihc.github.io</a>
   </p>
  </li>
  <li>
   <p>
    Mucho contenido que originalmente aparecía en este sitio, se ha desplazado a
    los sitios anteriormente mencionados. 
   </p>
  </li>
 </ul>
 <section class="noPrint">
 <h1>Instrucciones de navegación</h1>
 <ul>
  <li>
   <p>
    Los siguientes controles te permitirán navegar por todo el contenido del
    sitio.
   </p>
   <dl>
    <dt>
     <button type="button" title="Cierra">&#x2715;</button>
    </dt>
    <dd>
     <p>Oculta el menú de navegación.</p>
    </dd>
    <dt>
     <button type="button" title="Menú">&#x2630;</button>
    </dt>
    <dd>
     <p>Muestra el menú de navegación.</p>
    </dd>
    <dt>
     <span class="anterior" title="Página anterior">◀</span>
    </dt>
    <dt>
     <kbd>←</kbd> (Tecla flecha a la izquierda)
    </dt>
    <dt>
     Swipe hacia la derecha
    </dt>
    <dd>
     <p>Regresa a la página anterior.</p>
    </dd>
    <dt>
     <span class="siguiente" title="Página siguiente">▶</span>
    </dt>
    <dt>
     <kbd>→</kbd> (Tecla flecha a la derecha)
    </dt>
    <dt>
     Swipe hacia la izquierda
    </dt>
    <dd>
     <p>Avanza a la página siguiente.</p>
    </dd>
   </dl>
  </li>
 </ul>
</section>
 <nav>
  <h1>Lecciones</h1>
  
   <ol type="1">
    <li>
     <p>
      <a href="/m01awoas">Aplicaciones Orientadas a Servicios</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m02servicio">Ejemplo de servicio</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa">Arquitectura orientada a servicios</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m04geolocalizacion.html">Ejemplo de geolocalización</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m05sociales.html">Ejemplo de redes sociales</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m06ecommerce">Características de un e-commerce</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios">Diseño de servicios</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente">Renderizado del lado del cliente</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m09renderServidor">Renderizado del lado del servidor</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m10bd">Bases de datos</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m11ws">Protocolos de comunicación</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m12streaming.html">Ejemplo de streaming</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section>
         <h1 class="leccion">1. Aplicaciones Orientadas a Servicios</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan loa conceptos de aplicaciones web orientadas a
  servicios y mashups.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m01awoas/mAnube.html"><dfn>La nube</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mBaw.html"><dfn>Aplicación web</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mCservicio.html"><dfn>Servicio en la nube</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mDtipos.html">Tipos de servicios</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mEoferta.html">Servicios que se ofrecen en la nube</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mFmasUsados.html">Servicios de nube más usados</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mGaoas.html"><dfn>Aplicación orientada a servicios</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mHawoas.html"><dfn>Aplicación web orientada a servicios</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m01awoas/mImashups.html"><dfn>Aplicación web hibrida (Mashup)</dfn></a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. <dfn>La nube</dfn></h1><div class="lectura">
 <figure>
  <img src="/img/m01awoas/Imagen1.png">
 </figure>
 <p>
  Una <dfn>nube computacional</dfn> es el conjunto de servidores remotos en
  Internet para gestionar archivos y aplicaciones.
 </p>
 <p>
  Una de las ventajas de una nube es que permite que los usuarios utilicen
  archivos y aplicaciones sin tener que instalar programas en una computadora
  con acceso a Internet.
 </p>
 <p>
  El concepto de nube salió de los diagramas de red, donde Internet se
  representa como una nube, en una abstracción de la infraestructura que
  representa.
 </p>
</div>
      </section>
     <section >
         <h1 >B. <dfn>Aplicación web</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Aplicación que los usuarios pueden utilizar accediendo a un servidor web a
    través de internet o de una intranet mediante un navegador.
   </p>
  </li>
  <li>
   <p>
    <small>
     Fuente:
     <a target="_blank" rel="nooper"
       href="https://es.wikipedia.org/wiki/Aplicaci%C3%B3n_web">https://es.wikipedia.org/wiki/Aplicaci%C3%B3n_web</a>
    </small>
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. <dfn>Servicio en la nube</dfn></h1><div class="lectura">
 <p>
  Utilidad o función que se utiliza a través de Internet.
 </p>
</div>
      </section>
     <section >
         <h1 >D. Tipos de servicios</h1><div class="lectura">
 <dl>
  <dt><dfn>Software as a Service</dfn> <abbr>(SaaS)</abbr></dt>
  <dd>
   <p>
    El más utilizado. El software está alojado en servidores de los proveedores
    y el cliente accede a ellos a través del navegador web. Todo lo relacionado
    con mantenimiento, soporte y disponibilidad es manejado por el proveedor.
   </p>
  </dd>
  <dt><dfn>Platform as a Service</dfn> <abbr>(PaaS)</abbr></dt>
  <dd>
   <p>
    En este tipo de servicios en la nube el proveedor ofrece acceso a un entorno
    basado en cloud en el cual los usuarios pueden crear y distribuir sus
    propias aplicaciones. El proveedor proporciona la infraestructura
    subyacente.
   </p>
  </dd>
  <dt><dfn>Infrastructure as a Service</dfn> <abbr>(IaaS)</abbr></dt>
  <dd>
   <p>
    Un proveedor de servicios proporciona el software y las aplicaciones a
    través de Internet. Los usuarios se suscriben al software y acceden a él a
    través de la web o las APIs del proveedor.
   </p>
  </dd>
 </dl>
</div>
      </section>
     <section >
         <h1 >E. Servicios que se ofrecen en la nube</h1><div class="lectura">
 <ul>
  <li>
   <p>Almacenamiento</p>
  </li>
  <li>
   <p>Herramientas de Productividad</p>
  </li>
  <li>
   <p>Desarrollo de Aplicaciones</p>
  </li>
  <li>
   <p>Hosting</p>
  </li>
  <li>
   <p>Videoconferencias</p>
  </li>
  <li>
   <p>Mapas</p>
  </li>
  <li>
   <p>Streamming</p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. Servicios de nube más usados</h1><div class="lectura">
 <dl>
  <dt>Amazon Web Services (AWS)</dt>
  <dd>
   <p>
    <a href="https://aws.amazon.com/" target="_blank"
      rel="nooper">https://aws.amazon.com/</a>
   </p>
  </dd>
  <dt>Microsoft Azure</dt>
  <dd>
   <p>
    <a href="https://azure.microsoft.com/" target="_blank"
      rel="nooper">https://azure.microsoft.com/</a>.
   </p>
  </dd>
  <dt>Google Cloud</dt>
  <dd>
   <p>
    <a href="https://cloud.google.com/" target="_blank"
      rel="nooper">https://cloud.google.com/</a>.
   </p>
  </dd>
 </dl>
</div>
      </section>
     <section >
         <h1 >G. <dfn>Aplicación orientada a servicios</dfn></h1><div class="lectura">
 <p>
  Es una aplicación en la que algunas partes se realizan en un servidor
  independiente.
 </p>
 <section>
  <h1>Características</h1>
  <ul>
   <li>
    <p>El procesamiento se reparte en varias computadoras.</p>
   </li>
   <li>
    <p>Un servicio puede ser utilizado por varias aplicaciones.</p>
   </li>
  </ul>
 </section>
</div>
      </section>
     <section >
         <h1 >H. <dfn>Aplicación web orientada a servicios</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Aplicación web en la que algunas operaciones se realizan en el servidor web
    y sus resultados se descargan al navegador web sin cambiar la página
    desplegada.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >I. <dfn>Aplicación web hibrida (Mashup)</dfn></h1><div class="lectura">
 <p>Es una aplicación que usa otras aplicaciones web.</p>
 <section>
  <h1>Estructura</h1>
  <dl>
   <dt><dfn>Proveedor de contenidos</dfn></dt>
   <dd>
    <p>
     Fuente de los datos. Los datos están disponibles vía una API y diferentes
     protocolos web como RSS, REST y Web Service.
    </p>
   </dd>
   <dt><dfn>El sitio mashup</dfn></dt>
   <dd>
    <p>
     Es la nueva aplicación web que provee un nuevo servicio utilizando
     diferente información y de la que no es dueña.
    </p>
   </dd>
   <dt><dfn>El navegador web cliente</dfn></dt>
   <dd>
    <p>
     Interfaz de usuario del mashup. En una aplicación web, el contenido puede
     ser mezclado por los web browser clientes usando lenguaje web del lado del
     cliente, por ejemplo, HTML y JavaScript.
    </p>
   </dd>
  </dl>
 </section>
 <p><small>Fuente: Wikipedia</small></p>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">2. Ejemplo de servicio</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se un servicio muy sencillo.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m02servicio/mAinstrucciones.html">Instrucciones</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m02servicio/mBarchivos.html">Archivos</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m02servicio/mBindexHtml.html">index.html</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m02servicio/mCservicioPhp.html">servicio.php</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Instrucciones</h1><div class="lectura">
 <ol>
  <li>
   <p>
    Revisa el proyecto en Replit con la URl
    <a href="https://replit.com/@GilbertoPacheco/phpsrv1?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPacheco/phpsrv1?v=1</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1MpT73tzI9tJDcgy1uH9eRtXVdKuF1D36/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1pfI0ZZUbXxArDuACZIOeh_L7cQ5a3NsJ/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1d56ZzPMG0xZeGjlncx7ns8sOf4ZU86B0/view?usp=sharingg"
      target="_blank">Crea la página de spotlight del proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1BnRquRDpNmnTUM9iijjeY1WV1J1MrT9z/view?usp=sharing"
      target="_blank" rel="nooper">Observa paso a paso la comunicación entre
     ciente y servidor.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >B. Archivos</h1><div class="lectura">
 <ul>
  <li>
   <p><a href="mBindexHtml.html">index.html</a></p>
  </li>
  <li>
   <p><a href="mCservicioPhp.html">servicio.php</a></p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. index.html</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Servicio<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Servicio<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;button</span> <span
     style="color: #ff0000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">()</span><span
     style="color: #0000ff;">"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; Ejecuta</div>
  <div>&nbsp;<span style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;script&gt;</span></div>
  <div>&nbsp; <span style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>() {</div>
  <div>&nbsp; &nbsp;<span style="color: #af00db;">try</span> {</div>
  <div>&nbsp; &nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">resp</span> =</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #af00db;">await</span> <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #a31515;">"servicio.php"</span>)</div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">resp</span>.<span
     style="color: #0070c1;">ok</span>) {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> =</div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">await</span> <span
     style="color: #0070c1;">resp</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #795e26;">alert</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp; &nbsp; } <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(</div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">resp</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp; &nbsp; }</div>
  <div>&nbsp; &nbsp;} <span style="color: #af00db;">catch</span> (<span
     style="color: #001080;">e</span>) {</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">e</span>)</div>
  <div>&nbsp; &nbsp; <span style="color: #795e26;">alert</span>(<span
     style="color: #001080;">e</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp; &nbsp;}</div>
  <div>&nbsp; }</div>
  <div>&nbsp;<span style="color: #800000;">&lt;/script&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. servicio.php</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;?php</span></div>
  <div><span style="color: #795e26;">echo</span> <span
     style="color: #a31515;">"Hola"</span>;</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 class="leccion">3. Arquitectura orientada a servicios</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presenta la arquitectura orientada a servicios.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m03soa/mAsoa.html"><dfn>Arquitectura orientada a servicios</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mBventajas.html">Ventajas</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mCprincipios.html">Principios de diseño de un servicio</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mDcapas.html">Capas</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mEdiagrama.html"><dfn>Diagrama de Arquitectura</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mFxml.html">Introducción a XML</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mGdefXml.html"><dfn>XML</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mHejXml.html">Ejemplo de XML</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mIdtdXml.html">DTD MiContacto</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mJsoap.html">Introducción a SOAP</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mKdefSoap.html"><dfn>SOAP</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mLestrSoap.html">Estructura de los mensajes de SOAP</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mMsolSoap.html">Ejemplo de solicitud SOAP</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mNrespSoap.html">Ejemplo de respuesta SOAP</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mOwsdl.html">Introducción a WSDL</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mPdefWsdl.html"><dfn>WSDL</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mQelemWsdl.html">Elementos de WSDL</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mRejemWsdl.html">Ejemplo de WSDL</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mSuddi.html">Introducción a UDDI</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mTdefUddi.html"><dfn>UDDI</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mUrest.html">Introducción a REST</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mVdefRest.html"><dfn>REST</dfn></a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m03soa/mWestrRest.html">Estructura de REST</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. <dfn>Arquitectura orientada a servicios</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Estilo de arquitectura de TI que se apoya en la orientación a
    servicios.
   </p>
  </li>
  <li>
   <p>
    La orientación a servicios es una forma de pensar en servicios, su
    construcción y sus resultados.
   </p>
  </li>
  <li>
   <p>
    Un servicio es una representación lógica de una actividad de negocio
    que tiene un resultado de negocio específico (ejemplo: comprobar el
    crédito de un cliente, obtener datos de clima, consolidar reportes
    de perforación).
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Arquitectura_orientada_a_servicios"
     target="_blank" rel="nooper">https://es.wikipedia.org/wiki/Arquitectura_orientada_a_servicios</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >B. Ventajas</h1><div class="lectura">
 <ul>
  <li>
   <p>Reduce el nivel de acoplamiento.</p>
  </li>
  <li>
   <p>Clara definición de roles de desarrollo.</p>
  </li>
  <li>
   <p>Definición de seguridad más clara.</p>
  </li>
  <li>
   <p>Fácil de probar.</p>
  </li>
  <li>
   <p>Mejora el mantenimiento.</p>
  </li>
  <li>
   <p>Favorece la reutilización.</p>
  </li>
  <li>
   <p>Favorece el desarrollo en paralelo.</p>
  </li>
  <li>
   <p>Favorece la escalabilidad.</p>
  </li>
  <li>
   <p>Permite un mapeo directo entre los procesos y los sistemas.</p>
  </li>
  <li>
   <p>Permite un monitoreo preciso.</p>
  </li>
  <li>
   <p>Permite la interoperabilidad.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="http://soa-fpuna.blogspot.com/2011/11/ventajas-y-desventajas.html"
     target="_blank" rel="nooper">http://soa-fpuna.blogspot.com/2011/11/ventajas-y-desventajas.html</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >C. Principios de diseño de un servicio</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Definición clara y estandarizada mediante descriptores de servicio, donde se
    indique:
   </p>
   <ul>
    <li>
     <p>Nombre del Servicio.</p>
    </li>
    <li>
     <p>Forma de accesos.</p>
    </li>
    <li>
     <p>Funcionalidades que ofrece.</p>
    </li>
    <li>
     <p>
      Descripción de los datos de entrada de cada funcionalidad que ofrece.
     </p>
    </li>
    <li>
     <p>
      Descripción de los datos de salida de cada funcionalidad que ofrece.
     </p>
    </li>
   </ul>
  </li>
  <li>
   <p>
    Sin estado: no guardan valores para ser usados en otras llamadas. (es
    posible acceder a bases de datos.)
   </p>
  </li>
  <li>
   <p>
    Pueden también ejecutar unidades discretas de trabajo como serían editar y
    procesar una transacción.
   </p>
  </li>
  <li>
   <p>No dependen del estado de otras funciones o procesos.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://ederluisdsd.wordpress.com/2013/03/17/principios-de-diseno-soa/"
     target="_blank rel="nooper">https://ederluisdsd.wordpress.com/2013/03/17/principios-de-diseno-soa/</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >D. Capas</h1><div class="marco-lectura">
 <figure>
  <img src="/img/m03soa/capas_soa.svg" alt="Capas de SOA">
 </figure>
 <dl>
  <dt>Capa de acceso</dt>
  <dd>
   <ul>
    <li>
     <p>Interfaz de usuario que invoca a los procesos de negocio.</p>
    </li>
    <li>
     <p>Interfaces web, escritorio, móvil, etc.</p>
    </li>
    <li>
     <p>Pueden ejecutarse en varios dispositivos.</p>
    </li>
   </ul>
  </dd>
  <dt>Capa de procesos de negocio</dt>
  <dd>
   <ul>
    <li>
     <p>
      Integración de uno o más servicios que resuelven un problema de negocio.
     </p>
    </li>
   </ul>
  </dd>
  <dt>Capa de servicio</dt>
  <dd>
   <ul>
    <li>
     <p>Componentes que se han desarrollado como servicios.</p>
    </li>
   </ul>
  </dd>
  <dt>Capa de recursos</dt>
  <dd>
   <ul>
    <li>
     <p>Recursos operacionales: CRM, ERP, HR, BD.</p>
    </li>
    <li>
     <p>Tecnologías (Java, .NET, PHP).</p>
    </li>
   </ul>
  </dd>
 </dl>
 <p>
  <small>
   Fuente:
   <a href="https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa"
     target="_blank" rel="nooper">https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >E. <dfn>Diagrama de Arquitectura</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    A continuación se muestra como quedaría un ejemplo de bases de datos
    si se adaptara a SOA.
   </p>
  </li>
  <li>
   <p>
    <a href="https://www.uml-diagrams.org/component-diagrams.html"
      target="_blank" rel="nooper">Diagramas de Componentes para SOA.</a>
   </p>
  </li>
 </ul>
</div>
<figure>
 <img src="/img/m03soa/arquitectura_soa.svg" alt="Capas de SOA">
</figure>
<div class="lectura">
 <p>
  <small>
   Fuente:
   <a href="https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa"
     target="_blank"
     rel="nooper">https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >F. Introducción a XML</h1>
      </section>
     <section >
         <h1 >G. <dfn>XML</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas en inglés de
    e<strong>Xtensible Markup Language</strong>,
    traducido como
    <strong>Lenguaje de Marcado Extensible o Lenguaje de Marcas
     Extensible</strong>.
   </p>
  </li>
  <li>
   <p>Metalenguaje que permite definir lenguajes de marcas.</p>
  </li>
  <li>
   <p>
    Desarrollado por el
    <a href="https://www.w3.org/">World Wide Web Consortium</a>
    (W3C).
   </p>
  </li>
  <li>
   <p>Utilizado para almacenar datos en forma legible.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Extensible_Markup_Language"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Extensible_Markup_Language</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >H. Ejemplo de XML</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;?xml</span><span
     style="color: #ff0000;">&nbsp;version</span>=<span
     style="color: #0000ff;">"1.0"</span><span
     style="color: #ff0000;">&nbsp;encoding</span>=<span
     style="color: #0000ff;">"UTF-8"</span>&nbsp;<span
     style="color: #800000;">?&gt;</span></div>
  <div><span style="color: #800000;">&lt;!</span><span
     style="color: #0000ff;">DOCTYPE</span>&nbsp;<span
     style="color: #0000ff;">MiContacto</span>&nbsp;SYSTEM&nbsp;"MiContacto.dtd"<span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;Contacto&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;Nombre&gt;</span>Juan<span
     style="color: #800000;">&lt;/Nombre&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;Email&gt;</span>juan@gm.com<span
     style="color: #800000;">&lt;/Email&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;Telefonos&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;Telefono&gt;</span>5555555555<span
     style="color: #800000;">&lt;/Telefono&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;Telefono&gt;</span>8888888888<span
     style="color: #800000;">&lt;/Telefono&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/Telefonos&gt;</span></div>
  <div><span style="color: #800000;">&lt;/Contacto&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. DTD MiContacto</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;?xml</span><span
     style="color: #ff0000;">&nbsp;version</span>=<span
     style="color: #0000ff;">"1.0"</span><span
     style="color: #ff0000;">&nbsp;encoding</span>=<span
     style="color: #0000ff;">"ISO-8859-1"</span>&nbsp;<span
     style="color: #800000;">?&gt;</span></div>
  <div><span
     style="color: #008000;">&lt;!--&nbsp;Este&nbsp;es&nbsp;el&nbsp;DTD&nbsp;de&nbsp;Contacto&nbsp;--&gt;</span>
  </div>
  <div>
   &lt;!ELEMENT&nbsp;Contacto&nbsp;(Nombre,&nbsp;Email,&nbsp;Telefonos)&gt;
  </div>
  <div>&lt;!ELEMENT&nbsp;Nombre&nbsp;(#PCDATA)&gt;</div>
  <div>&lt;!ELEMENT&nbsp;Email&nbsp;(#PCDATA)&gt;</div>
  <div>&lt;!ELEMENT&nbsp;Telefonos&nbsp;(Telefono)*&gt;</div>
  <div>&lt;!ELEMENT&nbsp;Telefono&nbsp;(#PCDATA)&gt;</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. Introducción a SOAP</h1>
      </section>
     <section >
         <h1 >K. <dfn>SOAP</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Originalmente siglas de Simple Object Access Protocol, Protocolo de Acceso
    Simple a Objetos.
   </p>
  </li>
  <li>
   <p>Hoy en día solo es SOAP, sin un significado especial.</p>
  </li>
  <li>
   <p>
    Protocolo estándar que define cómo dos objetos en diferentes procesos pueden
    comunicarse por medio de intercambio de datos XML.
   </p>
  </li>
  <li>
   <p>
    Es uno de los protocolos utilizados para implementar servicios web.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >L. Estructura de los mensajes de SOAP</h1><div class="marco-lectura">
 <figure>
  <img src="/img/m03soa/mensajes_soap.svg" alt="Mensajes SOAP">
 </figure>
 <ul>
  <li>
   <p>Usan formato XML.</p>
  </li>
  <li>
   <p>3 elementos:</p>
   <dl>
    <dt><dfn>Envelope</dfn> o <dfn>sobre</dfn></dt>
    <dd>
     <p>El elemento raíz.</p>
    </dd>
    <dt><dfn>Header</dfn> o <dfn>encabezado</dfn></dt>
    <dd>
     <p>Especificación de como procesar los datos.</p>
    </dd>
    <dt><dfn>Body</dfn> o <dfn>cuerpo</dfn></dt>
    <dd>
     <p>El conenido del mensaje.</p>
    </dd>
   </dl>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >M. Ejemplo de solicitud SOAP</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;soap:Envelope</span>&nbsp;<span
     style="color: #ff0000;">xmlns:soap</span>=<span
     style="color: #0000ff;">"http://schemas.xmlsoap.org/soap/envelope/"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:Header&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;t:Transaction</span>&nbsp;<span
     style="color: #ff0000;">xmlns:t</span>=<span
     style="color: #0000ff;">"alguna-URI"</span>&nbsp;<span
     style="color: #ff0000;">soap:mustUnderstand</span>=<span
     style="color: #0000ff;">"1"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/t:Transaction&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/soap:Header&gt;</span>&nbsp;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:Body&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;getDetalleDeProducto</span>&nbsp;<span
     style="color: #ff0000;">xmlns</span>=<span
     style="color: #0000ff;">"http://warehouse.example.com/ws"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;productoId&gt;</span>827635<span
     style="color: #800000;">&lt;/productoId&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/getDetalleDeProducto&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/soap:Body&gt;</span></div>
  <div><span style="color: #800000;">&lt;/soap:Envelope&gt;</span></div>
 </div>
</muestra-codigo>
<div class="lectura">
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >N. Ejemplo de respuesta SOAP</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;soap:Envelope</span>&nbsp;<span
     style="color: #ff0000;">xmlns:soap</span>=<span
     style="color: #0000ff;">"http://schemas.xmlsoap.org/soap/envelope/"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:Body&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;getRespuestaDetalleDeProducto</span>&nbsp;<span
     style="color: #ff0000;">xmlns</span>=<span
     style="color: #0000ff;">"http://warehouse.example.com/ws"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;getResultadoDetalleDeProducto&gt;</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;productId&gt;</span>827635<span
     style="color: #800000;">&lt;/productId&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;nombre&gt;</span>Balón&nbsp;de&nbsp;Futbol&lt;/&nbsp;nombre&gt;
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;descripción&gt;</span>Balón&nbsp;de&nbsp;futbol&nbsp;de&nbsp;11”&nbsp;de&nbsp;vinil.<span
     style="color: #800000;">&lt;/descripción&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;precio&gt;</span>300.0<span
     style="color: #800000;">&lt;/precio&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/getResultadoDetalleDeProducto&gt;</span>
  </div>
  <div>
   &nbsp;&nbsp;&nbsp;&nbsp;&lt;/&nbsp;getRespuestaDetalleDeProducto&nbsp;&gt;
  </div>
  <div>&nbsp;&nbsp;<span style="color: #800000;">&lt;/soap:Body&gt;</span>
  </div>
  <div><span style="color: #800000;">&lt;/soap:Envelope&gt;</span></div>
 </div>
</muestra-codigo>
<div class="lectura">
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >O. Introducción a WSDL</h1>
      </section>
     <section >
         <h1 >P. <dfn>WSDL</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas de
    <strong>Web Services Description Language</strong>,
    es un formato de XML que se utiliza para describir servicios Web.
   </p>
  </li>
  <li>
   <p>
    Describe los requisitos del protocolo y los formatos de los mensajes
    necesarios para interactuar con los servicios listados en su catálogo.
   </p>
  </li>
  <li>
   <p>
    Las operaciones y mensajes que soporta se describen en abstracto y se ligan
    después al protocolo concreto de red y al formato del mensaje.
   </p>
  </li>
  <li>
   <p>
    Las operaciones y mensajes que soporta se describen en abstracto y se ligan
    después al protocolo concreto de red y al formato del mensaje.
   </p>
  </li>
  <li>
   <p>
    Las operaciones y mensajes que soporta se describen en abstracto y se ligan
    después al protocolo concreto de red y al formato del mensaje.
   </p>
  </li>
  <li>
   <p>
    Las operaciones y mensajes que soporta se describen en abstracto y se ligan
    después al protocolo concreto de red y al formato del mensaje.
   </p>
  </li>
  <li>
   <p>Se usa a menudo en combinación con SOAP y XML Schema.</p>
  </li>
  <li>
   <p>
    Los tipos de datos especiales se incluyen en el archivo WSDL en forma de XML
    Schema.
   </p>
  </li>
  <li>
   <p>
    El cliente puede usar SOAP para hacer la llamada a una de las funciones
    listadas en el WSDL.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >Q. Elementos de WSDL</h1><div class="lectura">
 <dl>
  <dt><dfn>types</dfn></dt>
  <dd>
   <p>
    Define los tipos de datos usados en los mensajes. Se utilizan los tipos
    definidos en la especificación XML Schema.
   </p>
  </dd>
  <dt><dfn>message</dfn></dt>
  <dd>
   <p>
    Define los elementos de mensaje. Cada mensaje puede consistir en una serie
    de partes lógicas. Las partes pueden ser de cualquiera de los tipos
    definidos en el elemento message.
   </p>
  </dd>
  <dt><dfn>portType</dfn></dt>
  <dd>
   <p>
    Define las operaciones permitidas y los mensajes intercambiados en el
    Servicio.
   </p>
  </dd>
  <dt><dfn>binding</dfn></dt>
  <dd>
   <p>Especifica los protocolos de comunicación usados.</p>
  </dd>
  <dt><dfn>service</dfn></dt>
  <dd>
   <p>
    Conjunto de puertos y dirección de los mismos. Esta parte final hace
    referencia a lo aportado por las secciones anteriores.
   </p>
  </dd>
 </dl>
 <p>
  Con estos elementos no sabemos qué hace un servicio pero sí disponemos de la
  información necesaria para interactuar con él (funciones, mensajes de
  entrada/salida, protocolos, etcétera).
 </p>
</div>
      </section>
     <section >
         <h1 >R. Ejemplo de WSDL</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;definitions</span>&nbsp;<span
     style="color: #ff0000;">name</span>=“PrecioProd“</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">targetNamespace</span>=<span
     style="color: #0000ff;">"http://example.com/stockquote.wsdl"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">xmlns:tns</span>=<span
     style="color: #0000ff;">"http://example.com/stockquote.wsdl"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">xmlns:xsd1</span>=<span
     style="color: #0000ff;">"http://example.com/stockquote.xsd"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">xmlns:soap</span>=<span
     style="color: #0000ff;">"http://schemas.xmlsoap.org/wsdl/soap/"</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">xmlns</span>=<span
     style="color: #0000ff;">"http://schemas.xmlsoap.org/wsdl/"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span style="color: #800000;">&lt;types&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;schema</span>&nbsp;<span
     style="color: #ff0000;">targetNamespace</span>=<span
     style="color: #0000ff;">"http://example.com/stockquote.xsd"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">xmlns</span>=<span
     style="color: #0000ff;">"http://www.w3.org/2000/10/XMLSchema"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;element</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"SolPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;complexType&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;all&gt;&lt;element</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"productoId"</span>&nbsp;<span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"decimal"</span><span
     style="color: #800000;">/&gt;&lt;/all&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/complexType&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/element&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;element</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"PrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;complexType&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;all&gt;&lt;element</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"precio"</span>&nbsp;<span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"float"</span><span
     style="color: #800000;">/&gt;&lt;/all&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/complexType&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/element&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/schema&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/types&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;message</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"InputGetPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;part</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"body"</span>&nbsp;<span
     style="color: #ff0000;">element</span>=<span
     style="color: #0000ff;">"xsd1:SolPrecioProd"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/message&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;message</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"OutputGetPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;part</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"body"</span>&nbsp;<span
     style="color: #ff0000;">element</span>=<span
     style="color: #0000ff;">"xsd1:PrecioProd"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/message&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;portType</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"PortTypePrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;operation</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"GetPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span>&nbsp;<span
     style="color: #ff0000;">message</span>=<span
     style="color: #0000ff;">"tns:InputGetPrecioProd"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span>&nbsp;<span
     style="color: #ff0000;">message</span>=<span
     style="color: #0000ff;">"tns:OutputGetPrecioProd"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/operation&gt;</span></div>
  <div>&nbsp;&nbsp;<span
    style="color: #800000;">&lt;/portType&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;binding</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"BindPrecioProdSoap"</span>&nbsp;<span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"tns:PortTypePrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:binding</span>&nbsp;<span
     style="color: #ff0000;">style</span>=<span
     style="color: #0000ff;">"document"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #ff0000;">transport</span>=<span
     style="color: #0000ff;">"http://schemas.xmlsoap.org/soap/http"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;operation</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"GetPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:operation</span>&nbsp;<span
     style="color: #ff0000;">soapAction</span>=<span
     style="color: #0000ff;">"http://example.com/GetPrecioProd"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input&gt;&lt;soap:body</span>&nbsp;<span
     style="color: #ff0000;">use</span>=<span
     style="color: #0000ff;">"literal"</span><span
     style="color: #800000;">/&gt;&lt;/input&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output&gt;&lt;soap:body</span>&nbsp;<span
     style="color: #ff0000;">use</span>=<span
     style="color: #0000ff;">"literal"</span><span
     style="color: #800000;">/&gt;&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/operation&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/binding&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;service</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"ServPrecioProd"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;documentation&gt;</span>Devuelve&nbsp;el&nbsp;precio&nbsp;de&nbsp;un&nbsp;producto.<span
     style="color: #800000;">&lt;/documentation&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;port</span>&nbsp;<span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"PuertoPrecioProd"</span>&nbsp;<span
     style="color: #ff0000;">binding</span>=<span
     style="color: #0000ff;">"tns:BindPrecioProdSoap"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;soap:address</span>&nbsp;<span
     style="color: #ff0000;">location</span>=<span
     style="color: #0000ff;">"http://example.com/precioprod"</span><span
     style="color: #800000;">/&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/port&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/service&gt;</span></div>
  <div><span style="color: #800000;">&lt;/definitions&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >S. Introducción a UDDI</h1>
      </section>
     <section >
         <h1 >T. <dfn>UDDI</dfn></h1><div class="lectura">
 <p><strong>Este estándar no se usa.</strong></p>
 <ul>
  <li>
   <p>
    Siglas del catálogo de negocios de Internet denominado
    <strong>Universal Description, Discovery and Integration</strong>.
   </p>
  </li>
  <li>
   <p>El registro en el catálogo se hace en XML.</p>
  </li>
  <li>
   <p>
    Es una iniciativa industrial abierta (sufragada por la OASIS) entroncada en
    el contexto de los servicios Web.
   </p>
  </li>
  <li>
   <p>El registro de un negocio en UDDI tiene tres partes:</p>
   <dl>
    <dt><dfn>Páginas blancas</dfn></dt>
    <dd>
     <p>dirección, contacto y otros identificadores conocidos.</p>
    </dd>
    <dt><dfn>Páginas amarillas</dfn></dt>
    <dd>
     <p>categorización industrial basada en taxonomías.</p>
    </dd>
    <dt><dfn>Páginas verdes</dfn></dt>
    <dd>
     <p>
      información técnica sobre los servicios que aportan las propias empresas.
     </p>
    </dd>
   </dl>
  </li>
  <li>
   <p>
    Es uno de los estándares básicos de los servicios web, cuyo objetivo es ser
    accedido por los mensajes SOAP y dar paso a documentos WSDL, en los que se
    describen los requisitos del protocolo y los formatos del mensaje solicitado
    para interactuar con los servicios Web del catálogo de registros.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/UDDI"
     target="_blank" rel="nooper">https://es.wikipedia.org/wiki/UDDI</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >U. Introducción a REST</h1>
      </section>
     <section >
         <h1 >V. <dfn>REST</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas para
    <strong>Representational State Transfer</strong>
    o
    <em>transferencia de estado representacional</em>.
   </p>
  </li>
  <li>
   <p>
    Estilo de arquitectura de software para sistemas distribuidos en la World
    Wide Web.
   </p>
  </li>
  <li>
   <p>
    Es cualquier interfaz entre sistemas que use HTTP para obtener datos o
    realizar operaciones sobre esos datos usando formatos para intercambio de
    datos como XML, YAML o JSON.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuentes:
   <a href="https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional</a>
   y
   <a href="https://bbvaopen4u.com/es/actualidad/api-rest-que-es-y-cuales-son-sus-ventajas-en-el-desarrollo-de-proyectos"
     target="_blank"
     rel="nooper">https://bbvaopen4u.com/es/actualidad/api-rest-que-es-y-cuales-son-sus-ventajas-en-el-desarrollo-de-proyectos</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >W. Estructura de REST</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Toda página web tiene una URL asociada, pero también puede representar una
    colección de datos, por ejemplo,
    <q>https://mirest.com/contactos</q>, o un registro, por ejemplo,
    <q>https://mirest.com/contactos/69</q>.
   </p>
  </li>
  <li>
   <p>
    Para interactuar con la URL hay que enviarle una solicitud, que consta de:
   </p>
   <ul>
    <li>
     <p>Una URL con datos (como cuando buscas en Google).</p>
    </li>
    <li>
     <p>
      Un archivo con información adicional, como puede ser el método de envío o
      los datos de la solicitud.
     </p>
    </li>
    <li>
     <p>El método de envío puede ser</p>
     <dl>
      <dt><dfn>GET</dfn></dt>
      <dd>
       <p>Para consultas. Los datos van en la URL.</p>
      </dd>
      <dt><dfn>POST</dfn></dt>
      <dd>
       <p>
        Para agregar nuevo contenido. Los datos van en con la información
        adicional.
       </p>
      </dd>
      <dt><dfn>PUT</dfn></dt>
      <dd>
       <p>
        Sustituir todo el contenido por los datos enviados. Los datos van con la
        información adicional.
       </p>
      </dd>
      <dt><dfn>UPDATE</dfn></dt>
      <dd>
       <p>
        Actualizar solo los datos enviados. Los datos van con la información
        adicional.
       </p>
      </dd>
      <dt><dfn>DELETE</dfn></dt>
      <dd>
       <p>eliminar los datos de la URL</p>
      </dd>
     </dl>
    </li>
    <li>
     <p>
      Los datos de la solicitud que van dentro de la información adicional,
      pueden enviarse en los siguientes formatos:
     </p>
     <ul>
      <li>application/x-www-form-urlencoded</li>
      <li>multipart/form-data</li>
      <li>text/plain</li>
      <li>XML</li>
      <li>JSON</li>
      <li>YAML</li>
     </ul>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section >
         <h1 >4. Ejemplo de geolocalización</h1><iframe src="/src/m04geolocalizacion/maps.html" height="550"></iframe>
<p class="noPrint">
 <a href="/src/m04geolocalizacion/maps.html" target="_blank"
   rel="nooper">Ábrelo en otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Maps<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Maps<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7526.355841517565!2d-98.98640932835467!3d19.40471709504528!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1e319b9413c4f%3A0x1d391ad53ddf65d1!2sUniversidad%20Tecnol%C3%B3gica%20de%20Nezahualc%C3%B3yotl!5e0!3m2!1ses-419!2smx!4v1574352931317!5m2!1ses-419!2smx"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"600"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"450"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">border:0;</span><span
     style="color: #0000ff;">"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allowfullscreen</span>=<span
     style="color: #0000ff;">""</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. Ejemplo de redes sociales</h1><div class="lectura">
 <p>
  Generado en
  <a href="https://developers.facebook.com/docs/plugins/page-plugin/"
    target="_blank">https://developers.facebook.com/docs/plugins/page-plugin/</a>
 </p>
</div>
<iframe src="/src/m05sociales/face.html" height="600"></iframe>
<p class="noPrint">
 <a href="/src/m05sociales/face.html" target="_blank" rel="nooper">Ábrelo en
  otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Face<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Face<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Ffacebook&amp;tabs=timeline&amp;width=340&amp;height=500&amp;small_header=false&amp;adapt_container_width=true&amp;hide_cover=false&amp;show_facepile=true&amp;appId=437040163649483"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"340"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"500"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">border:none;overflow:hidden</span><span
     style="color: #0000ff;">"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">scrolling</span>=<span
     style="color: #0000ff;">"no"</span> <span
     style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span
     style="color: #ff0000;">allowTransparency</span>=<span
     style="color: #0000ff;">"true"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allow</span>=<span
     style="color: #0000ff;">"encrypted-media"</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 class="leccion">6. Características de un e-commerce</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan las características principales de un e-commerce.
 </p>
 <p>
  <small>
   Fuente:
   <a href="https://www.actualidadecommerce.com/las-5-principales-caracteristicas-de-un-sitio-ecommerce-bien-disenado/"
     target="_blank"
     rel="nooper">https://www.actualidadecommerce.com/las-5-principales-caracteristicas-de-un-sitio-ecommerce-bien-disenado/</a>
  </small>
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m06ecommerce/mAfacilidad.html">Facilidad de navegación</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m06ecommerce/mBnoDestaca.html">El diseño no destaca por encima de los productos</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m06ecommerce/mCfacil.html">Fácil proceso de compra</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m06ecommerce/mDpopulares.html">Exhibir los productos más populares</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m06ecommerce/mEdetalle.html">Fotos de productos a detalle</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Facilidad de navegación</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Cuando se trata de vender productos, el primer requisito a cumplir para una
    tienda e-commerce es que el comprador tiene que ser capaz de encontrar
    rápida y de forma especifica, lo que el o ella están buscando. Una
    navegación eficaz es fundamental para los sitios e-commerce ya que los
    visitantes que no pueden encontrar lo que buscan se traducen en ventas
    perdidas.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. El diseño no destaca por encima de los productos</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En un negocio Ecommerce, el foco de atención siempre debe estar en los
    productos que están disponibles para su compra. Un diseño que es
    extravagante sin sentido, generalmente hace más daño que beneficio, puesto
    que al final, el diseño no es lo que se vende, sino los productos.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. Fácil proceso de compra</h1><div class="lectura">
 <ul>
  <li>
   <p>
    La experiencia del usuario en sitios de comercio electrónico es fundamental
    para el éxito. Es decir, si el proceso de compra implica demasiados pasos o
    incluso es confuso, los compradores simplemente terminarán abandonando su
    carrito de compras. Por ello, el checkout siempre debe implicar la mínima
    cantidad de pasos y debe ser lo más fácil e intuitivo para los compradores.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. Exhibir los productos más populares</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Muchos negocios Ecommerce se esfuerzan por mostrar los elementos que pueden
    ser de interés para los potenciales compradores. Un gran número de sitios de
    comercio electrónico están utilizando espacios muy amplios en la página de
    inicio para promover las ventas actuales, el lanzamiento de un nuevo
    producto o lo que sea que genere interés.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. Fotos de productos a detalle</h1><div class="lectura">
 <ul>
  <li>
   <p>
    La venta de productos en Internet es diferente de vender en una tienda
    física porque el comprador no puede tocar o ver en persona el producto antes
    de tomar la decisión de compra. Al ofrecer fotos de los productos que
    resaltan a detalle las características principales del mismo, se consigue
    superar ese inconveniente y se hace más fácil para el comprador decidir si
    conviene o no comprar el producto.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">7. Diseño de servicios</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan las propiedades básicas de CSS.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m07servicios/mAarquitectura.html">Arquitectura</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mBdespliegue.html">Diagrama de despliegue</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mCer.html">Diagrama entidad relación</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mDinstrucciones.html">Instrucciones</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mEarchivos.html">Archivos</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mFindexHtml.html">www/index.html</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mGctrlSesion.html">www/CtrlSesion.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mHindexJs.html">index.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mIvalidaUsuario.html">validaUsuario.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m07servicios/mJresumen.html">Resumen</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Arquitectura</h1><div class="lectura">
 <p>
  En las siguientes páginas se muestra la construcción de un sistema de
  control de acceso.
 </p>
 <p>
  También se ejemplifica la forma en que un PWA invoca procesos en el
  servidor web.
 </p>
 <p>
  Revisa el código y pruébalo en Replit con la url
  <a href="https://replit.com/@GilbertoPachec3/aut?v=1"
    target="_blank"
    rel="nooper">https://replit.com/@GilbertoPachec3/aut?v=1</a>.
 </p>
 <p>
  Cada <dfn>servicio</dfn> es una función y para accederlo, el servidor le
  asigna un <dfn>nombre de recurso</dfn>, el cual es una ruta dentro de la
  URL; es como si fuera el nombre del archivo. Por ejemplo, en la URL
  <q>https://aut--gilbertopachec3.repl.co/valida</q>, el nombre del recurso es
  <q>/valida</q>.
 </p>
 <p>
  En este caso, a todos los archivos de HTML y JavaScript les llamaremos
  <df>www</df>.
 </p>
 <p>
  Para validar el acceso usaremos un servicio llamado
  <dfn>validaUsuario</dfn>
  que tiene asociado el nombre de recurso
  <dfn>valida</dfn>.
 </p>
 <p>
  Para poder validar el acceso, <q>validaUsuario</q> guarda la contraseña
  de cada usuario en una entidad llamada <dfn>Usuario</dfn>. En este ejemplo
  se usa el servidor Atlas para la base de datos tipo MongoDB.
 </p>
 <section>
  <h1>Diagrama de componentes</h1>
  <figure>
   <img class="dc" src="/img/m04sesion/aut_componentes.svg"
     alt="Diagrama de Componentes">
  </figure>
 </section>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><div class="lectura">
 <figure>
  <img src="/img/m04sesion/aut_despliegue.svg"
    alt="Diagrama de Despliegue">
 </figure>
</div>
      </section>
     <section >
         <h1 >C. Diagrama entidad relación</h1><div class="lectura">
 <figure>
   <img src="/img/m04sesion/aut_entidades.svg"
     alt="Diagrama de Entidad Relación de la Base de Datos">
 </figure>
</div>
      </section>
     <section >
         <h1 >D. Instrucciones</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1MOzhSfUtSbia9mABh6tCZSDyYRaC5MtS/view?usp=sharing"
      target="_blank" rel="nooper">Crea la base de datos en Atlas.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dKuFogISfIV1O4rnsysBjuUexmpJFUJl/view?usp=sharing"
      target="_blank" rel="nooper">Crea un sitio de Replit de tipo
     <em>Node.js</em>
     utilizando las páginas que siguen y pruébalo.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1BnRquRDpNmnTUM9iijjeY1WV1J1MrT9z/view?usp=sharing"
      target="_blank" rel="nooper">Observa paso a paso la comunicación entre
     ciente y servidor.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >E. Archivos</h1><div class="lectura">
 <ul>
  <li>
   <p>www</p>
   <ul>
    <li>
     <p><a href="mGctrlSesion.html">CtrlSesion.js</a></p>
    </li>
    <li>
     <p><a href="mFindexHtml.html">index.html</a></p>
    </li>
   </ul>
  </li>
  <li>
   <p><a href="mHindexJs.html">index.js</a></p>
  </li>
  <li>
   <p><a href="mIvalidaUsuario.html">validaUsuario.js</a></p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. www/index.html</h1><muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Autenticación<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Autenticación<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;form</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"sesion"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;output</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"cue"</span><span
     style="color: #800000;">&gt;&lt;/output&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;button</span> <span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp; &nbsp; <span style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"terminar"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; &nbsp;Terminar sesión</div>
  <div>&nbsp; <span style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;/form&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;form</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"login"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp; &nbsp; Cue</div>
  <div>&nbsp; &nbsp; <span style="color: #800000;">&lt;input</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"cue"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp; &nbsp; Match</div>
  <div>&nbsp; &nbsp; <span style="color: #800000;">&lt;input</span> <span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"password"</span></div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"match"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp; &nbsp; Soy humano</div>
  <div>&nbsp; &nbsp; <span style="color: #800000;">&lt;input</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"humano"</span></div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"range"</span> <span
     style="color: #ff0000;">value</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">min</span>=<span
     style="color: #0000ff;">"0"</span> <span
     style="color: #ff0000;">max</span>=<span
     style="color: #0000ff;">"1"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #800000;">&lt;button&gt;</span>Iniciar
   sesión<span style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;/form&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;footer&gt;</span></div>
  <div>&nbsp; <span style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0000ff;">&amp;copy;</span> 2021</div>
  <div>&nbsp; &nbsp;Gilberto Pacheco Gallegos</div>
  <div>&nbsp; <span style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;/footer&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;script</span> <span
     style="color: #ff0000;">type</span>=<span
     style="color: #0000ff;">"module"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"CtrlSesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. www/CtrlSesion.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">CUE</span> = <span
     style="color: #a31515;">"cue"</span></div>
  <div><span style="color: #008000;">/** </span><span
     style="color: #0000ff;">@type</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement|null}</span><span
     style="color: #008000;"> */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">sesion</span> = <span
     style="color: #001080;">document</span>[<span
     style="color: #a31515;">"sesion"</span>]</div>
  <div><span style="color: #008000;">/** </span><span
     style="color: #0000ff;">@type</span><span style="color: #008000;">
   </span><span style="color: #267f99;">{HTMLFormElement|null}</span><span
     style="color: #008000;"> */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">login</span> = <span
     style="color: #001080;">document</span>[<span
     style="color: #a31515;">"login"</span>]</div><br>
  <div><span style="color: #0000ff;">let</span> <span
     style="color: #001080;">esHumano</span> = <span
     style="color: #0000ff;">false</span></div><br>
  <div><span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">sesion</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp;<span style="color: #0070c1;">sesion</span>.<span
     style="color: #001080;">terminar</span>.<span
     style="color: #795e26;">addEventListener</span>(</div>
  <div>&nbsp; <span style="color: #a31515;">"click"</span>, <span
     style="color: #795e26;">terminaSesión</span>)</div>
  <div>}</div>
  <div><span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">login</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp;<span style="color: #0070c1;">login</span>.<span
     style="color: #795e26;">addEventListener</span>(<span
     style="color: #a31515;">"submit"</span>,</div>
  <div>&nbsp; <span style="color: #795e26;">iniciaSesión</span>)</div>
  <div>&nbsp;<span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">humano</span>.<span
     style="color: #795e26;">addEventListener</span>(</div>
  <div>&nbsp; <span style="color: #a31515;">"input"</span>, () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">esHumano</span> =</div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">humano</span>.<span
     style="color: #001080;">valueAsNumber</span> &gt; <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)</div>
  <div>}</div><br>
  <div><span style="color: #795e26;">actualizaFormas</span>()</div><br>
  <div><span style="color: #0000ff;">function</span> <span
     style="color: #795e26;">actualizaFormas</span>() {</div>
  <div>&nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">cue</span> =</div>
  <div>&nbsp; <span style="color: #001080;">sessionStorage</span>.<span
     style="color: #795e26;">getItem</span>(<span
     style="color: #0070c1;">CUE</span>)</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">sesion</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">cue</span> === <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp; &nbsp;<span style="color: #008000;">// Sesión terminada.</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">sesion</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">sesion</span>.<span
     style="color: #001080;">cue</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp; } <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp;<span
    style="color: #008000;">// Sesión iniciada.</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">sesion</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">sesion</span>.<span
     style="color: #001080;">cue</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #0070c1;">cue</span></div>
  <div>&nbsp; }</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">login</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp; <span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">cue</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp; <span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">match</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp; <span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">humano</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp; <span style="color: #001080;">esHumano</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp; <span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0070c1;">cue</span> !== <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span style="color: #008000;">/** </span><span
     style="color: #0000ff;">@param</span><span
      style="color: #008000;"> </span><span
       style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">evt</span><span
      style="color: #008000;"> */</span></div>
  <div><span style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">iniciaSesión</span>(<span
     style="color: #001080;">evt</span>) {</div>
  <div>&nbsp;<span style="color: #af00db;">try</span> {</div>
  <div>&nbsp; <span style="color: #001080;">evt</span>.<span
     style="color: #795e26;">preventDefault</span>();</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">login</span> !== <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp; &nbsp;&amp;&amp; <span
    style="color: #0070c1;">sesion</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp; &nbsp;<span style="color: #af00db;">if</span> (!<span
     style="color: #001080;">esHumano</span>) {</div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(</div>
  <div>&nbsp; &nbsp; &nbsp;<span
    style="color: #a31515;">"Comprueba que eres humano."</span>)</div>
  <div>&nbsp; &nbsp;}</div>
  <div>&nbsp; &nbsp;<span
    style="color: #008000;">// Toma los datos de la forma.</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">datos</span> =</div>
  <div>&nbsp; &nbsp; <span style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #0070c1;">login</span>)</div>
  <div>&nbsp; &nbsp;<span
    style="color: #008000;">/* Usa el método POST para</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp; * enviar los datos de la forma</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp; * al recurso</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp; * &nbsp;"/valida"</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp; * en el servidor. */</span></div>
  <div>&nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">res</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">fetch</span>(</div>
  <div>&nbsp; &nbsp; <span style="color: #a31515;">"/valida"</span>,</div>
  <div>&nbsp; &nbsp; {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"POST"</span>,</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
      style="color: #0070c1;">datos</span></div>
  <div>&nbsp; &nbsp; })</div>
  <div>&nbsp; &nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">res</span>.<span
      style="color: #0070c1;">ok</span>) {</div>
  <div>&nbsp; &nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">resp</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">res</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">resp</span> === <span
     style="color: #a31515;">"ok"</span>) {</div>
  <div>&nbsp; &nbsp; &nbsp;<span
     style="color: #001080;">sessionStorage</span>.<span
     style="color: #795e26;">setItem</span>(<span
     style="color: #0070c1;">CUE</span>,</div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">login</span>.<span
     style="color: #001080;">cue</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp; &nbsp; &nbsp;<span
     style="color: #795e26;">actualizaFormas</span>()</div>
  <div>&nbsp; &nbsp; } <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Datos incorrectos."</span>)</div>
  <div>&nbsp; &nbsp; }</div>
  <div>&nbsp; &nbsp;} <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">res</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp; &nbsp;}</div>
  <div>&nbsp; }</div>
  <div>&nbsp;} <span style="color: #af00db;">catch</span> (<span
     style="color: #001080;">e</span>) {</div>
  <div>&nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">e</span>)</div>
  <div>&nbsp; <span style="color: #795e26;">alert</span>(<span
     style="color: #001080;">e</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">terminaSesión</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">sessionStorage</span>.<span
     style="color: #795e26;">removeItem</span>(<span
     style="color: #0070c1;">CUE</span>)</div>
  <div>&nbsp;<span style="color: #795e26;">actualizaFormas</span>()</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. index.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">express</span> = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"express"</span>)</div>
  <div><span style="color: #0000ff;">const</span> { <span
     style="color: #267f99;">Server</span> } = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"http"</span>)</div>
  <div><span style="color: #0000ff;">const</span> { <span
     style="color: #795e26;">join</span> } = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"path"</span>)</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">multer</span> = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">'multer'</span>)</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">validaUsuario</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"./validaUsuario"</span>)</div><br>
  <div><span
     style="color: #008000;">// Complemento para el servidor web</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">app</span> = <span
     style="color: #795e26;">express</span>()</div>
  <div><span style="color: #008000;">/** Comportamiento base del</span></div>
  <div><span style="color: #008000;">&nbsp;* servidor web */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">httpServer</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Server</span>(<span
     style="color: #0070c1;">app</span>)</div>
  <div><span style="color: #008000;">/** Ubicación de la carpeta de</span></div>
  <div><span style="color: #008000;">&nbsp;* archivos del sitio. */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">www</span> = <span
     style="color: #795e26;">join</span>(<span
     style="color: #001080;">__dirname</span>, <span
     style="color: #a31515;">"www"</span>)</div>
  <div><span
     style="color: #008000;">/** Manejo de datos multipart. */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">multipart</span> = <span
     style="color: #795e26;">multer</span>()</div><br>
  <div><span
     style="color: #008000;">// Utiliza la carpeta de archivos.</span></div>
  <div><span style="color: #0070c1;">app</span>.<span
     style="color: #795e26;">use</span>(<span
     style="color: #795e26;">express</span>.<span
     style="color: #795e26;">static</span>(<span
     style="color: #0070c1;">www</span>))</div>
  <div><span
     style="color: #008000;">/* El recurso "/valida" procesa</span></div>
  <div><span
     style="color: #008000;">&nbsp;* solicitudes post en formato</span></div>
  <div><span
     style="color: #008000;">&nbsp;* multipart sin archivos adjuntos</span></div>
  <div><span style="color: #008000;">&nbsp;* e invoca la función</span></div>
  <div><span
    style="color: #008000;">&nbsp;* validaUsuario para procesar la</span></div>
  <div><span style="color: #008000;">&nbsp;* solicitud. */</span></div>
  <div><span style="color: #0070c1;">app</span>.<span
     style="color: #795e26;">post</span>(<span
     style="color: #a31515;">"/valida"</span>,</div>
  <div>&nbsp;<span style="color: #0070c1;">multipart</span>.<span
     style="color: #795e26;">none</span>(),</div>
  <div>&nbsp;<span style="color: #795e26;">validaUsuario</span>)</div>
  <div><span
    style="color: #008000;">/* El servidor empieza a escuchar</span></div>
  <div><span
    style="color: #008000;">&nbsp;* solucitudes en el puerto 3000.*/</span></div>
  <div><span style="color: #0070c1;">httpServer</span>.<span
     style="color: #795e26;">listen</span>(<span
     style="color: #098658;">3000</span>)</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. validaUsuario.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">MongoClient</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"mongodb"</span>).<span
     style="color: #001080;">MongoClient</span></div>
  <div><span
    style="color: #008000;">/* Cambia el valor por el que te</span></div>
  <div><span
    style="color: #008000;">&nbsp;* proporciona Atlas y cambia</span></div>
  <div><span
    style="color: #008000;">&nbsp;* &lt;password&gt; por la contraseña del</span></div>
  <div><span
    style="color: #008000;">&nbsp;* usuario que creaste dentro de</span></div>
  <div><span style="color: #008000;">&nbsp;* Atlas. */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">uri</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"mongodb+srv://*****************"</span></div><br>
  <div><span style="color: #008000;">/**</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@param</span><span
      style="color: #008000;"> </span><span
       style="color: #267f99;">{import("express").</span></div>
  <div><span style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;"> &nbsp; Request}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">req</span><span
      style="color: #008000;"> solicitud que</span></div>
  <div><span
    style="color: #008000;">&nbsp;* &nbsp; &nbsp;recibe el servidor web.</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@param</span><span style="color: #008000;">
   </span><span style="color: #267f99;">{import("express").</span></div>
  <div><span style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;"> &nbsp;Response}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">res</span><span
      style="color: #008000;"> respuesta que</span></div>
  <div><span
    style="color: #008000;">&nbsp;* &nbsp; &nbsp;devuelve el servidor web. */</span></div>
  <div><span style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span></div>
  <div>&nbsp;<span style="color: #795e26;">validaUsuario</span>(<span
     style="color: #001080;">req</span>, <span
     style="color: #001080;">res</span>) {</div>
  <div>&nbsp;<span
    style="color: #008000;">/* Crea un cliente que se conecta</span></div>
  <div><span
    style="color: #008000;">&nbsp; * a la base de datos. */</span></div>
  <div>&nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">client</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #795e26;">MongoClient</span>(</div>
  <div>&nbsp; <span style="color: #0070c1;">uri</span>,</div>
  <div>&nbsp; {</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">useNewUrlParser</span><span
     style="color: #001080;">:</span> <span
      style="color: #0000ff;">true</span>,</div>
  <div>&nbsp; &nbsp;<span
    style="color: #001080;">useUnifiedTopology</span><span
     style="color: #001080;">:</span> <span
      style="color: #0000ff;">true</span>
  </div>
  <div>&nbsp; })</div>
  <div>&nbsp;<span style="color: #af00db;">try</span> {</div>
  <div>&nbsp; <span style="color: #af00db;">await</span> <span
     style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">connect</span>()</div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">usuario</span> = <span
     style="color: #0070c1;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">db</span>(<span
     style="color: #a31515;">"aut"</span>).</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">collection</span>(<span
     style="color: #a31515;">"usuario"</span>)</div>
  <div>&nbsp; <span
    style="color: #008000;">/* Los datos enviados por la</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp;* página vienen en la propiedad</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp;* body de req. */</span></div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">datos</span> = <span
     style="color: #001080;">req</span>.<span
     style="color: #001080;">body</span></div>
  <div>&nbsp; <span style="color: #008000;">/* Cuenta en la base de datos</span>
  </div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp;* los documentos que tengan</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp;* &nbsp;nombre === datos.cue</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp;* y</span></div>
  <div><span
    style="color: #008000;">&nbsp; &nbsp;* &nbsp;contrasena === datos.match</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp;*/</span></div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">total</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">usuario</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">countDocuments</span>({</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">nombre</span><span
     style="color: #001080;">:</span> <span
     style="color: #0070c1;">datos</span>.<span
     style="color: #001080;">cue</span>,</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">contrasena</span><span
     style="color: #001080;">:</span> <span
     style="color: #0070c1;">datos</span>.<span
     style="color: #001080;">match</span></div>
  <div>&nbsp; &nbsp;})</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">total</span> &gt; <span
     style="color: #098658;">0</span>) {</div>
  <div>&nbsp; &nbsp;<span
    style="color: #008000;">/* Devuelve a la página el texto</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp; * &nbsp;"ok". */</span></div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">res</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #a31515;">"ok"</span>)</div>
  <div>&nbsp; } <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp;<span
    style="color: #008000;">/* Devuelve a la página el texto</span></div>
  <div><span style="color: #008000;">&nbsp; &nbsp; * &nbsp;"". */</span></div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">res</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp; }</div>
  <div>&nbsp;} <span style="color: #af00db;">catch</span> (<span
     style="color: #001080;">e</span>) {</div>
  <div>&nbsp; <span style="color: #001080;">res</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
      style="color: #001080;">e</span>)</div>
  <div>&nbsp;} <span style="color: #af00db;">finally</span> {</div>
  <div>&nbsp; <span style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">close</span>()</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #795e26;">module</span>.<span
     style="color: #267f99;">exports</span> = <span
     style="color: #001080;">validaUsuario</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>En esta lección se presentó un ejemplo de control de sesión.</p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">8. Renderizado del lado del cliente</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presenta el ejemplo base para IoT.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m08renderCliente/mAcasos.html">Diagrama de casos de uso</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mBdespliegue.html">Diagrama de despliegue</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mCer.html">Diagrama entidad relación</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mDnoRel.html">Diseño no relacional</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mEinstrucciones.html">Instrucciones</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mFarchivos.html">Archivos</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mGtipos.html">tipos.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mHcliente.html">cliente.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mIgetValor.html">getValor.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mJsetValor.html">setValor.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mKindexJs.html">index.js</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mLindexHtml.html">www/index.html</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m08renderCliente/mMresumen.html">Resumen</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Diagrama de casos de uso</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Revisa el código y pruébalo en Replit conla URL
    <a href="https://replit.com/@GilbertoPachec3/iot?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec3/iot?v=1</a>.
   </p>
  </li>
 </ul>
 <figure>
  <img src="/img/m05iot/casos_iot.svg" alt="Diagrama de Casos de Uso">
 </figure>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><div class="lectura">
 <figure>
  <img class="dc" src="/img/m05iot/despliegue_iot.svg"
    alt="Diagrama de Despliegue">
 </figure>
</div>
      </section>
     <section >
         <h1 >C. Diagrama entidad relación</h1><div class="lectura">
 <figure>
  <img class="dc" src="/img/m05iot/entidades_iot.svg"
    alt="Diagrama de Entidad Relación de la Base de Datos">
 </figure>
</div>
      </section>
     <section >
         <h1 >D. Diseño no relacional</h1><div class="lectura">
 <figure>
  <img class="dc" src="/img/m05iot/nosql_iot.svg"
    alt="Diseño No SQL de la Base de Datos">
 </figure>
</div>
      </section>
     <section >
         <h1 >E. Instrucciones</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/10MfE6AYQHtSyfJW3Kb1PiARX1VNfkMwr/view?usp=sharing"
      target="_blank" rel="nooper">Crea la base de datos iot en Atlas y agrega
     un documento para el dispositivo.</a>
   </p>
  </li>
  <li>
   <p>
    Crea un sitio de Replit de nombre iot con Node.js usando los
    archivos de este proyecto. El proceso es parecido al de la lección
    <em>Control de sesión</em>.
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >F. Archivos</h1><div class="lectura">
 <ul>
  <li>
   <p>www</p>
   <ul>
    <li>
     <p><a href="mLindexHtml.html">index.html</a></p>
    </li>
   </ul>
  </li>
  <li>
   <p><a href="mHcliente.html">cliente.js</a></p>
  </li>
  <li>
   <p><a href="mIgetValor.html">getValor.js</a></p>
  </li>
  <li>
   <p><a href="mKindexJs.html">index.js</a></p>
  </li>
  <li>
   <p><a href="mJsetValor.html">setValor.js</a></p>
  </li>
  <li>
   <p><a href="mGtipos.html">tipos.js</a></p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >G. tipos.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #008000;">/**</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@typedef</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Object}</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">dispositivo</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">_id</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span><span
     style="color: #008000;"> */</span></div><br>
  <div><span style="color: #008000;">/**</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@typedef</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Object}</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">historico</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">[_id]</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">dispositivoId</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span style="color: #008000;">&nbsp;* </span><span
     style="color: #0000ff;">@property</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{number}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">timestamp</span></div>
  <div><span style="color: #008000;">&nbsp;*/</span></div><br>
  <div><span style="color: #267f99;">module</span>.<span
     style="color: #267f99;">exports</span> = <span
     style="color: #098658;">0</span>;</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. cliente.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">MongoClient</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"mongodb"</span>).<span
     style="color: #001080;">MongoClient</span>;</div>
  <div><span style="color: #008000;">/* Cambia el valor por el que te</span>
  </div>
  <div><span style="color: #008000;">&nbsp;* proporciona Atlas y cambia</span>
  </div>
  <div><span style="color: #008000;">&nbsp;* &lt;password&gt; por la
    contraseña</span></div>
  <div><span style="color: #008000;">&nbsp;* del usuario que creaste
    dentro</span></div>
  <div><span style="color: #008000;">&nbsp;* de Atlas. */</span></div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">uri</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"mongodb+srv://*****************"</span></div><br>
  <div><span style="color: #0000ff;">function</span> <span
     style="color: #795e26;">cliente</span>() {</div>
  <div>&nbsp;<span style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #795e26;">MongoClient</span>(</div>
  <div>&nbsp; <span style="color: #0070c1;">uri</span>,</div>
  <div>&nbsp; {</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">useNewUrlParser</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp; &nbsp;<span
     style="color: #001080;">useUnifiedTopology</span><span
     style="color: #001080;">:</span> <span style="color: #0000ff;">true</span>
  </div>
  <div>&nbsp; });</div>
  <div>}</div><br>
  <div><span style="color: #795e26;">module</span>.<span
     style="color: #795e26;">exports</span> = <span
     style="color: #795e26;">cliente</span>;</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. getValor.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">cliente</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"./cliente"</span>)</div><br>
  <div><span style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getValor</span>() {</div>
  <div>&nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">client</span> = <span
     style="color: #795e26;">cliente</span>()</div>
  <div>&nbsp;<span style="color: #af00db;">try</span> {</div>
  <div>&nbsp; <span style="color: #af00db;">await</span> <span
     style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">connect</span>()</div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">iot</span> = <span
     style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">db</span>(<span
     style="color: #a31515;">"iot"</span>)</div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dispositivo</span> =</div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">iot</span>.<span
     style="color: #795e26;">collection</span>(<span
     style="color: #a31515;">"dispositivo"</span>)</div>
  <div>&nbsp; <span
     style="color: #008000;">/** @type {import("./tipos").</span></div>
  <div><span
     style="color: #008000;">&nbsp; &nbsp;* &nbsp; &nbsp; &nbsp; dispositivo|null} */</span></div>
  <div>&nbsp; <span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">modelo</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">dispositivo</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">findOne</span>({ <span
     style="color: #001080;">_id</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"1"</span> })</div>
  <div>&nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Recibe"</span>, <span
     style="color: #a31515;">"bd"</span>,</div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">modelo</span>)</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">modelo</span> !== <span
     style="color: #0000ff;">null</span>) {</div>
  <div>&nbsp; &nbsp;<span style="color: #af00db;">return</span> <span
     style="color: #0070c1;">modelo</span>.<span
     style="color: #001080;">valor</span></div>
  <div>&nbsp; } <span style="color: #af00db;">else</span> {</div>
  <div>&nbsp; &nbsp;<span style="color: #af00db;">return</span> <span
     style="color: #a31515;">"0"</span></div>
  <div>&nbsp; }</div>
  <div>&nbsp;} <span style="color: #af00db;">catch</span> (<span
     style="color: #001080;">e</span>) {</div>
  <div>&nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #001080;">e</span>)</div>
  <div>&nbsp;} <span style="color: #af00db;">finally</span> {</div>
  <div>&nbsp; <span style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">close</span>()</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #af00db;">return</span> <span
     style="color: #a31515;">"0"</span></div>
  <div>}</div><br>
  <div><span style="color: #795e26;">module</span>.<span
     style="color: #795e26;">exports</span> = <span
     style="color: #795e26;">getValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. setValor.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #795e26;">cliente</span>&nbsp;=</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"./cliente"</span>)</div><br>
  <div><span style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;">&nbsp;</span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;">&nbsp;</span><span
     style="color: #001080;">valor</span><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span style="color: #0000ff;">async</span>&nbsp;<span
     style="color: #0000ff;">function</span>&nbsp;<span
     style="color: #795e26;">setValor</span>(<span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0070c1;">client</span>&nbsp;=&nbsp;<span
     style="color: #795e26;">cliente</span>()</div>
  <div>&nbsp;<span style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">await</span>&nbsp;<span
     style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">connect</span>()</div>
  <div>&nbsp;&nbsp;<span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0070c1;">iot</span>&nbsp;=&nbsp;<span
     style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">db</span>(<span
     style="color: #a31515;">"iot"</span>)</div>
  <div>&nbsp;&nbsp;<span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0070c1;">dispositivo</span>&nbsp;=</div>
  <div>&nbsp;&nbsp;&nbsp;<span style="color: #0070c1;">iot</span>.<span
     style="color: #795e26;">collection</span>(<span
     style="color: #a31515;">"dispositivo"</span>)</div>
  <div>&nbsp;&nbsp;<span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0070c1;">historico</span>&nbsp;=</div>
  <div>&nbsp;&nbsp;&nbsp;<span style="color: #0070c1;">iot</span>.<span
     style="color: #795e26;">collection</span>(<span
     style="color: #a31515;">"historico"</span>)</div>
  <div>&nbsp;&nbsp;<span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Envía"</span>,&nbsp;<span
     style="color: #a31515;">"bd"</span>,&nbsp;<span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">await</span>&nbsp;<span
     style="color: #0070c1;">dispositivo</span>.<span
     style="color: #795e26;">updateOne</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;{&nbsp;<span style="color: #001080;">_id</span><span
     style="color: #001080;">:</span>&nbsp;<span
     style="color: #a31515;">"1"</span>&nbsp;},</div>
  <div>&nbsp;&nbsp;&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #001080;">$set</span><span
     style="color: #001080;">:</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;})</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/**&nbsp;@type&nbsp;{import("./tipos").</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;historico}&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0070c1;">modelo</span>&nbsp;=&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">dispositivoId</span><span
     style="color: #001080;">:</span>&nbsp;<span
     style="color: #a31515;">"1"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span style="color: #001080;">valor</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span style="color: #001080;">timestamp</span><span
     style="color: #001080;">:</span>&nbsp;<span
     style="color: #267f99;">Date</span>.<span
     style="color: #795e26;">now</span>()</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">await</span>&nbsp;<span
     style="color: #0070c1;">historico</span>.<span
     style="color: #795e26;">insertOne</span>(<span
     style="color: #0070c1;">modelo</span>)</div>
  <div>&nbsp;}&nbsp;<span style="color: #af00db;">catch</span>&nbsp;(<span
     style="color: #001080;">e</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #001080;">e</span>)</div>
  <div>&nbsp;}&nbsp;<span style="color: #af00db;">finally</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span style="color: #0070c1;">client</span>.<span
     style="color: #795e26;">close</span>()</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #795e26;">module</span>.<span
     style="color: #795e26;">exports</span>&nbsp;=&nbsp;<span
     style="color: #795e26;">setValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >K. index.js</h1><muestra-codigo>
 <div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">express</span> = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"express"</span>)</div>
  <div><span style="color: #0000ff;">const</span> { <span
     style="color: #267f99;">Server</span> } = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">'http'</span>)</div>
  <div><span style="color: #0000ff;">const</span> { <span
     style="color: #795e26;">join</span> } = <span
     style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"path"</span>)</div>
  <div><span style="color: #0000ff;">const</span> { <span
     style="color: #267f99;">server</span> } =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">'websocket'</span>)</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">setValor</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"./setValor"</span>)</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #795e26;">getValor</span> =</div>
  <div>&nbsp;<span style="color: #795e26;">require</span>(<span
     style="color: #a31515;">"./getValor"</span>)</div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">app</span> = <span
     style="color: #795e26;">express</span>()</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">httpServer</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Server</span>(<span
     style="color: #0070c1;">app</span>)</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">www</span> = <span
     style="color: #795e26;">join</span>(<span
     style="color: #001080;">__dirname</span>, <span
     style="color: #a31515;">"www"</span>)</div><br>
  <div><span style="color: #0070c1;">app</span>.<span
     style="color: #795e26;">use</span>(<span
     style="color: #795e26;">express</span>.<span
     style="color: #795e26;">static</span>(<span
     style="color: #0070c1;">www</span>))</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">wsServer</span> =</div>
  <div>&nbsp;<span style="color: #0000ff;">new</span> <span
     style="color: #267f99;">server</span>({ <span
     style="color: #001080;">httpServer</span> })</div><br>
  <div><span style="color: #795e26;">getValor</span>().</div>
  <div>&nbsp;<span style="color: #795e26;">then</span>(<span
     style="color: #001080;">valor</span> <span
     style="color: #0000ff;">=&gt;</span> {</div>
  <div>&nbsp; <span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">cons</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>()</div>
  <div>&nbsp; <span style="color: #0070c1;">wsServer</span>.<span
     style="color: #795e26;">on</span>(<span
     style="color: #a31515;">'request'</span>, <span
     style="color: #001080;">req</span> <span
     style="color: #0000ff;">=&gt;</span> {</div>
  <div>&nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">con</span> = <span
     style="color: #001080;">req</span>.</div>
  <div>&nbsp; &nbsp; <span style="color: #795e26;">accept</span>(<span
     style="color: #0000ff;">undefined</span>, <span
     style="color: #001080;">req</span>.<span
     style="color: #001080;">origin</span>)</div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">cons</span>.<span
     style="color: #795e26;">add</span>(<span
     style="color: #0070c1;">con</span>)</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Conexión."</span>)</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Envía cliente"</span>,</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">valor</span>)</div>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">con</span>.<span
     style="color: #795e26;">sendUTF</span>(<span
     style="color: #001080;">valor</span>)</div><br>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">con</span>.<span
     style="color: #795e26;">on</span>(<span
     style="color: #a31515;">"message"</span>, <span
     style="color: #0000ff;">async</span> <span
     style="color: #001080;">men</span> <span
     style="color: #0000ff;">=&gt;</span> {</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Recibe"</span>,</div>
  <div>&nbsp; &nbsp; &nbsp;<span
     style="color: #008000;">// @ts-ignore</span></div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #a31515;">"cliente"</span>, <span
     style="color: #001080;">men</span>.<span
     style="color: #001080;">utf8Data</span>)</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">valor</span> =</div>
  <div>&nbsp; &nbsp; &nbsp;<span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"0"</span> ? <span
     style="color: #a31515;">"1"</span> : <span
     style="color: #a31515;">"0"</span></div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">await</span> <span
     style="color: #795e26;">setValor</span>(<span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Envía"</span>,</div>
  <div>&nbsp; &nbsp; &nbsp;<span
     style="color: #a31515;">"clientes"</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">item</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #0070c1;">cons</span>.<span
     style="color: #795e26;">keys</span>()) {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">item</span>.<span
     style="color: #795e26;">sendUTF</span>(<span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp; &nbsp; }</div>
  <div>&nbsp; &nbsp;})</div><br>
  <div>&nbsp; &nbsp;<span style="color: #0070c1;">con</span>.<span
     style="color: #795e26;">on</span>(<span
     style="color: #a31515;">"close"</span>,</div>
  <div>&nbsp; &nbsp; (<span style="color: #001080;">razon</span>, <span
     style="color: #001080;">descripcion</span>) <span
     style="color: #0000ff;">=&gt;</span> {</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">cons</span>.<span
     style="color: #795e26;">delete</span>(<span
     style="color: #0070c1;">con</span>)</div>
  <div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Desconexión"</span>,</div>
  <div>&nbsp; &nbsp; &nbsp; <span style="color: #001080;">razon</span>, <span
     style="color: #001080;">descripcion</span>)</div>
  <div>&nbsp; &nbsp; })</div>
  <div>&nbsp; })</div>
  <div>&nbsp; <span style="color: #0070c1;">httpServer</span>.<span
     style="color: #795e26;">listen</span>(<span
     style="color: #098658;">3000</span>,</div>
  <div>&nbsp; &nbsp;() <span style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(</div>
  <div>&nbsp; &nbsp; <span style="color: #a31515;">"Escuchando puerto
    3000."</span>))</div>
  <div>&nbsp;}).</div>
  <div>&nbsp;<span style="color: #795e26;">catch</span>(<span
     style="color: #001080;">e</span> <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #001080;">e</span>))</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >L. www/index.html</h1><muestra-codigo>
 <div>
 <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
    style="color: #ff0000;">html</span><span
    style="color: #800000;">&gt;</span></div>
 <div><span style="color: #800000;">&lt;html</span> <span
    style="color: #ff0000;">lang</span>=<span
    style="color: #0000ff;">"es"</span><span
    style="color: #800000;">&gt;</span></div>
 <div><span style="color: #800000;">&lt;head&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
    style="color: #ff0000;">charset</span>=<span
    style="color: #0000ff;">"utf-8"</span><span
    style="color: #800000;">&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
    style="color: #ff0000;">name</span>=<span
    style="color: #0000ff;">"viewport"</span></div>
 <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
    style="color: #0000ff;">"width=device-width"</span><span
    style="color: #800000;">&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>IoT<span
    style="color: #800000;">&lt;/title&gt;</span></div>
 <div><span style="color: #800000;">&lt;/head&gt;</span></div>
 <div><span style="color: #800000;">&lt;body&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>IoT<span
    style="color: #800000;">&lt;/h1&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;p&gt;</span></div>
 <div>&nbsp; <span style="color: #800000;">&lt;output</span> <span
    style="color: #ff0000;">id</span>=<span
    style="color: #0000ff;">"salida"</span><span
    style="color: #800000;">&gt;&lt;/output&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;/p&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;p&gt;</span></div>
 <div>&nbsp; <span style="color: #800000;">&lt;button</span> <span
    style="color: #ff0000;">type</span>=<span
    style="color: #0000ff;">"button"</span></div>
 <div>&nbsp; &nbsp; <span style="color: #ff0000;">onclick</span>=<span
    style="color: #0000ff;">"</span><span
    style="color: #795e26;">envia</span><span
    style="color: #0000ff;">()</span><span
    style="color: #0000ff;">"</span><span style="color: #800000;">&gt;</span>
 </div>
 <div>&nbsp; &nbsp;Enviar</div>
 <div>&nbsp; <span style="color: #800000;">&lt;/button&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;/p&gt;</span></div>
 <div>&nbsp;<span style="color: #800000;">&lt;script&gt;</span></div>
 <div>&nbsp; <span style="color: #0000ff;">let</span> <span
    style="color: #001080;">valor</span> = <span
    style="color: #a31515;">""</span></div>
 <div>&nbsp; <span style="color: #0000ff;">const</span> <span
    style="color: #0070c1;">ws</span> = <span
    style="color: #0000ff;">new</span> <span
    style="color: #267f99;">WebSocket</span>(</div>
 <div>&nbsp; &nbsp;<span
    style="color: #a31515;">"wss://iot.gilbertopachec3.repl.co"</span>)</div>
 <div>&nbsp; <span style="color: #0070c1;">ws</span>.<span
    style="color: #001080;">onopen</span> =</div>
 <div>&nbsp; &nbsp;() <span style="color: #0000ff;">=&gt;</span> <span
    style="color: #001080;">console</span>.<span
    style="color: #795e26;">log</span>(<span
    style="color: #a31515;">'Conectado'</span>)</div>
 <div>&nbsp; <span style="color: #0070c1;">ws</span>.<span
    style="color: #001080;">onmessage</span> = <span
    style="color: #001080;">evt</span> <span
    style="color: #0000ff;">=&gt;</span> {</div>
 <div>&nbsp; &nbsp;<span style="color: #001080;">valor</span> = <span
    style="color: #001080;">evt</span>.<span
    style="color: #001080;">data</span></div>
 <div>&nbsp; &nbsp;<span style="color: #001080;">salida</span>.<span
    style="color: #001080;">value</span> =</div>
 <div>&nbsp; &nbsp; <span style="color: #001080;">valor</span> === <span
    style="color: #a31515;">"1"</span> ? <span
    style="color: #a31515;">"🔴"</span> : <span
    style="color: #a31515;">"⚪"</span></div>
 <div>&nbsp; }</div>
 <div>&nbsp; </div>
 <div>&nbsp; <span style="color: #0000ff;">function</span> <span
    style="color: #795e26;">envia</span>() {</div>
 <div>&nbsp; &nbsp;<span style="color: #0070c1;">ws</span>.<span
    style="color: #795e26;">send</span>(<span
    style="color: #001080;">valor</span>)</div>
 <div>&nbsp; }</div>
 <div>&nbsp;<span style="color: #800000;">&lt;/script&gt;</span></div>
 <div><span style="color: #800000;">&lt;/body&gt;</span></div>
 <div><span style="color: #800000;">&lt;/html&gt;</span></div>
</div>
 </muestra-codigo>
      </section>
     <section >
         <h1 >M. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>En esta lección se presento el proyecto base para IoT.</p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">9. Renderizado del lado del servidor</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan programas para el NODE MCU ESP8266.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m09renderServidor/mAblink.html">Blink.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m09renderServidor/mBbutton.html">Button.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m09renderServidor/mCdispositivo.html">Dispositivo.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m09renderServidor/mDresumen.html">Resumen</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Blink.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Blink.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p>
  Para empezar a programar, revisa que al conectar tu dispositivo ESP8266,
  Arduino IDE lo reconozca y tenga habilitado el menú
  <q>Herramientas > Puerto</q>;
  si no es así, tienes que revisar que el driver para Windows esté bien
  cargado.
 </p>
 <p>
  <a href="https://drive.google.com/file/d/1dXv5jirpTN09kPwgxMthgKtV-fc2YOU0/view?usp=sharing"
    target="_blank" rel="nooper">Revisa que el driver para Windows esté bien
   cargado.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1buuaEpXd02E8eeHhDwzxcC4sZsvcVV5A/view?usp=sharing"
    target="_blank" rel="nooper">Ve como capturar y ejecutar un ejemplo parecido
   a este.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1yqVaTYYt8BxQLhvmZW2bwdiTkqxPQKcB/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;programa&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;ESP8266&nbsp;Blink&nbsp;by&nbsp;Simon&nbsp;Peter&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/**&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca&nbsp;una&nbsp;sola</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;vez&nbsp;al&nbsp;inicio&nbsp;del&nbsp;programa.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Todas&nbsp;las&nbsp;placas&nbsp;compatibles</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;con&nbsp;Arduino&nbsp;incluyen&nbsp;un&nbsp;led</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;de&nbsp;prueba&nbsp;ligado&nbsp;a&nbsp;un&nbsp;pin</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cuyo&nbsp;número&nbsp;está&nbsp;definido&nbsp;por</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;la&nbsp;constante&nbsp;LED_BUILTIN.</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;repetidamente&nbsp;mientras&nbsp;el</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;programa&nbsp;esté&nbsp;activo.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN&nbsp;(LOW</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;es&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje).&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);<span
     style="color: #008000;">&nbsp;//&nbsp;Espera&nbsp;1&nbsp;segundo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN&nbsp;haciendo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;que&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje&nbsp;sea</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HIGH.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >B. Button.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Button.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1dFU-A3HvWAyTSyquOT1C2N5b6dUyQywq/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de&nbsp;Button</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;por&nbsp;DojoDave&nbsp;y&nbsp;Tom&nbsp;Igoe&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Pin&nbsp;para&nbsp;el&nbsp;botón.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">BOTON</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Initializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BOTON&nbsp;como&nbsp;entrada.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>,&nbsp;<span
     style="color: #0000ff;">INPUT</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Checa&nbsp;si&nbsp;el&nbsp;botón&nbsp;está</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;presionado.&nbsp;Esto&nbsp;es,&nbsp;si</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estadoDelBotón&nbsp;es&nbsp;LOW:&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">if</span>&nbsp;(<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;==&nbsp;<span
     style="color: #0000ff;">LOW</span>)&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;}&nbsp;<span style="color: #af00db;">else</span>&nbsp;{
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>}</div><br>
 </div>
      </section>
     <section >
         <h1 >C. Dispositivo.ino</h1><figure>
 <img src="/img/m06esp8266/dispositivo.gif" alt="Video del dispositivo">
 <figcaption>
  Implementación del ejemplo de IoT con web sockets en Arduino IDE.
 </figcaption>
</figure>
<div class="lectura">
 <ul>
  <li>
   <p>
    En el siguiente código, sustituye la configuración por los datos de
    tu red WiFi. La URL y la huella digital deben correspponder a tu
    proyecto de IoT.
   </p>
  </li>
  <li>
   <p>Las siguientes instrucciones son para obtener la huella digital:</p>
   <ol>
    <li>
     <p>
      Usa Chrome para abrir la URL del código de la lección IoT. En este caso
      es
      <a href="https://iot.gilbertopachec3.repl.co/" rel="nooper"
        target="_blank">https://iot.gilbertopachec3.repl.co/</a>.
     </p>
    </li>
    <li>
     <p>
      Haz clic en el candadito que está junto a la URL. Se abre un menú
      contextual.
     </p>
    </li>
    <li>
     <p>
      Haz clic en donde dice <q>Certificado (válido)</q>. Aparece
      un cuadro de diálogo. Observa hasta cuando puedes usar esta
      información. Despues de la fecha indicada, debes actualizar tu
      código.
     </p>
    </li>
    <li>
     <p>
      Selecciona la pestaña <q>Detalles</q>. Haz scroll hasta que
      aparezca la <q>Huella digital</q>. Haz clic en esta propiedad
      y abajo se muestra su valor. Copia y pega este valor a tu
      código.
     </p>
    </li>
   </ol>
  </li>
  <li>
   <p>
    Para monitorear su funcionamiento, debes hacer clic en el botón de
    arriba a la derecha en la ventana de Arduino, que tiene una lupa y
    tiene el mensaje flotante que dice <strong>Monitor Serie</strong>.
    Debes ajustar los baudios a la misma velocidad que en el código,
    donde dice
    <code class="language-cpp">Serial.begin(115200);</code>
    que en este caso es 115200 baudios. Si no se ven los mensajes,
    baja la velocidad tanto en el código, como en el monitor.
   </p>
  </li>
  <li class="noPrint">
   <p class="noPrint">
    <a href="https://drive.google.com/file/d/1az-Brq31wdorrqchkezANCuzRm9XNg_7/view?usp=sharing"
      target="_blank" rel="nooper">Ve como configurar y ejecutar este ejemplo.</a>
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFi.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFiMulti.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ArduinoWebsockets.h&gt;</span></div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">SSID</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">PASS</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">HUELLA_DIGITAL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"*************"</span>;
  </div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">URL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"wss://iot.gilbertopachec3.repl.co/"</span>;</div>
  <br>
  <div><span style="color: #af00db;">using</span> <span
     style="color: #0000ff;">namespace</span> <span
     style="color: #267f99;">websockets</span>;</div>
  <div>ESP8266WiFiMulti <span style="color: #001080;">WiFiMulti</span>;</div>
  <div>WebsocketsClient &nbsp;<span style="color: #001080;">client</span>;
  </div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">BOTON</span> = <span
     style="color: #098658;">0</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">presionado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">String</span> <span
     style="color: #001080;">valor</span>;</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onMessageCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsMessage</span> <span
     style="color: #001080;">message</span>) {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span style="color: #a31515;">"Recibe
    "</span>);</div>
  <div>&nbsp;<span style="color: #001080;">valor</span> = <span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">digitalWrite</span>(LED_BUILTIN,
  </div>
  <div>&nbsp; <span style="color: #001080;">valor</span> == <span
     style="color: #a31515;">"1"</span> ? LOW : HIGH);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>());</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onEventsCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsEvent</span> <span
     style="color: #001080;">event</span>,</div>
  <div>&nbsp; <span style="color: #267f99;">String</span> <span
     style="color: #001080;">data</span>) {</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionOpened) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">true</span>;</div>
  <div>&nbsp;} <span style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionClosed) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Desconectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">setup</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">begin</span>(<span
     style="color: #098658;">115200</span>);</div>
  <div><span style="color: #008000;">&nbsp;//
    Serial.setDebugOutput(true);</span></div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(LED_BUILTIN, OUTPUT);
  </div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>, INPUT);</div>
  <div>&nbsp;<span style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">uint8_t</span> <span
     style="color: #001080;">t</span> = <span style="color: #098658;">4</span>;
   <span style="color: #001080;">t</span> &gt; <span
     style="color: #098658;">0</span>;
  </div>
  <div>&nbsp; <span style="color: #001080;">t</span>--) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">printf</span>(</div>
  <div>&nbsp; &nbsp;<span style="color: #a31515;">"ESPERANDO </span><span
     style="color: #001080;">%d</span><span
     style="color: #a31515;">...</span><span
     style="color: #ee0000;">\n</span><span style="color: #a31515;">"</span>,
   <span style="color: #001080;">t</span>);
  </div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">flush</span>();</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(</div>
  <div>&nbsp; <span style="color: #a31515;">"Conectando WiFi..."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">WiFi</span>.<span
     style="color: #795e26;">mode</span>(WIFI_STA);</div>
  <div>&nbsp;<span style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">addAP</span>(<span
     style="color: #001080;">SSID</span>, <span
     style="color: #001080;">PASS</span>);</div>
  <div>&nbsp;<span style="color: #af00db;">while</span> (<span
     style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">run</span>() !=</div>
  <div>&nbsp; &nbsp;WL_CONNECTED) {</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span style="color: #a31515;">"WiFi
    conectado."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">onMessage</span>(<span
     style="color: #795e26;">onMessageCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">onEvent</span>(<span
     style="color: #795e26;">onEventsCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">setFingerprint</span>(<span
     style="color: #001080;">HUELLA_DIGITAL</span>);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectando WS."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">connect</span>(<span
     style="color: #001080;">URL</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">loop</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">poll</span>();</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">conectado</span>) {</div>
  <div>&nbsp; <span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">actual</span> = <span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (!<span
     style="color: #001080;">presionado</span> &amp;&amp;</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">actual</span> == LOW) {
  </div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span
     style="color: #a31515;">"Envía"</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; }</div>
  <div>&nbsp; <span style="color: #001080;">presionado</span> = (<span
     style="color: #001080;">actual</span> == LOW);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentaron los siguientes archivos:
   </p>
   <ul>
    <li>
     <p>Blinkt.ino</p>
    </li>
    <li>
     <p>Button.ino</p>
    </li>
    <li>
     <p>Dispositivo.ino</p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">10. Bases de datos</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan programas para el NODE MCU ESP8266.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m10bd/mAblink.html">Blink.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m10bd/mBbutton.html">Button.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m10bd/mCdispositivo.html">Dispositivo.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m10bd/mDresumen.html">Resumen</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Blink.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Blink.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p>
  Para empezar a programar, revisa que al conectar tu dispositivo ESP8266,
  Arduino IDE lo reconozca y tenga habilitado el menú
  <q>Herramientas > Puerto</q>;
  si no es así, tienes que revisar que el driver para Windows esté bien
  cargado.
 </p>
 <p>
  <a href="https://drive.google.com/file/d/1dXv5jirpTN09kPwgxMthgKtV-fc2YOU0/view?usp=sharing"
    target="_blank" rel="nooper">Revisa que el driver para Windows esté bien
   cargado.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1buuaEpXd02E8eeHhDwzxcC4sZsvcVV5A/view?usp=sharing"
    target="_blank" rel="nooper">Ve como capturar y ejecutar un ejemplo parecido
   a este.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1yqVaTYYt8BxQLhvmZW2bwdiTkqxPQKcB/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;programa&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;ESP8266&nbsp;Blink&nbsp;by&nbsp;Simon&nbsp;Peter&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/**&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca&nbsp;una&nbsp;sola</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;vez&nbsp;al&nbsp;inicio&nbsp;del&nbsp;programa.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Todas&nbsp;las&nbsp;placas&nbsp;compatibles</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;con&nbsp;Arduino&nbsp;incluyen&nbsp;un&nbsp;led</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;de&nbsp;prueba&nbsp;ligado&nbsp;a&nbsp;un&nbsp;pin</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cuyo&nbsp;número&nbsp;está&nbsp;definido&nbsp;por</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;la&nbsp;constante&nbsp;LED_BUILTIN.</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;repetidamente&nbsp;mientras&nbsp;el</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;programa&nbsp;esté&nbsp;activo.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN&nbsp;(LOW</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;es&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje).&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);<span
     style="color: #008000;">&nbsp;//&nbsp;Espera&nbsp;1&nbsp;segundo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN&nbsp;haciendo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;que&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje&nbsp;sea</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HIGH.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >B. Button.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Button.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1dFU-A3HvWAyTSyquOT1C2N5b6dUyQywq/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de&nbsp;Button</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;por&nbsp;DojoDave&nbsp;y&nbsp;Tom&nbsp;Igoe&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Pin&nbsp;para&nbsp;el&nbsp;botón.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">BOTON</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Initializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BOTON&nbsp;como&nbsp;entrada.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>,&nbsp;<span
     style="color: #0000ff;">INPUT</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Checa&nbsp;si&nbsp;el&nbsp;botón&nbsp;está</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;presionado.&nbsp;Esto&nbsp;es,&nbsp;si</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estadoDelBotón&nbsp;es&nbsp;LOW:&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">if</span>&nbsp;(<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;==&nbsp;<span
     style="color: #0000ff;">LOW</span>)&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;}&nbsp;<span style="color: #af00db;">else</span>&nbsp;{
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>}</div><br>
 </div>
      </section>
     <section >
         <h1 >C. Dispositivo.ino</h1><figure>
 <img src="/img/m06esp8266/dispositivo.gif" alt="Video del dispositivo">
 <figcaption>
  Implementación del ejemplo de IoT con web sockets en Arduino IDE.
 </figcaption>
</figure>
<div class="lectura">
 <ul>
  <li>
   <p>
    En el siguiente código, sustituye la configuración por los datos de
    tu red WiFi. La URL y la huella digital deben correspponder a tu
    proyecto de IoT.
   </p>
  </li>
  <li>
   <p>Las siguientes instrucciones son para obtener la huella digital:</p>
   <ol>
    <li>
     <p>
      Usa Chrome para abrir la URL del código de la lección IoT. En este caso
      es
      <a href="https://iot.gilbertopachec3.repl.co/" rel="nooper"
        target="_blank">https://iot.gilbertopachec3.repl.co/</a>.
     </p>
    </li>
    <li>
     <p>
      Haz clic en el candadito que está junto a la URL. Se abre un menú
      contextual.
     </p>
    </li>
    <li>
     <p>
      Haz clic en donde dice <q>Certificado (válido)</q>. Aparece
      un cuadro de diálogo. Observa hasta cuando puedes usar esta
      información. Despues de la fecha indicada, debes actualizar tu
      código.
     </p>
    </li>
    <li>
     <p>
      Selecciona la pestaña <q>Detalles</q>. Haz scroll hasta que
      aparezca la <q>Huella digital</q>. Haz clic en esta propiedad
      y abajo se muestra su valor. Copia y pega este valor a tu
      código.
     </p>
    </li>
   </ol>
  </li>
  <li>
   <p>
    Para monitorear su funcionamiento, debes hacer clic en el botón de
    arriba a la derecha en la ventana de Arduino, que tiene una lupa y
    tiene el mensaje flotante que dice <strong>Monitor Serie</strong>.
    Debes ajustar los baudios a la misma velocidad que en el código,
    donde dice
    <code class="language-cpp">Serial.begin(115200);</code>
    que en este caso es 115200 baudios. Si no se ven los mensajes,
    baja la velocidad tanto en el código, como en el monitor.
   </p>
  </li>
  <li class="noPrint">
   <p class="noPrint">
    <a href="https://drive.google.com/file/d/1az-Brq31wdorrqchkezANCuzRm9XNg_7/view?usp=sharing"
      target="_blank" rel="nooper">Ve como configurar y ejecutar este ejemplo.</a>
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFi.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFiMulti.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ArduinoWebsockets.h&gt;</span></div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">SSID</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">PASS</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">HUELLA_DIGITAL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"*************"</span>;
  </div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">URL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"wss://iot.gilbertopachec3.repl.co/"</span>;</div>
  <br>
  <div><span style="color: #af00db;">using</span> <span
     style="color: #0000ff;">namespace</span> <span
     style="color: #267f99;">websockets</span>;</div>
  <div>ESP8266WiFiMulti <span style="color: #001080;">WiFiMulti</span>;</div>
  <div>WebsocketsClient &nbsp;<span style="color: #001080;">client</span>;
  </div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">BOTON</span> = <span
     style="color: #098658;">0</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">presionado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">String</span> <span
     style="color: #001080;">valor</span>;</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onMessageCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsMessage</span> <span
     style="color: #001080;">message</span>) {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span style="color: #a31515;">"Recibe
    "</span>);</div>
  <div>&nbsp;<span style="color: #001080;">valor</span> = <span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">digitalWrite</span>(LED_BUILTIN,
  </div>
  <div>&nbsp; <span style="color: #001080;">valor</span> == <span
     style="color: #a31515;">"1"</span> ? LOW : HIGH);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>());</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onEventsCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsEvent</span> <span
     style="color: #001080;">event</span>,</div>
  <div>&nbsp; <span style="color: #267f99;">String</span> <span
     style="color: #001080;">data</span>) {</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionOpened) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">true</span>;</div>
  <div>&nbsp;} <span style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionClosed) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Desconectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">setup</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">begin</span>(<span
     style="color: #098658;">115200</span>);</div>
  <div><span style="color: #008000;">&nbsp;//
    Serial.setDebugOutput(true);</span></div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(LED_BUILTIN, OUTPUT);
  </div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>, INPUT);</div>
  <div>&nbsp;<span style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">uint8_t</span> <span
     style="color: #001080;">t</span> = <span style="color: #098658;">4</span>;
   <span style="color: #001080;">t</span> &gt; <span
     style="color: #098658;">0</span>;
  </div>
  <div>&nbsp; <span style="color: #001080;">t</span>--) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">printf</span>(</div>
  <div>&nbsp; &nbsp;<span style="color: #a31515;">"ESPERANDO </span><span
     style="color: #001080;">%d</span><span
     style="color: #a31515;">...</span><span
     style="color: #ee0000;">\n</span><span style="color: #a31515;">"</span>,
   <span style="color: #001080;">t</span>);
  </div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">flush</span>();</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(</div>
  <div>&nbsp; <span style="color: #a31515;">"Conectando WiFi..."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">WiFi</span>.<span
     style="color: #795e26;">mode</span>(WIFI_STA);</div>
  <div>&nbsp;<span style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">addAP</span>(<span
     style="color: #001080;">SSID</span>, <span
     style="color: #001080;">PASS</span>);</div>
  <div>&nbsp;<span style="color: #af00db;">while</span> (<span
     style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">run</span>() !=</div>
  <div>&nbsp; &nbsp;WL_CONNECTED) {</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span style="color: #a31515;">"WiFi
    conectado."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">onMessage</span>(<span
     style="color: #795e26;">onMessageCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">onEvent</span>(<span
     style="color: #795e26;">onEventsCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">setFingerprint</span>(<span
     style="color: #001080;">HUELLA_DIGITAL</span>);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectando WS."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">connect</span>(<span
     style="color: #001080;">URL</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">loop</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">poll</span>();</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">conectado</span>) {</div>
  <div>&nbsp; <span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">actual</span> = <span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (!<span
     style="color: #001080;">presionado</span> &amp;&amp;</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">actual</span> == LOW) {
  </div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span
     style="color: #a31515;">"Envía"</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; }</div>
  <div>&nbsp; <span style="color: #001080;">presionado</span> = (<span
     style="color: #001080;">actual</span> == LOW);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentaron los siguientes archivos:
   </p>
   <ul>
    <li>
     <p>Blinkt.ino</p>
    </li>
    <li>
     <p>Button.ino</p>
    </li>
    <li>
     <p>Dispositivo.ino</p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 class="leccion">11. Protocolos de comunicación</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p>
  En esta lección se presentan programas para el NODE MCU ESP8266.
 </p>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    <li>
     <p>
      <a href="/m11ws/mAblink.html">Blink.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m11ws/mBbutton.html">Button.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m11ws/mCdispositivo.html">Dispositivo.ino</a>
     </p>
    </li>
    <li>
     <p>
      <a href="/m11ws/mDresumen.html">Resumen</a>
     </p>
    </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Blink.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Blink.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p>
  Para empezar a programar, revisa que al conectar tu dispositivo ESP8266,
  Arduino IDE lo reconozca y tenga habilitado el menú
  <q>Herramientas > Puerto</q>;
  si no es así, tienes que revisar que el driver para Windows esté bien
  cargado.
 </p>
 <p>
  <a href="https://drive.google.com/file/d/1dXv5jirpTN09kPwgxMthgKtV-fc2YOU0/view?usp=sharing"
    target="_blank" rel="nooper">Revisa que el driver para Windows esté bien
   cargado.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1buuaEpXd02E8eeHhDwzxcC4sZsvcVV5A/view?usp=sharing"
    target="_blank" rel="nooper">Ve como capturar y ejecutar un ejemplo parecido
   a este.</a>
 </p>
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1yqVaTYYt8BxQLhvmZW2bwdiTkqxPQKcB/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;programa&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;ESP8266&nbsp;Blink&nbsp;by&nbsp;Simon&nbsp;Peter&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/**&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca&nbsp;una&nbsp;sola</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;vez&nbsp;al&nbsp;inicio&nbsp;del&nbsp;programa.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Todas&nbsp;las&nbsp;placas&nbsp;compatibles</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;con&nbsp;Arduino&nbsp;incluyen&nbsp;un&nbsp;led</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;de&nbsp;prueba&nbsp;ligado&nbsp;a&nbsp;un&nbsp;pin</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cuyo&nbsp;número&nbsp;está&nbsp;definido&nbsp;por</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;la&nbsp;constante&nbsp;LED_BUILTIN.</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Función&nbsp;que&nbsp;se&nbsp;invoca</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;repetidamente&nbsp;mientras&nbsp;el</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;programa&nbsp;esté&nbsp;activo.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN&nbsp;(LOW</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;es&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje).&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);<span
     style="color: #008000;">&nbsp;//&nbsp;Espera&nbsp;1&nbsp;segundo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN&nbsp;haciendo</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;que&nbsp;el&nbsp;nivel&nbsp;de&nbsp;voltaje&nbsp;sea</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HIGH.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >B. Button.ino</h1><figure>
 <img src="/img/m06esp8266/Video-Button.gif" alt="Video de la placa">
</figure>
<div class="lectura">
 <p class="noPrint">
  <a href="https://drive.google.com/file/d/1dFU-A3HvWAyTSyquOT1C2N5b6dUyQywq/view?usp=sharing"
    target="_blank" rel="nooper">Ve como desplegar este ejemplo en Tinkercad y
   compartirlo.</a>
 </p>
</div>
<muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Este&nbsp;es&nbsp;un&nbsp;derivado&nbsp;de&nbsp;Button</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;por&nbsp;DojoDave&nbsp;y&nbsp;Tom&nbsp;Igoe&nbsp;*/</span>
  </div><br>
  <div><span
     style="color: #008000;">/*&nbsp;Pin&nbsp;para&nbsp;el&nbsp;botón.&nbsp;*/</span>
  </div>
  <div><span style="color: #0000ff;">const</span>&nbsp;<span
     style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">BOTON</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">int</span>&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=&nbsp;<span
     style="color: #098658;">0</span>;</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">setup</span>()&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Inicializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LED_BUILTIN&nbsp;como&nbsp;salida.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,&nbsp;<span
     style="color: #0000ff;">OUTPUT</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Initializa&nbsp;el&nbsp;pin&nbsp;para</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BOTON&nbsp;como&nbsp;entrada.&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>,&nbsp;<span
     style="color: #0000ff;">INPUT</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span>&nbsp;<span
     style="color: #795e26;">loop</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;=</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;/*&nbsp;Checa&nbsp;si&nbsp;el&nbsp;botón&nbsp;está</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;presionado.&nbsp;Esto&nbsp;es,&nbsp;si</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estadoDelBotón&nbsp;es&nbsp;LOW:&nbsp;*/</span>
  </div>
  <div>&nbsp;&nbsp;<span style="color: #af00db;">if</span>&nbsp;(<span
     style="color: #001080;">estadoDelBoton</span>&nbsp;==&nbsp;<span
     style="color: #0000ff;">LOW</span>)&nbsp;{</div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Enciende&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">LOW</span>);</div>
  <div>&nbsp;&nbsp;}&nbsp;<span style="color: #af00db;">else</span>&nbsp;{
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Apaga&nbsp;el&nbsp;LED_BUILTIN.</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">digitalWrite</span>(<span
     style="color: #0000ff;">LED_BUILTIN</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">HIGH</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>}</div><br>
 </div>
      </section>
     <section >
         <h1 >C. Dispositivo.ino</h1><figure>
 <img src="/img/m06esp8266/dispositivo.gif" alt="Video del dispositivo">
 <figcaption>
  Implementación del ejemplo de IoT con web sockets en Arduino IDE.
 </figcaption>
</figure>
<div class="lectura">
 <ul>
  <li>
   <p>
    En el siguiente código, sustituye la configuración por los datos de
    tu red WiFi. La URL y la huella digital deben correspponder a tu
    proyecto de IoT.
   </p>
  </li>
  <li>
   <p>Las siguientes instrucciones son para obtener la huella digital:</p>
   <ol>
    <li>
     <p>
      Usa Chrome para abrir la URL del código de la lección IoT. En este caso
      es
      <a href="https://iot.gilbertopachec3.repl.co/" rel="nooper"
        target="_blank">https://iot.gilbertopachec3.repl.co/</a>.
     </p>
    </li>
    <li>
     <p>
      Haz clic en el candadito que está junto a la URL. Se abre un menú
      contextual.
     </p>
    </li>
    <li>
     <p>
      Haz clic en donde dice <q>Certificado (válido)</q>. Aparece
      un cuadro de diálogo. Observa hasta cuando puedes usar esta
      información. Despues de la fecha indicada, debes actualizar tu
      código.
     </p>
    </li>
    <li>
     <p>
      Selecciona la pestaña <q>Detalles</q>. Haz scroll hasta que
      aparezca la <q>Huella digital</q>. Haz clic en esta propiedad
      y abajo se muestra su valor. Copia y pega este valor a tu
      código.
     </p>
    </li>
   </ol>
  </li>
  <li>
   <p>
    Para monitorear su funcionamiento, debes hacer clic en el botón de
    arriba a la derecha en la ventana de Arduino, que tiene una lupa y
    tiene el mensaje flotante que dice <strong>Monitor Serie</strong>.
    Debes ajustar los baudios a la misma velocidad que en el código,
    donde dice
    <code class="language-cpp">Serial.begin(115200);</code>
    que en este caso es 115200 baudios. Si no se ven los mensajes,
    baja la velocidad tanto en el código, como en el monitor.
   </p>
  </li>
  <li class="noPrint">
   <p class="noPrint">
    <a href="https://drive.google.com/file/d/1az-Brq31wdorrqchkezANCuzRm9XNg_7/view?usp=sharing"
      target="_blank" rel="nooper">Ve como configurar y ejecutar este ejemplo.</a>
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFi.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ESP8266WiFiMulti.h&gt;</span></div>
  <div><span style="color: #af00db;">#include</span><span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">&lt;ArduinoWebsockets.h&gt;</span></div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">SSID</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">PASS</span> =</div>
  <div>&nbsp;<span style="color: #a31515;">"*******"</span>;</div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">HUELLA_DIGITAL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"*************"</span>;
  </div>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">char</span>* <span
     style="color: #0000ff;">const</span> <span
     style="color: #001080;">URL</span> =</div>
  <div>&nbsp;<span
     style="color: #a31515;">"wss://iot.gilbertopachec3.repl.co/"</span>;</div>
  <br>
  <div><span style="color: #af00db;">using</span> <span
     style="color: #0000ff;">namespace</span> <span
     style="color: #267f99;">websockets</span>;</div>
  <div>ESP8266WiFiMulti <span style="color: #001080;">WiFiMulti</span>;</div>
  <div>WebsocketsClient &nbsp;<span style="color: #001080;">client</span>;
  </div><br>
  <div><span style="color: #0000ff;">const</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">BOTON</span> = <span
     style="color: #098658;">0</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">presionado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div><span style="color: #0000ff;">String</span> <span
     style="color: #001080;">valor</span>;</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onMessageCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsMessage</span> <span
     style="color: #001080;">message</span>) {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span style="color: #a31515;">"Recibe
    "</span>);</div>
  <div>&nbsp;<span style="color: #001080;">valor</span> = <span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">digitalWrite</span>(LED_BUILTIN,
  </div>
  <div>&nbsp; <span style="color: #001080;">valor</span> == <span
     style="color: #a31515;">"1"</span> ? LOW : HIGH);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">message</span>.<span
     style="color: #795e26;">data</span>());</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">onEventsCallback</span>(</div>
  <div>&nbsp; <span style="color: #267f99;">WebsocketsEvent</span> <span
     style="color: #001080;">event</span>,</div>
  <div>&nbsp; <span style="color: #267f99;">String</span> <span
     style="color: #001080;">data</span>) {</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionOpened) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">true</span>;</div>
  <div>&nbsp;} <span style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">event</span> ==</div>
  <div>&nbsp; &nbsp;<span
     style="color: #267f99;">WebsocketsEvent</span>::ConnectionClosed) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Desconectado."</span>);</div>
  <div>&nbsp; <span style="color: #001080;">conectado</span> = <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">setup</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">begin</span>(<span
     style="color: #098658;">115200</span>);</div>
  <div><span style="color: #008000;">&nbsp;//
    Serial.setDebugOutput(true);</span></div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>();</div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(LED_BUILTIN, OUTPUT);
  </div>
  <div>&nbsp;<span style="color: #795e26;">pinMode</span>(<span
     style="color: #001080;">BOTON</span>, INPUT);</div>
  <div>&nbsp;<span style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">uint8_t</span> <span
     style="color: #001080;">t</span> = <span style="color: #098658;">4</span>;
   <span style="color: #001080;">t</span> &gt; <span
     style="color: #098658;">0</span>;
  </div>
  <div>&nbsp; <span style="color: #001080;">t</span>--) {</div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">printf</span>(</div>
  <div>&nbsp; &nbsp;<span style="color: #a31515;">"ESPERANDO </span><span
     style="color: #001080;">%d</span><span
     style="color: #a31515;">...</span><span
     style="color: #ee0000;">\n</span><span style="color: #a31515;">"</span>,
   <span style="color: #001080;">t</span>);
  </div>
  <div>&nbsp; <span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">flush</span>();</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">1000</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(</div>
  <div>&nbsp; <span style="color: #a31515;">"Conectando WiFi..."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">WiFi</span>.<span
     style="color: #795e26;">mode</span>(WIFI_STA);</div>
  <div>&nbsp;<span style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">addAP</span>(<span
     style="color: #001080;">SSID</span>, <span
     style="color: #001080;">PASS</span>);</div>
  <div>&nbsp;<span style="color: #af00db;">while</span> (<span
     style="color: #001080;">WiFiMulti</span>.<span
     style="color: #795e26;">run</span>() !=</div>
  <div>&nbsp; &nbsp;WL_CONNECTED) {</div>
  <div>&nbsp; <span style="color: #795e26;">delay</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span style="color: #a31515;">"WiFi
    conectado."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">onMessage</span>(<span
     style="color: #795e26;">onMessageCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">onEvent</span>(<span
     style="color: #795e26;">onEventsCallback</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.</div>
  <div>&nbsp; &nbsp;<span style="color: #795e26;">setFingerprint</span>(<span
     style="color: #001080;">HUELLA_DIGITAL</span>);</div>
  <div>&nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #a31515;">"Conectando WS."</span>);</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">connect</span>(<span
     style="color: #001080;">URL</span>);</div>
  <div>}</div><br>
  <div><span style="color: #0000ff;">void</span> <span
     style="color: #795e26;">loop</span>() {</div>
  <div>&nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">poll</span>();</div>
  <div>&nbsp;<span style="color: #af00db;">if</span> (<span
     style="color: #001080;">conectado</span>) {</div>
  <div>&nbsp; <span style="color: #0000ff;">bool</span> <span
     style="color: #001080;">actual</span> = <span
     style="color: #795e26;">digitalRead</span>(<span
     style="color: #001080;">BOTON</span>);</div>
  <div>&nbsp; <span style="color: #af00db;">if</span> (!<span
     style="color: #001080;">presionado</span> &amp;&amp;</div>
  <div>&nbsp; &nbsp; <span style="color: #001080;">actual</span> == LOW) {
  </div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">client</span>.<span
     style="color: #795e26;">send</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">print</span>(<span
     style="color: #a31515;">"Envía"</span>);</div>
  <div>&nbsp; &nbsp;<span style="color: #001080;">Serial</span>.<span
     style="color: #795e26;">println</span>(<span
     style="color: #001080;">valor</span>);</div>
  <div>&nbsp; }</div>
  <div>&nbsp; <span style="color: #001080;">presionado</span> = (<span
     style="color: #001080;">actual</span> == LOW);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentaron los siguientes archivos:
   </p>
   <ul>
    <li>
     <p>Blinkt.ino</p>
    </li>
    <li>
     <p>Button.ino</p>
    </li>
    <li>
     <p>Dispositivo.ino</p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section >
         <h1 >12. Ejemplo de streaming</h1><iframe src="/src/m12streaming/youtube.html" height="415"></iframe>
<p class="noPrint">
 <a href="/src/m12streaming/youtube.html" target="_blank" rel="nooper">Ábrelo
  en otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>YouTube<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>YouTube<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span> <span
     style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"560"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"315"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.youtube.com/embed/DiItGE3eAyQ"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allow</span>=<span
     style="color: #0000ff;">"accelerometer; autoplay; encrypted-media;
    gyroscope; picture-in-picture"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allowfullscreen</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
</body>
</html>