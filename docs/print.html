<!DOCTYPE html>
<html lang="es">

<head>
 <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" sizes="32x32" href="/favicon.ico">
<meta name="theme-color" content="#039623">
<link rel="manifest" href="/site.webmanifest">
<script src="/lib/js/muestra-codigo.js"></script>
 <title>Aplicaciones web orientadas a servicios y mashups - GilPG AWOAS</title>
 <meta name="description" content="Página para imprimir todo el contenido de GilPG AWOAS, que introduce conceptos de desarrollo multiplataforma.">
 <style>
 :root {
  --padTop: 2rem;
  --introDuracion: 2s;
  --introFuncion: ease-out;
  --padCont: 0.5rem;
  --padNav: 0.75rem 0.5rem;
  --anchoNav: 300px;
  --anchoLectura: 900px;
  --colLetra: black;
  --colFondo: white;
  --colFondoPush: transparent;
  --colFondoPushHover: #ee82ee11;
  --colFondoPushFocus: #ee82ee33;
  --colFondoPushActive: #ee82ee77;
  --paddingPush: 0.2rem 0.3rem;
  --borderPush: solid thin;
  --borderRadiusPush: 0.6em;
  --colTituloLetra: #00811c;
  --colA: violet;
  --colAActive: red;
  --colTituloShadow: 3px 1px 2px #bdbdbd;
  --colTituloStrong: #684601;
  --colTituloStrongSel: #ffdc97;
  --colTarget: #cef4ff;
  --colSombra: #49494980;
  --navSombra: 0.5rem 0 0.5rem var(--colSombra);
  --colFondoNav: #f2f2f2;
  --colNavResaltada: #7a2c99;
  --colSecundario: #ffff82;
  --colStack1: black;
  --colStack2: #224ba5;
  --colStack3: #92731f;
  --colScrollbar: #CFD8DC;
  --colThumb: #90a4ae;
  --colThumbActivo: #3f3f3f;
  --colResaltado: rgb(255, 255, 89);
  --colResaltado2: rgb(255, 214, 139);
  --colResaltado3: rgb(235, 234, 233);
  --colLetraResaltado: black;
  --colLetraCodeComment: green;
  --colLetraCodeString: red;
  --colLetraCodeReserved: blue;
  --anchoThumb: 7px;
  --borderRadiusThumb: 3.5px;
  --gap: 0.5rem;
  --fontMono: monospace;
  --fontSans: sans-serif;
  --fontSerif: serif;
  font-family: var(--fontSerif);
  color: var(--colLetra);
  background-color: var(--colFondo);
  scrollbar-width: thin;
  scrollbar-color: var(--colThumb) var(--colScrollbar);
 }

 @media (prefers-color-scheme: light) {
  :root {
   --colLetra: black;
   --colFondo: white;
  }
 }

 @media (prefers-color-scheme: dark) {
  :root {
   --colLetra: white;
   --colFondo: #272727;
   --colA: cyan;
   --colSombra: #00000080;
   --colTituloLetra: #21ef4e;
   --colTituloShadow: 3px 1px 2px black;
   --colFondoNav: black;
   --colNavResaltada: #efbff3;
   --colScrollbar: #616161;
   --colThumb: #ffffff;
   --colAActive: red;
   --colResaltado: rgb(77, 77, 1);
   --colResaltado2: rgb(78, 52, 4);
   --colResaltado3: rgb(69, 69, 69);
   --colLetraResaltado: white;
   --colLetraCodeComment: rgb(109, 168, 109);
   --colLetraCodeString: rgb(255, 152, 152);
   --colLetraCodeReserved: rgb(149, 149, 238);
  }
 }

 @font-face {
  font-family: 'Material Symbols Outlined';
  font-style: normal;
  src:
   url(/fonts/MaterialSymbolsOutlined[FILL\,GRAD\,opsz\,wght].woff2) format('woff2'),
   url(/fonts/MaterialSymbolsOutlined[FILL\,GRAD\,opsz\,wght].ttf) format('truetype');
 }

 .material-symbols-outlined {
  font-family: 'Material Symbols Outlined';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  width: 24px;
  height: 24px;
  /* Preferred icon size */
  display: inline-block;
  line-height: 1;
  text-transform: none;
  letter-spacing: normal;
  word-wrap: normal;
  white-space: nowrap;
  direction: ltr;
 }

 body::-webkit-scrollbar {
  width: var(--anchoThumb);
  height: var(--anchoThumb);
 }

 body::-webkit-scrollbar-track {
  background: var(--colScrollbar);
 }

 body::-webkit-scrollbar-thumb {
  background-color: var(--colThumb);
  border-radius: var(--borderRadiusThumb);
 }

 body::-webkit-scrollbar-thumb:active {
  background-color: var(--colThumbActivo);
 }

 a {
  color: var(--colNavResaltada);
 }

 a:visited {
  color: var(--colA);
 }

 a:active {
  color: var(--colAActive);
 }

 .anterior,
 .siguiente,
 .paginaAnterior,
 .paginaSiguiente,
 button {
  display: inline-block;
  padding: var(--paddingPush);
  border: var(--borderPush);
  border-radius: var(--borderRadiusPush);
  color: var(--colLetra);
  background-color: var(--colFondoPush);
  text-align: center;
  text-decoration: none;
 }

 .anterior span,
 .siguiente span,
 .paginaAnterior span,
 .paginaSiguiente span,
 button span {
  vertical-align: middle;
 }

 .anterior:hover,
 .siguiente:hover,
 .paginaAnterior:hover,
 .paginaSiguiente:hover,
 button:hover {
  background-color: var(--colFondoPushHover);
 }

 .anterior:focus,
 .siguiente:focus,
 .paginaAnterior:focus,
 .paginaSiguiente:focus,
 button:focus {
  background-color: var(--colFondoPushFocus);
 }

 .anterior:active,
 .siguiente:active,
 .paginaAnterior:active,
 .paginaSiguiente:active,

 button:active {
  background-color: var(--colFondoPushActive);
 }

 .anterior.bye,
 .siguiente.bye,
 .paginaAnterior.bye,
 .paginaSiguiente.bye {
  display: none;
 }

 a[data-logo] {
  display: block;
  height: 54px;
  line-height: 54px;
  padding-left: 54px;
  margin-top: 1rem;
  background-image: url("/img/icono/maskable_icon_x48.png");
  background-position: 3px center;
  background-repeat: no-repeat;
 }

 a strong,
 a code,
 h1 strong,
 h1 code {
  color: var(--colTituloStrong);
  font-size: 1em;
 }

 nav a {
  font-family: var(--fontSans);
 }

 pre {
  font-family: var(--fontMono);
 }

 code {
  font-family: var(--fontMono);
  font-size: 1rem;
 }

 .tree {
  font-family: var(--fontSans);
 }

 .tree summary {
  text-decoration: underline;
  cursor: pointer;
 }

 .tree li {
  margin-top: 1em;
  margin-bottom: 1em;
 }

 h1:not(.default) {
  font-family: var(--fontSans);
  color: var(--colTituloLetra);
 }

 h1,
 .lectura a,
 .lectura p,
 .lectura blockquote {
  overflow-wrap: anywhere;
 }

 .autor {
  font-family: var(--fontSans);
  font-size: 1.5rem;
  color: var(--colTituloLetra);
 }

 figure {
  text-align: center;
 }

 figure img {
  width: 100%;
 }

 figcaption {
  font-family: var(--fontMono);
 }

 .print .noPrint {
  display: none;
 }

 @media print {
  .noPrint {
   display: none;
  }

  .pruebaDeEscritorio {
   page-break-before: always;
  }
 }

 iframe {
  box-sizing: border-box;
  width: 300px;
 }

 .lectura {
  max-width: var(--anchoLectura);
  margin: 1rem auto;
 }

 .lectura p,
 .lectura blockquote {
  text-align: justify;
 }

 .horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: start;
  justify-content: center;
 }

 .horizontal>*:first-child {
  flex: 1 1 300px;
  text-align: center;
 }

 .horizontal>*:nth-child(2) {
  flex: 1 1 auto;
 }

 .columnas4 {
  columns: 4 180px;
  column-gap: 1rem;
 }

 .columnas2 {
  columns: 2 360px;
  column-gap: 1rem;
 }

 .resaltado {
  background-color: var(--colResaltado);
  color: var(--colLetraResaltado);
 }

 .resaltado2 {
  background-color: var(--colResaltado2);
  color: var(--colLetraResaltado);
 }

 .resaltado3 {
  background-color: var(--colResaltado3);
  color: var(--colLetraResaltado);
 }

 table.borde {
  margin-left: auto;
  margin-right: auto;
 }

 table.borde,
 table.borde td {
  border: thin solid;
  border-collapse: collapse;
 }

 table.borde th,
 table.borde td {
  padding: 0.4rem;
 }

 table.codeShow {
  margin-left: auto;
  margin-right: auto;
 }

 .codeShow td:first-child {
  text-align: right;
  padding: 0 0 0 0;
  vertical-align: top;
  font-family: var(--fontMono);
  white-space: pre;
  font-size: 1rem;
  line-height: 1.2rem;
  /* Avoid selection */
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
 }

 .codeShow td:nth-child(2) {
  padding: 0 0 0 0.25rem;
  vertical-align: top;
  font-family: var(--fontMono);
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  font-size: 1rem;
  line-height: 1.2rem;
 }

 .codeReserved {
  color: var(--colLetraCodeReserved);
  font-weight: bolder;
 }

 .codeString {
  color: var(--colLetraCodeString);
  font-weight: 600;
 }

 .codeComment {
  color: var(--colLetraCodeComment);
  font-style: oblique;
 }

 @media print {
  .codeShow button {
   display: none;
  }
 }


 footer {
  margin-top: 1rem;
  display: block;
  text-align: center;
  font-family: var(--fontSans);
  font-size: small;
 }
</style>
 <style>
 .pruebaDeEscritorio section {
  display: inline-block;
  vertical-align: top;
  margin: 1em;
 }

 .pruebaDeEscritorio section pre {
  margin: 0;
 }

 .pruebaDeEscritorio samp {
  font-weight: bold;
 }

 .pruebaDeEscritorio .activo {
  display: inline-block;
  margin: 0 0.2rem 0 0;
  vertical-align: top;
  background-color: var(--colSecundario);
  border: 1px solid var(--colSecundario);
 }

 .pruebaDeEscritorio :target,
 .pruebaDeEscritorio :target caption {
  background-color: var(--colTarget);
 }

 .pruebaDeEscritorio .numero1 {
  display: inline-block;
  margin: 0 0.2rem 0 0;
  color: var(--colStack1);
  border: 1px solid var(--colStack1);
 }

 .pruebaDeEscritorio .numero2 {
  display: inline-block;
  color: var(--colStack2);
  border: 1px solid var(--colStack2);
 }

 .pruebaDeEscritorio .numero3 {
  display: inline-block;
  color: var(--colStack3);
  border: 1px solid var(--colStack3);
 }

 .pruebaDeEscritorio a.parametro1,
 .pruebaDeEscritorio .parametro1 {
  color: var(--colPar1);
 }

 .pruebaDeEscritorio a.parametro2,
 .pruebaDeEscritorio .parametro2 {
  color: var(--colPar2);
 }

 .pruebaDeEscritorio .descongela {
  color: var(--colDescongela);
 }

 .pruebaDeEscritorio table.tabla1,
 .pruebaDeEscritorio table.tabla1 th,
 .pruebaDeEscritorio table.tabla1 td {
  border: 1px solid var(--colStack1);
 }

 .pruebaDeEscritorio table.tabla2,
 .pruebaDeEscritorio table.tabla2 th,
 .pruebaDeEscritorio table.tabla2 td {
  border: 1px solid var(--colStack2);
 }

 .pruebaDeEscritorio table.tabla3,
 .pruebaDeEscritorio table.tabla3 th,
 .pruebaDeEscritorio table.tabla3 td {
  border: 1px solid var(--colStack3);
 }

 .pruebaDeEscritorio .frame {
  font-family: var(--fontMono);
  border-collapse: collapse;
 }

 .pruebaDeEscritorio .frame,
 .pruebaDeEscritorio .frame th,
 .pruebaDeEscritorio .frame td {
  border: thin solid;
 }

 .pruebaDeEscritorio .frame caption {
  font-style: italic;
 }

 .pruebaDeEscritorio .objeto caption {
  text-decoration: underline;
  font-style: italic;
 }

 .pruebaDeEscritorio .creación {
  display: flex;
 }
</style>
</head>

<body class="print">
   <h1 class="sitio">Aplicaciones web orientadas a servicios y mashups</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <p class="autor">por Gilberto Pacheco Gallegos</p>
 <ul>
  <li>
   <p>
    Este curso trata sobre páginas web que se comunican, sin recargarse, con un
    tipo de software conocido como <dfn>servicio</dfn>, alojado en servidores.
   </p>
  </li>
  <li>
   <p>
    Otros tipos de app, como apps móviles y de escritorio también se pueden
    conectar a un servicio.
   </p>
  </li>
  <li>
   <p>
    Este curso también se muestra la construcción de <dfn>mashups</dfn>, técnica
    que consiste en agregar el contenido de otros sitios.
   </p>
  </li>
  <li>
   <p>
    También se muestran los fundamentos para construir e-commerce.
   </p>
  </li>
  <li>
   <p>
    Los chats con websockets se han sustituido por un chat con MQTT, que es más
    sencillo.
   </p>
  </li>
  <li>
   <p>
    Utiliza el botón
    <button type="button" title="Menú" style="vertical-align: middle">
     <span class="material-symbols-outlined">
      menu
     </span>
    </button>
    para mostrar el menú de navegación, o el enlace
    <span class="material-symbols-outlined"
      style="display: inline-block; vertical-align: middle">
     skip_next
    </span>
    para avanzar a las siguietes paginas. La página
    <a href="m00instrucciones.html">Instrucciones de navegación</a>
    te muestra otras opciones para desplazarte por el sitio.
   </p>
  </li>
 </ul>
 <nav>
  <h1>Lecciones</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m00previos.html">Conocimientos requeridos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m00instrucciones.html">Instrucciones de navegación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/">Aplicaciones Orientadas a Servicios</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/">Ejemplo de servicio</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/">Arquitectura orientada a servicios</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m04geolocalizacion.html">Ejemplo de geolocalización</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m05sociales.html">Ejemplo de redes sociales</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/">Características de un e-commerce</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/">Servicio que devuelve un resultado JSON</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/">Servicio que recibe y devuelve JSON</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/">Servicio que procesa una forma</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/">Servicio que falla</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/">Mostrar datos en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/">Renderizado del lado del cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/">Renderizado del lado del servidor</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/">Bases de datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/">Chat sencillo - Protocolos de comunicación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m16streaming.html">Ejemplo de streaming</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/">Relaciones a uno en la base de datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/">Relaciones a muchos - Usuarios y roles</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/">Autenticación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/">Archivos en la base de datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/">Compras sencillas</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/">Pruebas</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/">Servicio con token</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. Conocimientos requeridos</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Puedes ver el listado de mis sitios educativos en
    <a href="https://gilpgcl.github.io" target="_blank"
      rel="noopener">https://gilpgcl.github.io</a>.
   </p>
  </li>
  <li>
   <p>
    Este curso es continuación de
    <a href="https://gilpgiti.github.io" rel="nooper"
      target="_blank">https://gilpgiti.github.io</a>,
    <a href="https://gilpgijs.github.io" rel="nooper"
      target="_blank">https://gilpgijs.github.io</a>
    y
    <a href="https://gilpgihc.github.io" rel="nooper"
      target="_blank">https://gilpgihc.github.io</a>.
    Mucho contenido que originalmente aparecía en este sitio, se ha desplazado a
    estos sitios.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >2. Instrucciones de navegación</h1><div class="lectura">
 <section class="noPrint">
 <ul>
  <li>
   <p>
    Los siguientes controles te permitirán navegar por todo el contenido del
    sitio.
   </p>
   <dl>
    <dt>
     <button type="button" title="Cierra" style="vertical-align: middle">
      <span class="material-symbols-outlined">
       close
      </span>
     </button>
    </dt>
    <dd>
     <p>Oculta el menú de navegación.</p>
    </dd>
    <dt>
     <button type="button" title="Menú" style="vertical-align: middle">
      <span class="material-symbols-outlined">
       menu
      </span>
     </button>
    </dt>
    <dd>
     <p>Muestra el menú de navegación.</p>
    </dd>
    <dt>
     <span class="anterior" title="Página anterior"
       style="vertical-align: middle">
      <span class="material-symbols-outlined">
       skip_previous
      </span></span>
    </dt>
    <dt>
     <span class="material-symbols-outlined"
       style="display: inline-block; vertical-align: middle">
      arrow_back
     </span> (Tecla flecha a la izquierda)
    </dt>
    <dt>
     Swipe hacia la derecha
    </dt>
    <dd>
     <p>Regresa a la página anterior.</p>
    </dd>
    <dt>
     <span class="siguiente" title="Página siguiente"
       style="vertical-align: middle">
      <span class="material-symbols-outlined">
       skip_next
      </span>
     </span>
    </dt>
    <dt>
     <span class="material-symbols-outlined"
       style="display: inline-block; vertical-align: middle">
      arrow_forward
     </span> (Tecla flecha a la derecha)
    </dt>
    <dt>
     Swipe hacia la izquierda
    </dt>
    <dd>
     <p>Avanza a la página siguiente.</p>
    </dd>
   </dl>
  </li>
 </ul>
</section>
</div>
      </section>
     <section>
         <h1 >3. Aplicaciones Orientadas a Servicios</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m01awoas/mAintro.html">Introduccion</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mAnube.html"><dfn>Nube computacional</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mBaw.html"><dfn>Aplicación web</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mCservicio.html"><dfn>Servicio en la nube</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mDtipos.html">Tipos de servicios</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mEoferta.html">Servicios que se ofrecen en la nube</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mFmasUsados.html">Servicios de nube más usados</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mGaoas.html"><dfn>Aplicación orientada a servicios</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mHawoas.html"><dfn>Aplicación web orientada a servicios</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mImashups.html"><dfn>Aplicación web hibrida (Mashup)</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m01awoas/mJresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introduccion</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentan los conceptos de:
   </p>
   <ul>
    <li>
     <p>
      aplicaciones web orientadas a servicios y
     </p>
    </li>
    <li>
     <p>
      mashups.
     </p>
    </li>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. <dfn>Nube computacional</dfn></h1><figure>
 <img src="/img/m01awoas/Imagen1.png">
</figure>
<div class="lectura">
 <ul>
  <li>
   <p>
    Es el conjunto de servidores remotos en Internet para gestionar archivos y
    aplicaciones.
   </p>
  </li>
  <li>
   <p>
    Una de las ventajas de una nube es que permite que los usuarios utilicen
    archivos y aplicaciones sin tener que instalar programas en una computadora
    con acceso a Internet.
   </p>
  </li>
  <li>
   <p>
    El concepto de nube salió de los diagramas de red, donde Internet se
    representa como una nube, en una abstracción de la infraestructura que
    representa.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. <dfn>Aplicación web</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Aplicación que los usuarios pueden utilizar accediendo a un servidor web a
    través de internet o de una intranet mediante un navegador.
   </p>
  </li>
  <li>
   <p>
    <small>
     Fuente:
     <a target="_blank" rel="nooper"
       href="https://es.wikipedia.org/wiki/Aplicaci%C3%B3n_web">https://es.wikipedia.org/wiki/Aplicaci%C3%B3n_web</a>
    </small>
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. <dfn>Servicio en la nube</dfn></h1><div class="lectura">
 <p>
  Utilidad o función que se utiliza a través de Internet.
 </p>
</div>
      </section>
     <section >
         <h1 >E. Tipos de servicios</h1><div class="lectura">
 <dl>
  <dt><dfn>Software as a Service</dfn> <abbr>(SaaS)</abbr></dt>
  <dd>
   <p>
    El más utilizado. El software está alojado en servidores de los proveedores
    y el cliente accede a ellos a través del navegador web. Todo lo relacionado
    con mantenimiento, soporte y disponibilidad es manejado por el proveedor.
   </p>
  </dd>
  <dt><dfn>Platform as a Service</dfn> <abbr>(PaaS)</abbr></dt>
  <dd>
   <p>
    En este tipo de servicios en la nube el proveedor ofrece acceso a un entorno
    basado en cloud en el cual los usuarios pueden crear, ejecutar, distribuir y
    administrar sus propias aplicaciones.
   </p>
  </dd>
  <dt><dfn>Infrastructure as a Service</dfn> <abbr>(IaaS)</abbr></dt>
  <dd>
   <p>
    Un proveedor de servicios proporciona aceso a recursos como servidores con
    una capacidad de cómputo contratada, almacenamiento y acceso a red.
   </p>
  </dd>
 </dl>
</div>
      </section>
     <section >
         <h1 >F. Servicios que se ofrecen en la nube</h1><div class="lectura">
 <ul>
  <li>
   <p>Almacenamiento</p>
  </li>
  <li>
   <p>Herramientas de Productividad</p>
  </li>
  <li>
   <p>Desarrollo de Aplicaciones</p>
  </li>
  <li>
   <p>Hosting</p>
  </li>
  <li>
   <p>Videoconferencias</p>
  </li>
  <li>
   <p>Mapas</p>
  </li>
  <li>
   <p>Streamming</p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >G. Servicios de nube más usados</h1><div class="lectura">
 <dl>
  <dt>Amazon Web Services (AWS)</dt>
  <dd>
   <p>
    <a href="https://aws.amazon.com/" target="_blank"
      rel="nooper">https://aws.amazon.com/</a>
   </p>
  </dd>
  <dt>Microsoft Azure</dt>
  <dd>
   <p>
    <a href="https://azure.microsoft.com/" target="_blank"
      rel="nooper">https://azure.microsoft.com/</a>.
   </p>
  </dd>
  <dt>Google Cloud</dt>
  <dd>
   <p>
    <a href="https://cloud.google.com/" target="_blank"
      rel="nooper">https://cloud.google.com/</a>.
   </p>
  </dd>
 </dl>
</div>
      </section>
     <section >
         <h1 >H. <dfn>Aplicación orientada a servicios</dfn></h1><div class="lectura">
 <p>
  Es una aplicación en la que algunas partes se realizan en un servidor
  independiente.
 </p>
 <section>
  <h1>Características</h1>
  <ul>
   <li>
    <p>El procesamiento se reparte en varias computadoras.</p>
   </li>
   <li>
    <p>Un servicio puede ser utilizado por varias aplicaciones.</p>
   </li>
  </ul>
 </section>
</div>
      </section>
     <section >
         <h1 >I. <dfn>Aplicación web orientada a servicios</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Aplicación web en la que algunas operaciones se realizan en el servidor web
    y sus resultados se descargan al navegador web sin cambiar la página
    desplegada.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >J. <dfn>Aplicación web hibrida (Mashup)</dfn></h1><div class="lectura">
 <p>Es una aplicación que usa otras aplicaciones web.</p>
 <section>
  <h1>Estructura</h1>
  <dl>
   <dt><dfn>Proveedor de contenidos</dfn></dt>
   <dd>
    <p>
     Fuente de los datos. Los datos están disponibles vía una API y diferentes
     protocolos web como RSS, REST y Web Service.
    </p>
   </dd>
   <dt><dfn>El sitio mashup</dfn></dt>
   <dd>
    <p>
     Es la nueva aplicación web que provee un nuevo servicio utilizando
     diferente información y de la que no es dueña.
    </p>
   </dd>
   <dt><dfn>El navegador web cliente</dfn></dt>
   <dd>
    <p>
     Interfaz de usuario del mashup. En una aplicación web, el contenido puede
     ser mezclado por los web browser clientes usando lenguaje web del lado del
     cliente, por ejemplo, HTML y JavaScript.
    </p>
   </dd>
  </dl>
 </section>
 <p><small>Fuente: Wikipedia</small></p>
</div>
      </section>
     <section >
         <h1 >K. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>En esta lección se tocaron los siguientes temas:</p>
   <ul>
    <li>
     <p>Nube computacional.</p>
    </li>
    <li>
     <p>Aplicación web.</p>
    </li>
    <li>
     <p>Servicio en la nube.</p>
    </li>
    <li>
     <p>Tipos de servicios.</p>
    </li>
    <li>
     <p>Servicios que se ofrecen en la nube.</p>
    </li>
    <li>
     <p>Servicios de nube más usados.</p>
    </li>
    <li>
     <p>Aplicación orientada a servicios.</p>
    </li>
    <li>
     <p>Aplicación web orientada a servicios.</p>
    </li>
    <li>
     <p>Aplicación web hibrida (Mashup).</p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >4. Ejemplo de servicio</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m02servicio/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/">Funcionamiento</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/m-servicio-php.html">servicio.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mHresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <p>
  En esta lección se explica el funcionamiento de un servicio muy sencillo.
 </p>
 <p>
  Puedes probar el ejemplo en
  <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvejemplo?v=1"
    target="_blank">https://replit.com/@GilbertoPachec5/srvejemplo?v=1</a>.
    Hazle fork al proyecto y córrelo.
 </p>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m02servicio/serviciodistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section>
         <h1 >C. Funcionamiento</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m1cliente.html">Iniciamos al ejecutar código en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m2invoca.html">Se invoca el servicio en el servidor</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m3procesa.html">El servicio procesa la request y genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m4devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m5verifica.html">Verifica si la conexión terminó con éxito</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m6recupera.html">Como la conexión terminó con éxito, recupera el texto de response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m7muestra.html">Muestra el texto en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m02servicio/mCfuncionamiento/m8termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. Iniciamos al ejecutar código en el cliente</h1><section>
 <h1>index.html</h1>
 <pre class="resaltado"><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se invoca el servicio en el servidor</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span class="resaltado"> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
 <p class="resaltado2">Ejecuta fetch y envía request (solicitud).</p>
</section>
<section style="vertical-align: top;">
 <h1>Request</h1>
 <dl class="resaltado">
  <dt>URL</dt>
  <dd>
   <p>servicio.php</p>
  </dd>
  <dt>Method</dt>
  <dd>
   <p>GET</p>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>servicio.php</h1>
 <pre class="resaltado"><code class="language-php"><span>&lt;?<span class="codeReserved">php</span></span>
<span></span>
<span>echo <span class="codeString">&quot;Hola&quot;</span>;</span></code></pre>
 <p class="resaltado2">Despierta y recibe request.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. El servicio procesa la request y genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span class="resaltado3"> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>servicio.php</h1>
 <pre><code class="language-php"><span>&lt;?<span class="codeReserved">php</span></span>
<span></span>
<span class="resaltado">echo <span class="codeString">&quot;Hola&quot;</span>;</span></code></pre>
 <p class="resaltado2">
  Procesa la request y genera
  <br>la response (respuesta).</p>
</section>
<section style="vertical-align: top;">
 <h1>Response</h1>
 <dl class="resaltado">
  <dt>code</dt>
  <dd>200</dd>
  <dt>contenido</dt>
  <dd>Hola</dd>
 </dl>
 <p class="resaltado2">
  El code (o código) 200
  <br>indica que terminó
  <br>con éxito.
 </p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span class="resaltado"><span class="codeReserved">const</span> resp =</td></tr></span>
<span class="resaltado"> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
 <p class="resaltado2">Despiesta y recibe response.</p>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>Hola</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl class="resaltado">
   <dt>resp</dt>
   <dd>
    <dl>
     <dt>ok</dt>
     <dd>true</dd>
     <dt>text</dt>
     <dd>Hola</dd>
    </dl>
   </dd>
  </dl>
  <p class="resaltado2">
   <var>resp</var> tiene lo mismo
   <br>que la response,
   <br>pero en un objeto
   <br>de JavaScript.
  </p>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>servicio.php</h1>
 <pre class="resaltado3"><code class="language-php"><span>&lt;?<span class="codeReserved">php</span></span>
<span></span>
<span>echo <span class="codeString">&quot;Hola&quot;</span>;</span></code></pre>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. Verifica si la conexión terminó con éxito</h1><section style="display: inline-block; vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span class="resaltado"><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl style="padding: 0.5rem;">
  <dt>resp</dt>
  <dd>
   <dl>
    <dt class="resaltado">ok</dt>
    <dd class="resaltado">true</dd>
    <dt>text</dt>
    <dd>Hola</dd>
   </dl>
  </dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. Como la conexión terminó con éxito, recupera el texto de response</h1><section style="display: inline-block; vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span class="resaltado3"> <span class="codeReserved">const</span> texto =</td></tr></span>
<span class="resaltado3">  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl style="padding: 0.5rem;">
  <dt>resp</dt>
  <dd>
   <dl>
    <dt>ok</dt>
    <dd>true</dd>
    <dt class="resaltado">text</dt>
    <dd class="resaltado">Hola</dd>
   </dl>
  </dd>
  <dt class="resaltado">texto</dt>
  <dd class="resaltado">Hola</dd>
 </dl>
 <p class="resaltado2">
  El texto recuperado
  <br>queda en la
  <br>constante <var>texto</var>.
 </p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >7. Muestra el texto en un alert</h1><section style="display: inline-block; vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span class="resaltado3"> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl style="padding: 0.5rem;">
  <dt>resp</dt>
  <dd>
   <dl>
    <dt>ok</dt>
    <dd>true</dd>
    <dt>text</dt>
    <dd>Hola</dd>
   </dl>
  </dd>
  <dt>texto</dt>
  <dd>Hola</dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>Hola</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
  </div>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >8. Al cerrar el alert, termina el evento</h1><section style="display: inline-block; vertical-align: top;">
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span><span class="codeReserved">const</span> resp =</td></tr></span>
<span> <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr></span>
<span><span class="codeReserved">if</span> (resp.ok) {</td></tr></span>
<span> <span class="codeReserved">const</span> texto =</td></tr></span>
<span>  <span class="codeReserved">await</span> resp.text()</td></tr></span>
<span> alert(texto)</td></tr></span>
<span>} <span class="codeReserved">else</span> {</td></tr></span>
<span> throw <span class="codeReserved">new</span> Error(</td></tr></span>
<span>  resp.statusText)</td></tr></span>
<span>}</td></tr></span></code></pre>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl>
  <dt>resp</dt>
  <dd>
   <dl>
    <dt>ok</dt>
    <dd>true</dd>
    <dt>text</dt>
    <dd>Hola</dd>
   </dl>
  </dd>
  <dt>texto</dt>
  <dd>Hola</dd>
 </dl>
</section>
      </section>
      </section>
     <section >
         <h1 >D. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvejemplo?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvejemplo?v=1</a>.
    Hazle fork al proyecto y córrelo. En el ambiente de desarrollo tienes la
    opción de descargar el proyecto en un zip.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del
     proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1wdg7LKHR8L21FQGsRr2bXpXqAcaEGxCx/view?usp=sharing"
      target="_blank" rel="nooper">Observa paso a paso la comunicación entre
     ciente y servidor.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >E. Archivos</h1><div class="lectura">
 <ul class="tree">
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-servicio-php.html">servicio.php</a></p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. index.html</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;!<span class="codeReserved">DOCTYPE</span> html&gt;</td></tr>
  <tr><td>2</td><td>&lt;<span class="codeReserved">html</span> lang=<span class="codeString">&quot;es&quot;</span>&gt;</td></tr>
  <tr><td>3</td><td></td></tr>
  <tr><td>4</td><td>&lt;<span class="codeReserved">head</span>&gt;</td></tr>
  <tr><td>5</td><td></td></tr>
  <tr><td>6</td><td> &lt;<span class="codeReserved">meta</span> charset=<span class="codeString">&quot;UTF-8&quot;</span>&gt;</td></tr>
  <tr><td>7</td><td> &lt;<span class="codeReserved">meta</span> name=<span class="codeString">&quot;viewport&quot;</span> content=<span class="codeString">&quot;width=device-width&quot;</span>&gt;</td></tr>
  <tr><td>8</td><td></td></tr>
  <tr><td>9</td><td> &lt;<span class="codeReserved">title</span>&gt;Ejemplo de servicio&lt;/<span class="codeReserved">title</span>&gt;</td></tr>
  <tr><td>10</td><td></td></tr>
  <tr><td>11</td><td>&lt;/<span class="codeReserved">head</span>&gt;</td></tr>
  <tr><td>12</td><td></td></tr>
  <tr><td>13</td><td>&lt;<span class="codeReserved">body</span>&gt;</td></tr>
  <tr><td>14</td><td> &lt;<span class="codeReserved">h1</span>&gt;Ejemplo de servicio&lt;/<span class="codeReserved">h1</span>&gt;</td></tr>
  <tr><td>15</td><td></td></tr>
  <tr><td>16</td><td> &lt;<span class="codeReserved">button</span> onclick=<span class="codeString">&quot;ejecuta()&quot;</span>&gt;</td></tr>
  <tr><td>17</td><td>  Ejecuta</td></tr>
  <tr><td>18</td><td> &lt;/<span class="codeReserved">button</span>&gt;</td></tr>
  <tr><td>19</td><td></td></tr>
  <tr><td>20</td><td> &lt;<span class="codeReserved">script</span>&gt;</td></tr>
  <tr><td>21</td><td></td></tr>
  <tr><td>22</td><td>  <span class="codeReserved">async</span> <span class="codeReserved">function</span> ejecuta() {</td></tr>
  <tr><td>23</td><td>   <span class="codeReserved">try</span> {</td></tr>
  <tr><td>24</td><td>    <span class="codeComment">// Se conecta a servicio.php y recibe su respuesta.</span></td></tr>
  <tr><td>25</td><td>    <span class="codeReserved">const</span> resp =</td></tr>
  <tr><td>26</td><td>     <span class="codeReserved">await</span> fetch(<span class="codeString">&quot;servicio.php&quot;</span>)</td></tr>
  <tr><td>27</td><td>    <span class="codeReserved">if</span> (resp.ok) {</td></tr>
  <tr><td>28</td><td>     <span class="codeReserved">const</span> texto =</td></tr>
  <tr><td>29</td><td>      <span class="codeReserved">await</span> resp.text()</td></tr>
  <tr><td>30</td><td>     alert(texto)</td></tr>
  <tr><td>31</td><td>    } <span class="codeReserved">else</span> {</td></tr>
  <tr><td>32</td><td>     throw <span class="codeReserved">new</span> Error(</td></tr>
  <tr><td>33</td><td>      resp.statusText)</td></tr>
  <tr><td>34</td><td>    }</td></tr>
  <tr><td>35</td><td>   } <span class="codeReserved">catch</span> (error) {</td></tr>
  <tr><td>36</td><td>    console.error(error)</td></tr>
  <tr><td>37</td><td>    alert(error.message)</td></tr>
  <tr><td>38</td><td>   }</td></tr>
  <tr><td>39</td><td>  }</td></tr>
  <tr><td>40</td><td></td></tr>
  <tr><td>41</td><td> &lt;/<span class="codeReserved">script</span>&gt;</td></tr>
  <tr><td>42</td><td></td></tr>
  <tr><td>43</td><td>&lt;/<span class="codeReserved">body</span>&gt;</td></tr>
  <tr><td>44</td><td></td></tr>
  <tr><td>45</td><td>&lt;/<span class="codeReserved">html</span>&gt;</td></tr>
 </tbody>
</table>
      </section>
     <section >
         <h1 >G. servicio.php</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;?<span class="codeReserved">php</span></td></tr>
  <tr><td>2</td><td></td></tr>
  <tr><td>3</td><td>echo <span class="codeString">&quot;Hola&quot;</span>;</td></tr>
  <tr><td>4</td><td></td></tr>
 </tbody>
</table>
      </section>
     <section >
         <h1 >H. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>En esta lección se mostró el funcionamiento de un servicio.</p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >5. Arquitectura orientada a servicios</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m03soa/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mAsoa.html"><dfn>Arquitectura orientada a servicios</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mBventajas.html">Ventajas</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mCprincipios.html">Principios de diseño de un servicio</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mDcapas.html">Capas</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mEdiagrama.html"><dfn>Diagrama de Arquitectura</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mFxml/">Introducción a XML</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mGsoap/">Introducción a SOAP</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mHwsdl/">Introducción a WSDL</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mIdefUddi.html"><dfn>UDDI</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mJrest/">Introducción a REST</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mKresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentan el concepto y los componentes de una
    arquitectura orientada a servicios.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. <dfn>Arquitectura orientada a servicios</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Estilo de arquitectura de TI que se apoya en la orientación a
    servicios.
   </p>
  </li>
  <li>
   <p>
    La orientación a servicios es una forma de pensar en servicios, su
    construcción y sus resultados.
   </p>
  </li>
  <li>
   <p>
    Un servicio es una representación lógica de una actividad de negocio
    que tiene un resultado de negocio específico (ejemplo: comprobar el
    crédito de un cliente, obtener datos de clima, consolidar reportes
    de perforación).
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Arquitectura_orientada_a_servicios"
     target="_blank" rel="nooper">https://es.wikipedia.org/wiki/Arquitectura_orientada_a_servicios</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >C. Ventajas</h1><div class="lectura">
 <ul>
  <li>
   <p>Reduce el nivel de acoplamiento.</p>
  </li>
  <li>
   <p>Clara definición de roles de desarrollo.</p>
  </li>
  <li>
   <p>Definición de seguridad más clara.</p>
  </li>
  <li>
   <p>Fácil de probar.</p>
  </li>
  <li>
   <p>Mejora el mantenimiento.</p>
  </li>
  <li>
   <p>Favorece la reutilización.</p>
  </li>
  <li>
   <p>Favorece el desarrollo en paralelo.</p>
  </li>
  <li>
   <p>Favorece la escalabilidad.</p>
  </li>
  <li>
   <p>Permite un mapeo directo entre los procesos y los sistemas.</p>
  </li>
  <li>
   <p>Permite un monitoreo preciso.</p>
  </li>
  <li>
   <p>Permite la interoperabilidad.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="http://soa-fpuna.blogspot.com/2011/11/ventajas-y-desventajas.html"
     target="_blank" rel="nooper">http://soa-fpuna.blogspot.com/2011/11/ventajas-y-desventajas.html</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >D. Principios de diseño de un servicio</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Definición clara y estandarizada mediante descriptores de servicio, donde se
    indique:
   </p>
   <ul>
    <li>
     <p>Nombre del Servicio.</p>
    </li>
    <li>
     <p>Forma de accesos.</p>
    </li>
    <li>
     <p>Funcionalidades que ofrece.</p>
    </li>
    <li>
     <p>
      Descripción de los datos de entrada de cada funcionalidad que ofrece.
     </p>
    </li>
    <li>
     <p>
      Descripción de los datos de salida de cada funcionalidad que ofrece.
     </p>
    </li>
   </ul>
  </li>
  <li>
   <p>
    Sin estado: no guardan valores para ser usados en otras llamadas. (es
    posible acceder a bases de datos.)
   </p>
  </li>
  <li>
   <p>
    Pueden también ejecutar unidades discretas de trabajo como serían editar y
    procesar una transacción.
   </p>
  </li>
  <li>
   <p>No dependen del estado de otras funciones o procesos.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://ederluisdsd.wordpress.com/2013/03/17/principios-de-diseno-soa/"
     target="_blank rel="nooper">https://ederluisdsd.wordpress.com/2013/03/17/principios-de-diseno-soa/</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >E. Capas</h1><figure>
 <img src="/img/m03soa/capas_soa.svg" alt="Capas de SOA">
</figure>
<div class="lectura">
 <dl>
  <dt>Capa de acceso</dt>
  <dd>
   <ul>
    <li>
     <p>Interfaz de usuario que invoca a los procesos de negocio.</p>
    </li>
    <li>
     <p>Interfaces web, escritorio, móvil, etc.</p>
    </li>
    <li>
     <p>Pueden ejecutarse en varios dispositivos.</p>
    </li>
   </ul>
  </dd>
  <dt>Capa de procesos de negocio</dt>
  <dd>
   <ul>
    <li>
     <p>
      Integración de uno o más servicios que resuelven un problema de negocio.
     </p>
    </li>
   </ul>
  </dd>
  <dt>Capa de servicio</dt>
  <dd>
   <ul>
    <li>
     <p>Componentes que se han desarrollado como servicios.</p>
    </li>
   </ul>
  </dd>
  <dt>Capa de recursos</dt>
  <dd>
   <ul>
    <li>
     <p>Recursos operacionales: CRM, ERP, HR, BD.</p>
    </li>
    <li>
     <p>Tecnologías (Java, .NET, PHP).</p>
    </li>
   </ul>
  </dd>
 </dl>
 <p>
  <small>
   Fuente:
   <a href="https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa"
     target="_blank"
     rel="nooper">https://www.slideshare.net/imcinstitute/service-oriented-architecture-soa-15-introduction-to-soa</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >F. <dfn>Diagrama de Arquitectura</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Puedes encontrar información sobre este tipo de diagramas en:
    <a href="https://www.uml-diagrams.org/component-diagrams.html"
      target="_blank"
      rel="nooper">https://www.uml-diagrams.org/component-diagrams.html</a>.
   </p>
  </li>
  <li>
   <p>
    A continuación se muestra como quedaría un sitio con bases de datos
    si se adaptara a SOA.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;" src="/img/m03soa/arquitectura_soa.svg"
   alt="Capas de SOA">
</figure>
      </section>
     <section>
         <h1 >G. Introducción a XML</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m03soa/mFxml/m1defXml.html"><dfn>XML</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mFxml/m2ejXml.html">Ejemplo de XML</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mFxml/m3dtdXml.html">DTD MiContacto</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. <dfn>XML</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas en inglés de
    e<strong>Xtensible Markup Language</strong>,
    traducido como
    <strong>Lenguaje de Marcado Extensible o Lenguaje de Marcas
     Extensible</strong>.
   </p>
  </li>
  <li>
   <p>Metalenguaje que permite definir lenguajes de marcas.</p>
  </li>
  <li>
   <p>
    Desarrollado por el
    <a href="https://www.w3.org/">World Wide Web Consortium</a>
    (W3C).
   </p>
  </li>
  <li>
   <p>Utilizado para almacenar datos en forma legible.</p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Extensible_Markup_Language"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Extensible_Markup_Language</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >2. Ejemplo de XML</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;?<span class="codeReserved">xml</span> version=<span class="codeString">&quot;1.0&quot;</span> encoding=<span class="codeString">&quot;UTF-8&quot;</span> ?&gt;</td></tr>
  <tr><td>2</td><td>&lt;!<span class="codeReserved">DOCTYPE</span> MiContacto SYSTEM <span class="codeString">&quot;MiContacto.dtd&quot;</span>&gt;</td></tr>
  <tr><td>3</td><td>&lt;<span class="codeReserved">Contacto</span>&gt;</td></tr>
  <tr><td>4</td><td> &lt;<span class="codeReserved">Nombre</span>&gt;Juan&lt;/<span class="codeReserved">Nombre</span>&gt;</td></tr>
  <tr><td>5</td><td> &lt;<span class="codeReserved">Email</span>&gt;juan@gm.com&lt;/<span class="codeReserved">Email</span>&gt;</td></tr>
  <tr><td>6</td><td> &lt;<span class="codeReserved">Telefonos</span>&gt;</td></tr>
  <tr><td>7</td><td>  &lt;<span class="codeReserved">Telefono</span>&gt;5555555555&lt;/<span class="codeReserved">Telefono</span>&gt;</td></tr>
  <tr><td>8</td><td>  &lt;<span class="codeReserved">Telefono</span>&gt;8888888888&lt;/<span class="codeReserved">Telefono</span>&gt;</td></tr>
  <tr><td>9</td><td> &lt;/<span class="codeReserved">Telefonos</span>&gt;</td></tr>
  <tr><td>10</td><td>&lt;/<span class="codeReserved">Contacto</span>&gt;</td></tr>
 </tbody>
</table>
      </section>
     <section >
         <h1 >3. DTD MiContacto</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;?<span class="codeReserved">xml</span> version=<span class="codeString">&quot;1.0&quot;</span> encoding=<span class="codeString">&quot;ISO-8859-1&quot;</span> ?&gt;</td></tr>
  <tr><td>2</td><td><span class="codeComment">&lt;!-- Este es el DTD de Contacto --&gt;</span></td></tr>
  <tr><td>3</td><td>&lt;!<span class="codeReserved">ELEMENT</span> Contacto (Nombre, Email, Telefonos)&gt;</td></tr>
  <tr><td>4</td><td>&lt;!<span class="codeReserved">ELEMENT</span> Nombre (#PCDATA)&gt;</td></tr>
  <tr><td>5</td><td>&lt;!<span class="codeReserved">ELEMENT</span> Email (#PCDATA)&gt;</td></tr>
  <tr><td>6</td><td>&lt;!<span class="codeReserved">ELEMENT</span> Telefonos (Telefono)*&gt;</td></tr>
  <tr><td>7</td><td>&lt;!<span class="codeReserved">ELEMENT</span> Telefono (#PCDATA)&gt;</td></tr>
 </tbody>
</table>
      </section>
      </section>
     <section>
         <h1 >H. Introducción a SOAP</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m03soa/mGsoap/mKdefSoap.html"><dfn>SOAP</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mGsoap/mLestrSoap.html">Estructura de los mensajes de SOAP</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mGsoap/mMsolSoap.html">Ejemplo de solicitud SOAP</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mGsoap/mNrespSoap.html">Ejemplo de respuesta SOAP</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. <dfn>SOAP</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Originalmente siglas de Simple Object Access Protocol, Protocolo de Acceso
    Simple a Objetos.
   </p>
  </li>
  <li>
   <p>Hoy en día solo es SOAP, sin un significado especial.</p>
  </li>
  <li>
   <p>
    Protocolo estándar que define cómo dos objetos en diferentes procesos pueden
    comunicarse por medio de intercambio de datos XML.
   </p>
  </li>
  <li>
   <p>
    Es uno de los protocolos utilizados para implementar servicios web.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >2. Estructura de los mensajes de SOAP</h1><div class="marco-lectura">
 <figure>
  <img src="/img/m03soa/mensajes_soap.svg" alt="Mensajes SOAP">
 </figure>
 <ul>
  <li>
   <p>Usan formato XML.</p>
  </li>
  <li>
   <p>3 elementos:</p>
   <dl>
    <dt><dfn>Envelope</dfn> o <dfn>sobre</dfn></dt>
    <dd>
     <p>El elemento raíz.</p>
    </dd>
    <dt><dfn>Header</dfn> o <dfn>encabezado</dfn></dt>
    <dd>
     <p>Especificación de como procesar los datos.</p>
    </dd>
    <dt><dfn>Body</dfn> o <dfn>cuerpo</dfn></dt>
    <dd>
     <p>El conenido del mensaje.</p>
    </dd>
   </dl>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >3. Ejemplo de solicitud SOAP</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;<span class="codeReserved">soap</span>:Envelope xmlns:soap=<span class="codeString">&quot;http:&#47;/schemas.xmlsoap.org/soap/envelope/&quot;</span>&gt;</td></tr>
  <tr><td>2</td><td> &lt;<span class="codeReserved">soap</span>:Header&gt;</td></tr>
  <tr><td>3</td><td>  &lt;<span class="codeReserved">t</span>:Transaction xmlns:t=<span class="codeString">&quot;alguna-URI&quot;</span> soap:mustUnderstand=<span class="codeString">&quot;1&quot;</span>&gt;</td></tr>
  <tr><td>4</td><td>   5</td></tr>
  <tr><td>5</td><td>  &lt;/<span class="codeReserved">t</span>:Transaction&gt;</td></tr>
  <tr><td>6</td><td> &lt;/<span class="codeReserved">soap</span>:Header&gt;</td></tr>
  <tr><td>7</td><td> &lt;<span class="codeReserved">soap</span>:Body&gt;</td></tr>
  <tr><td>8</td><td>  &lt;<span class="codeReserved">getDetalleDeProducto</span> xmlns=<span class="codeString">&quot;http:&#47;/warehouse.example.com/ws&quot;</span>&gt;</td></tr>
  <tr><td>9</td><td>   &lt;<span class="codeReserved">productoId</span>&gt;827635&lt;/<span class="codeReserved">productoId</span>&gt;</td></tr>
  <tr><td>10</td><td>  &lt;/<span class="codeReserved">getDetalleDeProducto</span>&gt;</td></tr>
  <tr><td>11</td><td> &lt;/<span class="codeReserved">soap</span>:Body&gt;</td></tr>
  <tr><td>12</td><td>&lt;/<span class="codeReserved">soap</span>:Envelope&gt;</td></tr>
 </tbody>
</table>
      </section>
     <section >
         <h1 >4. Ejemplo de respuesta SOAP</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;<span class="codeReserved">soap</span>:Envelope xmlns:soap=<span class="codeString">&quot;http:&#47;/schemas.xmlsoap.org/soap/envelope/&quot;</span>&gt;</td></tr>
  <tr><td>2</td><td> &lt;<span class="codeReserved">soap</span>:Body&gt;</td></tr>
  <tr><td>3</td><td>  &lt;<span class="codeReserved">getRespuestaDetalleDeProducto</span> xmlns=<span class="codeString">&quot;http:&#47;/warehouse.example.com/ws&quot;</span>&gt;</td></tr>
  <tr><td>4</td><td>   &lt;<span class="codeReserved">getResultadoDetalleDeProducto</span>&gt;</td></tr>
  <tr><td>5</td><td>    &lt;<span class="codeReserved">productId</span>&gt;827635&lt;/<span class="codeReserved">productId</span>&gt;</td></tr>
  <tr><td>6</td><td>    &lt;<span class="codeReserved">nombre</span>&gt;Balón de Futbol&lt;/<span class="codeReserved">nombre</span>&gt;</td></tr>
  <tr><td>7</td><td>    &lt;<span class="codeReserved">descripcion</span>&gt;Balón de futbol de 11” de vinil.&lt;/<span class="codeReserved">descripcion</span>&gt;</td></tr>
  <tr><td>8</td><td>    &lt;<span class="codeReserved">precio</span>&gt;300.0&lt;/<span class="codeReserved">precio</span>&gt;</td></tr>
  <tr><td>9</td><td>   &lt;/<span class="codeReserved">getResultadoDetalleDeProducto</span>&gt;</td></tr>
  <tr><td>10</td><td>  &lt;/<span class="codeReserved">getRespuestaDetalleDeProducto</span>&gt;</td></tr>
  <tr><td>11</td><td> &lt;/<span class="codeReserved">soap</span>:Body&gt;</td></tr>
  <tr><td>12</td><td>&lt;/<span class="codeReserved">soap</span>:Envelope&gt;</td></tr>
 </tbody>
</table>
      </section>
      </section>
     <section>
         <h1 >I. Introducción a WSDL</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m03soa/mHwsdl/mPdefWsdl.html"><dfn>WSDL</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mHwsdl/mQelemWsdl.html">Elementos de WSDL</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mHwsdl/mRejemWsdl.html">Ejemplo de WSDL</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. <dfn>WSDL</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas de
    <strong>Web Services Description Language</strong>,
    es un formato de XML que se utiliza para describir servicios Web.
   </p>
  </li>
  <li>
   <p>
    Describe los requisitos del protocolo y los formatos de los mensajes
    necesarios para interactuar con los servicios listados en su catálogo.
   </p>
  </li>
  <li>
   <p>
    Las operaciones y mensajes que soporta se describen en abstracto y se ligan
    después al protocolo concreto de red y al formato del mensaje.
   </p>
  </li>
  <li>
   <p>Se usa a menudo en combinación con SOAP y XML Schema.</p>
  </li>
  <li>
   <p>
    Los tipos de datos especiales se incluyen en el archivo WSDL en forma de XML
    Schema.
   </p>
  </li>
  <li>
   <p>
    El cliente puede usar SOAP para hacer la llamada a una de las funciones
    listadas en el WSDL.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >2. Elementos de WSDL</h1><div class="lectura">
 <dl>
  <dt><dfn>types</dfn></dt>
  <dd>
   <p>
    Define los tipos de datos usados en los mensajes. Se utilizan los tipos
    definidos en la especificación XML Schema.
   </p>
  </dd>
  <dt><dfn>message</dfn></dt>
  <dd>
   <p>
    Define los elementos de mensaje. Cada mensaje puede consistir en una serie
    de partes lógicas. Las partes pueden ser de cualquiera de los tipos
    definidos en el elemento message.
   </p>
  </dd>
  <dt><dfn>portType</dfn></dt>
  <dd>
   <p>
    Define las operaciones permitidas y los mensajes intercambiados en el
    Servicio.
   </p>
  </dd>
  <dt><dfn>binding</dfn></dt>
  <dd>
   <p>Especifica los protocolos de comunicación usados.</p>
  </dd>
  <dt><dfn>service</dfn></dt>
  <dd>
   <p>
    Conjunto de puertos y dirección de los mismos. Esta parte final hace
    referencia a lo aportado por las secciones anteriores.
   </p>
  </dd>
 </dl>
 <p>
  Con estos elementos no sabemos qué hace un servicio pero sí disponemos de la
  información necesaria para interactuar con él (funciones, mensajes de
  entrada/salida, protocolos, etcétera).
 </p>
</div>
      </section>
     <section >
         <h1 >3. Ejemplo de WSDL</h1><table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td>&lt;<span class="codeReserved">definitions</span> name=“PrecioProd“</td></tr>
  <tr><td>2</td><td> targetNamespace=<span class="codeString">&quot;http:&#47;/example.com/stockquote.wsdl&quot;</span></td></tr>
  <tr><td>3</td><td> xmlns:tns=<span class="codeString">&quot;http:&#47;/example.com/stockquote.wsdl&quot;</span></td></tr>
  <tr><td>4</td><td> xmlns:xsd1=<span class="codeString">&quot;http:&#47;/example.com/stockquote.xsd&quot;</span></td></tr>
  <tr><td>5</td><td> xmlns:soap=<span class="codeString">&quot;http:&#47;/schemas.xmlsoap.org/wsdl/soap/&quot;</span></td></tr>
  <tr><td>6</td><td> xmlns=<span class="codeString">&quot;http:&#47;/schemas.xmlsoap.org/wsdl/&quot;</span>&gt;</td></tr>
  <tr><td>7</td><td> &lt;<span class="codeReserved">types</span>&gt;</td></tr>
  <tr><td>8</td><td>  &lt;<span class="codeReserved">schema</span> targetNamespace=<span class="codeString">&quot;http:&#47;/example.com/stockquote.xsd&quot;</span></td></tr>
  <tr><td>9</td><td>   xmlns=<span class="codeString">&quot;http:&#47;/www.w3.org/2000/10/XMLSchema&quot;</span>&gt;</td></tr>
  <tr><td>10</td><td>   &lt;<span class="codeReserved">element</span> name=<span class="codeString">&quot;SolPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>11</td><td>    &lt;<span class="codeReserved">complexType</span>&gt;</td></tr>
  <tr><td>12</td><td>     &lt;<span class="codeReserved">all</span>&gt;</td></tr>
  <tr><td>13</td><td>      &lt;<span class="codeReserved">element</span> name=<span class="codeString">&quot;productoId&quot;</span> <span class="codeReserved">type</span>=<span class="codeString">&quot;decimal&quot;</span>/&gt;</td></tr>
  <tr><td>14</td><td>     &lt;/<span class="codeReserved">all</span>&gt;</td></tr>
  <tr><td>15</td><td>    &lt;/<span class="codeReserved">complexType</span>&gt;</td></tr>
  <tr><td>16</td><td>   &lt;/<span class="codeReserved">element</span>&gt;</td></tr>
  <tr><td>17</td><td>   &lt;<span class="codeReserved">element</span> name=<span class="codeString">&quot;PrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>18</td><td>    &lt;<span class="codeReserved">complexType</span>&gt;</td></tr>
  <tr><td>19</td><td>     &lt;<span class="codeReserved">all</span>&gt;</td></tr>
  <tr><td>20</td><td>      &lt;<span class="codeReserved">element</span> name=<span class="codeString">&quot;precio&quot;</span> <span class="codeReserved">type</span>=<span class="codeString">&quot;float&quot;</span>/&gt;</td></tr>
  <tr><td>21</td><td>     &lt;/<span class="codeReserved">all</span>&gt;</td></tr>
  <tr><td>22</td><td>    &lt;/<span class="codeReserved">complexType</span>&gt;</td></tr>
  <tr><td>23</td><td>   &lt;/<span class="codeReserved">element</span>&gt;</td></tr>
  <tr><td>24</td><td>  &lt;/<span class="codeReserved">schema</span>&gt;</td></tr>
  <tr><td>25</td><td> &lt;/<span class="codeReserved">types</span>&gt;</td></tr>
  <tr><td>26</td><td> &lt;<span class="codeReserved">message</span> name=<span class="codeString">&quot;InputGetPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>27</td><td>  &lt;<span class="codeReserved">part</span> name=<span class="codeString">&quot;body&quot;</span> element=<span class="codeString">&quot;xsd1:SolPrecioProd&quot;</span>/&gt;</td></tr>
  <tr><td>28</td><td> &lt;/<span class="codeReserved">message</span>&gt;</td></tr>
  <tr><td>29</td><td> &lt;<span class="codeReserved">message</span> name=<span class="codeString">&quot;OutputGetPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>30</td><td>  &lt;<span class="codeReserved">part</span> name=<span class="codeString">&quot;body&quot;</span> element=<span class="codeString">&quot;xsd1:PrecioProd&quot;</span>/&gt;</td></tr>
  <tr><td>31</td><td> &lt;/<span class="codeReserved">message</span>&gt;</td></tr>
  <tr><td>32</td><td> &lt;<span class="codeReserved">portType</span> name=<span class="codeString">&quot;PortTypePrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>33</td><td>  &lt;<span class="codeReserved">operation</span> name=<span class="codeString">&quot;GetPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>34</td><td>   &lt;<span class="codeReserved">input</span> message=<span class="codeString">&quot;tns:InputGetPrecioProd&quot;</span>/&gt;</td></tr>
  <tr><td>35</td><td>   &lt;<span class="codeReserved">output</span> message=<span class="codeString">&quot;tns:OutputGetPrecioProd&quot;</span>/&gt;</td></tr>
  <tr><td>36</td><td>  &lt;/<span class="codeReserved">operation</span>&gt;</td></tr>
  <tr><td>37</td><td> &lt;/<span class="codeReserved">portType</span>&gt;</td></tr>
  <tr><td>38</td><td> &lt;<span class="codeReserved">binding</span> name=<span class="codeString">&quot;BindPrecioProdSoap&quot;</span> <span class="codeReserved">type</span>=<span class="codeString">&quot;tns:PortTypePrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>39</td><td>  &lt;<span class="codeReserved">soap</span>:binding style=<span class="codeString">&quot;document&quot;</span> transport=<span class="codeString">&quot;http:&#47;/schemas.xmlsoap.org/soap/http&quot;</span>/&gt;</td></tr>
  <tr><td>40</td><td>  &lt;<span class="codeReserved">operation</span> name=<span class="codeString">&quot;GetPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>41</td><td>   &lt;<span class="codeReserved">soap</span>:operation soapAction=<span class="codeString">&quot;http:&#47;/example.com/GetPrecioProd&quot;</span>/&gt;</td></tr>
  <tr><td>42</td><td>   &lt;<span class="codeReserved">input</span>&gt;</td></tr>
  <tr><td>43</td><td>    &lt;<span class="codeReserved">soap</span>:body use=<span class="codeString">&quot;literal&quot;</span>/&gt;</td></tr>
  <tr><td>44</td><td>   &lt;/<span class="codeReserved">input</span>&gt;</td></tr>
  <tr><td>45</td><td>   &lt;<span class="codeReserved">output</span>&gt;</td></tr>
  <tr><td>46</td><td>    &lt;<span class="codeReserved">soap</span>:body use=<span class="codeString">&quot;literal&quot;</span>/&gt;</td></tr>
  <tr><td>47</td><td>   &lt;/<span class="codeReserved">output</span>&gt;</td></tr>
  <tr><td>48</td><td>  &lt;/<span class="codeReserved">operation</span>&gt;</td></tr>
  <tr><td>49</td><td> &lt;/<span class="codeReserved">binding</span>&gt;</td></tr>
  <tr><td>50</td><td> &lt;<span class="codeReserved">service</span> name=<span class="codeString">&quot;ServPrecioProd&quot;</span>&gt;</td></tr>
  <tr><td>51</td><td>  &lt;<span class="codeReserved">documentation</span>&gt;Devuelve el precio de un producto.&lt;/<span class="codeReserved">documentation</span>&gt;</td></tr>
  <tr><td>52</td><td>  &lt;<span class="codeReserved">port</span> name=<span class="codeString">&quot;PuertoPrecioProd&quot;</span> binding=<span class="codeString">&quot;tns:BindPrecioProdSoap&quot;</span>&gt;</td></tr>
  <tr><td>53</td><td>   &lt;<span class="codeReserved">soap</span>:address location=<span class="codeString">&quot;http:&#47;/example.com/precioprod&quot;</span>/&gt;</td></tr>
  <tr><td>54</td><td>  &lt;/<span class="codeReserved">port</span>&gt;</td></tr>
  <tr><td>55</td><td> &lt;/<span class="codeReserved">service</span>&gt;</td></tr>
  <tr><td>56</td><td>&lt;/<span class="codeReserved">definitions</span>&gt;</td></tr>
 </tbody>
</table>
      </section>
      </section>
     <section >
         <h1 >J. <dfn>UDDI</dfn></h1><div class="lectura">
 <p><strong>Este estándar no se usa.</strong></p>
 <ul>
  <li>
   <p>
    Siglas del catálogo de negocios de Internet denominado
    <strong>Universal Description, Discovery and Integration</strong>.
   </p>
  </li>
  <li>
   <p>El registro en el catálogo se hace en XML.</p>
  </li>
  <li>
   <p>
    Es una iniciativa industrial abierta (sufragada por la OASIS) entroncada en
    el contexto de los servicios Web.
   </p>
  </li>
  <li>
   <p>El registro de un negocio en UDDI tiene tres partes:</p>
   <dl>
    <dt><dfn>Páginas blancas</dfn></dt>
    <dd>
     <p>dirección, contacto y otros identificadores conocidos.</p>
    </dd>
    <dt><dfn>Páginas amarillas</dfn></dt>
    <dd>
     <p>categorización industrial basada en taxonomías.</p>
    </dd>
    <dt><dfn>Páginas verdes</dfn></dt>
    <dd>
     <p>
      información técnica sobre los servicios que aportan las propias empresas.
     </p>
    </dd>
   </dl>
  </li>
  <li>
   <p>
    Es uno de los estándares básicos de los servicios web, cuyo objetivo es ser
    accedido por los mensajes SOAP y dar paso a documentos WSDL, en los que se
    describen los requisitos del protocolo y los formatos del mensaje solicitado
    para interactuar con los servicios Web del catálogo de registros.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://es.wikipedia.org/wiki/UDDI"
     target="_blank" rel="nooper">https://es.wikipedia.org/wiki/UDDI</a>
  </small>
 </p>
</div>
      </section>
     <section>
         <h1 >K. Introducción a REST</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m03soa/mJrest/m1defRest.html"><dfn>REST</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mJrest/m2dirsRest.html"><dfn>Solicitud HTTP</dfn></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m03soa/mJrest/m3metodosRes.html">Métodos de envío HTTP</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. <dfn>REST</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Siglas para
    <strong>Representational State Transfer</strong>
    o
    <em>transferencia de estado representacional</em>.
   </p>
  </li>
  <li>
   <p>
    Estilo de arquitectura de software para sistemas distribuidos en la World
    Wide Web.
   </p>
  </li>
 </ul>
 <p>
  <small>
   Fuentes:
   <a href="https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional"
     target="_blank"
     rel="nooper">https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional</a>
   y
   <a href="https://bbvaopen4u.com/es/actualidad/api-rest-que-es-y-cuales-son-sus-ventajas-en-el-desarrollo-de-proyectos"
     target="_blank"
     rel="nooper">https://bbvaopen4u.com/es/actualidad/api-rest-que-es-y-cuales-son-sus-ventajas-en-el-desarrollo-de-proyectos</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >2. <dfn>Solicitud HTTP</dfn></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Toda página web tiene una URL asociada, pero también puede representar una
    entidad, que puede ser una colección de datos, por ejemplo,
    <q>https://mirest.com/contactos</q>, o un objeto, por ejemplo,
    <q>https://mirest.com/contactos/69</q>.
   </p>
  </li>
  <li>
   <p>
    Para interactuar con la URL hay que enviarle una solicitud, que consta de:
   </p>
   <dl>
    <dt><dfn>URL</dfn>
    <dd>
     <p>
      Con parámetros opcionales que consisten en nombre y
      valor asociado, separados por & (como cuando buscas en Google).
     </p>
    </dd>
    <dt><dfn>conjunto de encabezados</dfn></dt>
    <dd>
     <p>
      Proporcionan información sobre la computadora y el programa que envían los
      datos, así como la informacion que esperan recibir.
     </p>
    </dd>
    <dt><dfn>cuerpo</dfn></dt>
    <dt><dfn>carga útil</dfn></dt>
    <dd>
     <p>
      Contiene datos adicionales,Pueden representarse en los siguientes
      formatos:
     </p>
     <ul>
      <li>
       <p>application/x-www-form-urlencoded</p>
      </li>
      <li>
       <p>multipart/form-data</p>
      </li>
      <li>
       <p>text/plain</p>
      </li>
      <li>
       <p>XML</p>
      </li>
      <li>
       <p>JSON</p>
      </li>
      <li>
       <p>YAML</p>
      </li>
     </ul>
    </dd>
    <dt><dfn>Método de envío</dfn></dt>
    <dd>
     <p>
      Indica la acción que debe realizarse sobre la URL, usando los datos
      adicionales.
     </p>
    </dd>
   </dl>
  </li>
 </ul>
 <p>
  <small>
   Fuente:
   <a href="https://developer.mozilla.org/es/docs/Web/HTTP/Methods" rel="nooper"
     target="_blank">https://developer.mozilla.org/es/docs/Web/HTTP/Methods</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >3. Métodos de envío HTTP</h1><div class="lectura">
 <dl>
  <dt><dfn>TRACE</dfn></dt>
  <dd>
   <p>
    Realiza una prueba de enviar un mensaje mensaje al servidor de la URL
    y recibirlo de regreso sin modificaciones.
   </p>
  </dd>
  <dt><dfn>OPTIONS</dfn></dt>
  <dd>
   <p>
    Devuelve una descripción de las opciones de comunicación de laURL.
   </p>
  </dd>
  <dt><dfn>CONNECT</dfn></dt>
  <dd>
   <p>
    Establece un tunel bidireccional hacia el servidor.
   </p>
  </dd>
  <dt><dfn>GET</dfn></dt>
  <dd>
   <p>
    Devuelve los datos de la colección u objeto asociados con la URL, sin
    modificar el estado del servidor.
   </p>
   <p>
    Puede tomarse en cuenta los parámetros que lleva la URL, como si
    fueran las condiciones de una cláusula WHERE de SQL.
   </p>
  </dd>
  <dt><dfn>HEAD</dfn></dt>
  <dd>
   <p>
    Devuelve una respuesta como la de GET, pero sin el cuerpo de la
    respuesta.
   </p>
  </dd>
  <dt><dfn>POST</dfn></dt>
  <dd>
   <p>Envía una entidad a una URL.</p>
   <p>
    Si la URL representa una lista que no contiene esa entidad, la agrega.
   </p>
   <p>
    Los datos de la entidad se indican en el cuerpo de la solicitud.
   </p>
   <p>
    A menudo causa un cambio o efectos secundarios en el servidor.
   </p>
  </dd>
  <dt><dfn>PUT</dfn></dt>
  <dd>
   <p>
    Reemplaza toda la entidad indicada en la URL con el contenido del
    cuerpo de la solicitud.
   </p>
  </dd>
  <dt><dfn>PATCH</dfn></dt>
  <dd>
   <p>
    Modifica parcialmente la entidad de la URL, modificando solamente los
    datos enviados en el cuerpo de la solicitud.
   </p>
  </dd>
  <dt><dfn>DELETE</dfn></dt>
  <dd>
   <p>Eliminar la entidad de la URL</p>
  </dd>
 </dl>
 <p>
  <small>
   Fuente:
   <a href="https://developer.mozilla.org/es/docs/Web/HTTP/Methods" rel="nooper"
     target="_blank">https://developer.mozilla.org/es/docs/Web/HTTP/Methods</a>
  </small>
 </p>
</div>
      </section>
      </section>
     <section >
         <h1 >L. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>En esta lección se introdujeron los siguientes temas:</p>
   <ul>
    <li>
     <p>Arquitectura orientada a servicios</p>
    </li>
    <li>
     <p>Ventajas de una arquitectura orientada a servicios</p>
    </li>
    <li>
     <p>Principios de diseño de un servici</p>
    </li>
    <li>
     <p>Capas de una arquitectura orientada a servicios</p>
    </li>
    <li>
     <p>Diagrama de Arquitectura</p>
    </li>
    <li>
     <p>XML</p>
    </li>
    <li>
     <p>SOAP</p>
    </li>
    <li>
     <p>WSDL</p>
    </li>
    <li>
     <p>UDDI</p>
    </li>
    <li>
     <p>REST</p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section >
         <h1 >6. Ejemplo de geolocalización</h1><iframe src="/src/m04geolocalizacion/maps.html" height="550"></iframe>
<p class="noPrint">
 <a href="/src/m04geolocalizacion/maps.html" target="_blank"
   rel="nooper">Ábrelo en otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Maps<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Maps<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7526.355841517565!2d-98.98640932835467!3d19.40471709504528!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1e319b9413c4f%3A0x1d391ad53ddf65d1!2sUniversidad%20Tecnol%C3%B3gica%20de%20Nezahualc%C3%B3yotl!5e0!3m2!1ses-419!2smx!4v1574352931317!5m2!1ses-419!2smx"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"600"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"450"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">border:0;</span><span
     style="color: #0000ff;">"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allowfullscreen</span>=<span
     style="color: #0000ff;">""</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. Ejemplo de redes sociales</h1><div class="lectura">
 <p>
  Generado en
  <a href="https://developers.facebook.com/docs/plugins/page-plugin/"
    target="_blank">https://developers.facebook.com/docs/plugins/page-plugin/</a>
 </p>
</div>
<iframe src="/src/m05sociales/face.html" height="600"></iframe>
<p class="noPrint">
 <a href="/src/m05sociales/face.html" target="_blank" rel="nooper">Ábrelo en
  otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Face<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>Face<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Ffacebook&amp;tabs=timeline&amp;width=340&amp;height=500&amp;small_header=false&amp;adapt_container_width=true&amp;hide_cover=false&amp;show_facepile=true&amp;appId=437040163649483"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"340"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"500"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">border:none;overflow:hidden</span><span
     style="color: #0000ff;">"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">scrolling</span>=<span
     style="color: #0000ff;">"no"</span> <span
     style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span
     style="color: #ff0000;">allowTransparency</span>=<span
     style="color: #0000ff;">"true"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allow</span>=<span
     style="color: #0000ff;">"encrypted-media"</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >8. Características de un e-commerce</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m06ecommerce/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mAfacilidad.html">Facilidad de navegación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mBnoDestaca.html">El diseño no destaca por encima de los productos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mCfacil.html">Fácil proceso de compra</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mDpopulares.html">Exhibir los productos más populares</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mEdetalle.html">Fotos de productos a detalle</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m06ecommerce/mFresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <p>
  En esta lección se presentan las características principales de un e-commerce.
 </p>
 <p>
  <small>
   Fuente:
   <a href="https://www.actualidadecommerce.com/las-5-principales-caracteristicas-de-un-sitio-ecommerce-bien-disenado/"
     target="_blank"
     rel="nooper">https://www.actualidadecommerce.com/las-5-principales-caracteristicas-de-un-sitio-ecommerce-bien-disenado/</a>
  </small>
 </p>
</div>
      </section>
     <section >
         <h1 >B. Facilidad de navegación</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Cuando se trata de vender productos, el primer requisito a cumplir para una
    tienda e-commerce es que el comprador tiene que ser capaz de encontrar
    rápida y de forma especifica, lo que el o ella están buscando. Una
    navegación eficaz es fundamental para los sitios e-commerce ya que los
    visitantes que no pueden encontrar lo que buscan se traducen en ventas
    perdidas.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. El diseño no destaca por encima de los productos</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En un negocio e-commerce, el foco de atención siempre debe estar en los
    productos que están disponibles para su compra. Un diseño que es
    extravagante sin sentido, generalmente hace más daño que beneficio, puesto
    que al final, el diseño no es lo que se vende, sino los productos.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. Fácil proceso de compra</h1><div class="lectura">
 <ul>
  <li>
   <p>
    La experiencia del usuario en sitios de comercio electrónico es fundamental
    para el éxito. Es decir, si el proceso de compra implica demasiados pasos o
    incluso es confuso, los compradores simplemente terminarán abandonando su
    carrito de compras. Por ello, el checkout siempre debe implicar la mínima
    cantidad de pasos y debe ser lo más fácil e intuitivo para los compradores.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. Exhibir los productos más populares</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Muchos negocios e-commerce se esfuerzan por mostrar los elementos que pueden
    ser de interés para los potenciales compradores. Un gran número de sitios de
    comercio electrónico están utilizando espacios muy amplios en la página de
    inicio para promover las ventas actuales, el lanzamiento de un nuevo
    producto o lo que sea que genere interés.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. Fotos de productos a detalle</h1><div class="lectura">
 <ul>
  <li>
   <p>
    La venta de productos en Internet es diferente de vender en una tienda
    física porque el comprador no puede tocar o ver en persona el producto antes
    de tomar la decisión de compra. Al ofrecer fotos de los productos que
    resaltan a detalle las características principales del mismo, se consigue
    superar ese inconveniente y se hace más fácil para el comprador decidir si
    conviene o no comprar el producto.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >G. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentaron las características principales de un
    e-commerce:
   </p>
   <ul>
    <li>
     <p>
      Facilidad de navegación.
     </p>
    </li>
    <li>
     <p>
      El diseño no destaca por encima de los productos.
     </p>
    </li>
    <li>
     <p>
      El diseño no destaca por encima de los productos.
     </p>
    </li>
    <li>
     <p>
      Fácil proceso de compra.
     </p>
    </li>
    <li>
     <p>
      Exhibir los productos más populares.
     </p>
    </li>
    <li>
     <p>
      Fotos de productos a detalle.
     </p>
    </li>
   </ul>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >9. Servicio que devuelve un resultado JSON</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/">Funcionamiento del servicio que devuelve JSON</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-corto-html.html">corto.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mHresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <p>
  Este ejemplo recibe los datos JSON generados por un servicio.
 </p>
 <p>
  Puedes probar el ejemplo en
  <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvresultado?v=1"
    target="_blank">https://replit.com/@GilbertoPachec5/srvresultado?v=1</a>.
  Hazle fork al proyecto y córrelo.
 </p>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m08srvresultado/srvresultadodistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section>
         <h1 >C. Funcionamiento del servicio que devuelve JSON</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m1cliente.html">Iniciamos al ejecutar código en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m2servidor.html">Se invoca el servicio en el servidor</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m3procesa.html">El servicio procesa la request y genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m4devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m5muestra.html">Muestra el objeto recibido en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/mCfunRecibe/m6termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. Iniciamos al ejecutar código en el cliente</h1><section>
 <h1>index.html</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">json</span> = <span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;<span
      style="color: #a31515;">"srv/srvResultado.php"</span>)</div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></div>
   <div><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</div>
  </div>
 </muestra-codigo>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se invoca el servicio en el servidor</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">json</span> = <mark class="resaltado"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #a31515;">"srv/srvResultado.php"</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></div>
   <div><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Ejecuta fetch y envía request (solicitud).</p>
</section>
<section style="vertical-align: top;">
 <h1>Request</h1>
 <dl class="resaltado">
  <dt>URL</dt>
  <dd>
   <a rel="noopener"
     href="https://srvresultado.gilbertopachec5.repl.co/srv/srvResultado.php"
     target="_blank">srvResultado.php</a>
  </dd>
  <dt>Method</dt>
  <dd>GET</dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvResultado.php</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span style="color: #af00db;">return</span> [</div>
   <div>&nbsp;<span style="color: #a31515;">"nombre"</span> =&gt; <span
      style="color: #a31515;">"pp"</span>,</div>
   <div>&nbsp;<span style="color: #a31515;">"mensaje"</span> =&gt; <span
      style="color: #a31515;">"Hola."</span></div>
   <div>];</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despierta y recibe request.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. El servicio procesa la request y genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">json</span> = <mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado3">&nbsp;<span
       style="color: #a31515;">"srv/srvResultado.php"</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></div>
   <div><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvResultado.php</h1>
 <muestra-codigo>
  <div>
   <div><span class="resaltado"><span
       style="color: #af00db;">return</span> [</span></div>
   <div><span class="resaltado">&nbsp;<span
       style="color: #a31515;">"nombre"</span> =&gt; <span
       style="color: #a31515;">"pp"</span>,</span></div>
   <div><span class="resaltado">&nbsp;<span
       style="color: #a31515;">"mensaje"</span> =&gt; <span
       style="color: #a31515;">"Hola."</span></span></div>
   <div><span class="resaltado">];</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Procesa la request y genera response (respuesta).</p>
</section>
<section style="vertical-align: top; overflow-wrap: anywhere;">
 <h1>Response</h1>
 <dl class="resaltado">
  <dt>code</dt>
  <dd>200</dd>
  <dt>contenido</dt>
  <dd>{"nombre":"pp","mensaje":"Hola."}</dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><mark class="resaltado"><span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">json</span> = <span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #a31515;">"srv/srvResultado.php"</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></div>
   <div><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despiesta y recibe response.</p>
</section>
<section style="vertical-align: top; overflow-wrap: anywhere;">
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>{"nombre":"pp","mensaje":"Hola."}</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl class="resaltado">
   <dt>json</dt>
   <dd>
    <dl>
     <dt>nombre</dt>
     <dd>"pp"</dd>
     <dt>mensaje</dt>
     <dd>"Hola."</dd>
    </dl>
   </dd>
  </dl>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>srvResultado.php</h1>
 <muestra-codigo>
  <div>
   <div><span class="resaltado3"><span
       style="color: #af00db;">return</span> [</span></div>
   <div><span class="resaltado3">&nbsp;<span
       style="color: #a31515;">"nombre"</span> =&gt; <span
       style="color: #a31515;">"pp"</span>,</span></div>
   <div><span class="resaltado3">&nbsp;<span
       style="color: #a31515;">"mensaje"</span> =&gt; <span
       style="color: #a31515;">"Hola."</span></span></div>
   <div><span class="resaltado3">];</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. Muestra el objeto recibido en un alert</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">json</span> = <span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;<span
      style="color: #a31515;">"srv/srvResultado.php"</span>)</div>
   <div><mark class="resaltado"><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></mark></div>
   <div><mark class="resaltado"><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</mark></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl class="resaltado">
  <dt>json</dt>
  <dd>
   <dl>
    <dt>nombre</dt>
    <dd>"pp"</dd>
    <dt>mensaje</dt>
    <dd>"Hola."</dd>
   </dl>
  </dd>
 </dl>
</section>
<section>
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>Nombre: pp<br>Mensaje: Hola.</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
 </div>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. Al cerrar el alert, termina el evento</h1><section style="vertical-align: middle;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">json</span> = <span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;<span
      style="color: #a31515;">"srv/srvResultado.php"</span>)</div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">`Nombre: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">nombre</span><span
      style="color: #0000ff;">}</span></div>
   <div><span
      style="color: #a31515;">Mensaje: </span><span
      style="color: #0000ff;">${</span><span
      style="color: #0070c1;">json</span>.<span
      style="color: #001080;">mensaje</span><span
      style="color: #0000ff;">}</span><span
      style="color: #a31515;">`</span>)</div>
  </div>
 </muestra-codigo>
</section>
      </section>
      </section>
     <section >
         <h1 >D. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m08srvresultado/srvresultado.zip" download>Descarga el
     ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvresultado?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvresultado?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >E. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-corto-html.html">corto.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvResultado-php.html">srvResultado.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span> Servicio que devuelve un
   resultado (Separado)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que devuelve un resultado
   (Separado)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"corto.html"</span><span
     style="color: #800000;">&gt;</span>Versión corta<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">resultado</span><span
     style="color: #0000ff;">()"</span><span
     style="color: #800000;">&gt;</span>Resultado<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/ejecuta.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraError</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">resultado</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">json</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">ejecuta</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"srv/srvResultado.php"</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">`Nombre: </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">json</span>.<span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span></div>
  <div><span
     style="color: #a31515;">Mensaje: </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">json</span>.<span
     style="color: #001080;">mensaje</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">`</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"resultado"</span>] = <span
     style="color: #795e26;">resultado</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. corto.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span> Servicio que devuelve un
   resultado (Corto)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que devuelve un resultado
   (Corto)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Versión separada<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvResultado.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">`Nombre: </span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">json</span>.<span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span></div>
  <div>Mensaje<span
     style="color: #0000ff;">: ${</span><span
     style="color: #001080;">json</span>.<span
     style="color: #001080;">mensaje</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">`))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Resultado</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >H. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/m-srv/m-srvResultado-php.html">srv / srvResultado.php</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. srv / srvResultado.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"pp"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"mensaje"</span> =&gt; <span
     style="color: #a31515;">"Hola."</span></div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >I. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >J. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m08srvdevuelve/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >K. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el funcionamiento de un ejemplo recibe los datos
    JSON generados por un servicio.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >10. Servicio que recibe y devuelve JSON</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m09srvjson/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mBenviaJson.html">La función <code>enviaJson</code></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mCleeJson.html">La función <code>leeJson</code></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mDdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/">Funcionamiento del ejemplo que recibe y devuelve JSON</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mFinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-corto-html.html">corto.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mSresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejemplo envía y recibe datos JSON.
   </p>
  </li>
  <li>
   <p>
    Muchos servicios de Internet utilizan esta forma de comunicación.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvjson?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvjson?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. La función <code>enviaJson</code></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Se introduce la función <code>enviaJson</code>, que convierte un dato en una
    cadena JSON y la manda desde el navegador web hacia el servidor.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importar el archivo donde está definida esta función y
    luego invocarla pasándole la URL, los datos y el método de envío, que por
    omisión es POST.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección, se profundiza en el uso y estructura de esta
    función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. La función <code>leeJson</code></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para que los servicios en el servidor puedan leer un texto en formato
    JSON, se introduce la función <code>leeJson</code>, escrita en PHP.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importarla con <code>require</code> o
    <code>require_once</code>, invocarla y recibir la referencia al objeto
    recibido.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección, se profundiza en el uso y estructura de esta
    función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m09srvjson/srvjsondistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section>
         <h1 >E. Funcionamiento del ejemplo que recibe y devuelve JSON</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m1cliente.html">Iniciamos al ejecutar código en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m2acreaJson.html">Se crea la literal de objeto</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m3servicio.html">Se invoca el servicio en el servidor</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m4aleeDatos.html">El servicio lee los datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m5aprocesaDatos.html">El servicio procesa los datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m6response.html">El servicio genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m7devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m8muestra.html">Muestra el valor recibido recibido en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/mEfunJson/m9termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. Iniciamos al ejecutar código en el cliente</h1><section>
 <h1>index.html</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">enviaJson</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvJson.php"</span>, <span
      style="color: #0070c1;">datos</span>)</div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se crea la literal de objeto</h1><section>
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><mark class="resaltado"><span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">datos</span> =&nbsp;{</mark></div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #001080;">saludo</span><span
       style="color: #001080;">:</span> <span
       style="color: #a31515;">"Hola"</span>,</mark></div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #001080;">nombre</span><span
       style="color: #001080;">:</span> <span
       style="color: #a31515;">"pp"</span></mark></div>
   <div><mark class="resaltado">}</mark></div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">enviaJson</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvJson.php"</span>, <span
      style="color: #0070c1;">datos</span>)</div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl class="resaltado">
  <dt>datos</dt>
  <dd>
    <dl>
     <dt>saludo</dt>
     <dd>"Hola"</dd>
     <dt>nombre</dt>
     <dd>"pp"</dd>
    </dl>
  </dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. Se invoca el servicio en el servidor</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<mark class="resaltado"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">enviaJson</span>(</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #a31515;">"srv/srvJson.php"</span>, <span
       style="color: #0070c1;">datos</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Ejecuta fetch y envía request (solicitud).</p>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl>
   <dt>datos</dt>
   <dd>
    <dl>
     <dt>saludo</dt>
     <dd>"Hola"</dd>
     <dt>nombre</dt>
     <dd>"pp"</dd>
    </dl>
   </dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Request</h1>
  <dl class="resaltado" style="overflow-wrap: anywhere;">
   <dt>URL</dt>
   <dd>
    <a rel="noopener"
      href="https://srvjson.gilbertopachec5.repl.co/srv/srvJson.php"
      target="_blank">srvJson.php</a>
   </dd>
   <dt>Method</dt>
   <dd>POST</dd>
   <dt>body</dt>
   <dd>
    {"saludo":"Hola","nombre":"pp"}
   </dd>
  </dl>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>srvJson.php</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #001080;">$json</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeJson</span><span
      style="color: #000000;">();</span></div>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">saludo</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">nombre</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despierta y recibe request.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio lee los datos</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">enviaJson</span>(</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvJson.php"</span>, <span
       style="color: #0070c1;">datos</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl>
  <dt>datos</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>"Hola"</dd>
    <dt>nombre</dt>
    <dd>"pp"</dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvJson.php</h1>
 <muestra-codigo>
  <div>
   <div><mark class="resaltado"><span
       style="color: #001080;">$json</span><span
       style="color: #000000;"> = </span><span
       style="color: #795e26;">leeJson</span><span
       style="color: #000000;">();</span></mark></div>
   <div><mark class="resaltado"><span
       style="color: #001080;">$saludo</span><span
       style="color: #000000;"> = </span><span
       style="color: #001080;">$json</span><span
       style="color: #000000;">-&gt;</span><span
       style="color: #001080;">saludo</span><span
       style="color: #000000;">;</span></mark></div>
   <div><mark class="resaltado"><span
       style="color: #001080;">$nombre</span><span
       style="color: #000000;"> = </span><span
       style="color: #001080;">$json</span><span
       style="color: #000000;">-&gt;</span><span
       style="color: #001080;">nombre</span><span
       style="color: #000000;">;</span></mark></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: middle;">
 <section style="display: block;">
  <h1>Request</h1>
  <dl style="padding: 0.5rem; overflow-wrap: anywhere;">
   <dt>URL</dt>
   <dd>
    <a rel="noopener"
      href="https://srvjson.gilbertopachec5.repl.co/srv/srvJson.php"
      target="_blank">srvJson.php</a>
   </dd>
   <dt>Method</dt>
   <dd>POST</dd>
   <dt class="resaltado">body</dt>
   <dd class="resaltado">
    {"saludo":"Hola","nombre":"pp"}
   </dd>
   </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria (Servidor)</h1>
  <dl class="resaltado">
   <dt>$json</dt>
   <dd>
    <dl>
     <dt>saludo</dt>
     <dd>"Hola"</dd>
     <dt>nombre</dt>
     <dd>"pp"</dd>
    </dl>
   </dd>
   <dt>$saludo</dt>
   <dd>"Hola"</dd>
   <dt>$nombre</dt>
   <dd>"pp"</dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. El servicio procesa los datos</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">enviaJson</span>(</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvJson.php"</span>, <span
       style="color: #0070c1;">datos</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl>
  <dt>datos</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>"Hola"</dd>
    <dt>nombre</dt>
    <dd>"pp"</dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvJson.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #001080;">$json</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeJson</span><span
      style="color: #000000;">();</span></div>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">saludo</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">nombre</span><span
      style="color: #000000;">;</span></div>
   <div><mark class="resaltado"><span
       style="color: #001080;">$resultado</span><span
       style="color: #000000;"> =</span></mark></div>
   <div><mark class="resaltado"><span
       style="color: #000000;">&nbsp;</span><span
       style="color: #a31515;">"{</span><span
       style="color: #001080;">$saludo</span><span
       style="color: #a31515;">}&nbsp;{</span><span
       style="color: #001080;">$nombre</span><span
       style="color: #a31515;">}."</span><span
       style="color: #000000;">;</span></mark></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria (Servidor)</h1>
 <dl>
  <dt>$json</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>"Hola"</dd>
    <dt>nombre</dt>
    <dd>"pp"</dd>
   </dl>
  </dd>
  <dt>$saludo</dt>
  <dd>"Hola"</dd>
  <dt>$nombre</dt>
  <dd>"pp"</dd>
  <dt class="resaltado">$resultado</dt>
  <dd class="resaltado">"Hola pp."</dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. El servicio genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">enviaJson</span>(</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvJson.php"</span>, <span
       style="color: #0070c1;">datos</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl>
  <dt>datos</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>"Hola"</dd>
    <dt>nombre</dt>
    <dd>"pp"</dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvJson.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #001080;">$json</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeJson</span><span
      style="color: #000000;">();</span></div>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">saludo</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">nombre</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><mark class="resaltado"><span
       style="color: #af00db;">return</span><span
       style="color: #000000;"> </span><span
       style="color: #001080;">$resultado</span><span
       style="color: #000000;">;</span></mark></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Memoria (Servidor)</h1>
  <dl>
   <dt>$json</dt>
   <dd>
    <dl>
     <dt>saludo</dt>
     <dd>"Hola"</dd>
     <dt>nombre</dt>
     <dd>"pp"</dd>
    </dl>
   </dd>
   <dt>$saludo</dt>
   <dd>"Hola"</dd>
   <dt>$nombre</dt>
   <dd>"pp"</dd>
   <dt class="resaltado">$resultado</dt>
   <dd class="resaltado">"Hola pp."</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>"Hola pp."</dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >7. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><mark class="resaltado"><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</mark></div>
   <div>&nbsp;<mark class="resaltado"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">enviaJson</span>(</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #a31515;">"srv/srvJson.php"</span>, <span
       style="color: #0070c1;">datos</span>)</mark></div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despiesta y recibe response.</p>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>"Hola pp."</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl>
   <dt>datos</dt>
   <dd>
    <dl>
     <dt>saludo</dt>
     <dd>"Hola"</dd>
     <dt>nombre</dt>
     <dd>"pp"</dd>
    </dl>
   </dd>
   <dt class="resaltado">resultado</dt>
   <dd class="resaltado">"Hola pp."</dd>
  </dl>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>srvJson.php</h1>
 <muestra-codigo class="resaltado3">
  <div>
   <div><span
      style="color: #001080;">$json</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeJson</span><span
      style="color: #000000;">();</span></div>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">saludo</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #001080;">$json</span><span
      style="color: #000000;">-&gt;</span><span
      style="color: #001080;">nombre</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >8. Muestra el valor recibido recibido en un alert</h1><section style="vertical-align: middle;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">enviaJson</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvJson.php"</span>, <span
      style="color: #0070c1;">datos</span>)</div>
   <div><mark class="resaltado"><span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</mark></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: middle;">
 <h1>Memoria</h1>
 <dl>
  <dt>datos</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>"Hola"</dd>
    <dt>nombre</dt>
    <dd>"pp"</dd>
   </dl>
  </dd>
  <dt class="resaltado">resultado</dt>
  <dd class="resaltado">"Hola pp."</dd>
 </dl>
</section>
<section>
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>Hola pp.</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
 </div>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >9. Al cerrar el alert, termina el evento</h1><section style="vertical-align: middle;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">datos</span> =&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #001080;">saludo</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"Hola"</span>,</div>
   <div>&nbsp;<span
      style="color: #001080;">nombre</span><span
      style="color: #001080;">:</span> <span
      style="color: #a31515;">"pp"</span></div>
   <div>}</div>
   <div><span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">enviaJson</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvJson.php"</span>, <span
      style="color: #0070c1;">datos</span>)</div>
   <div><span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
  </div>
 </muestra-codigo>
</section>
      </section>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m09srvjson/srvjson.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvjson?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvjson?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1>
  <div class="lectura">
   <p>Haz clic en los triángulos para expandir las carpetas</p>
   <ul class="tree">
  <li>
   <p><a href="m-corto-html.html">corto.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
    <li>
     <details>
      <summary>lib</summary>
      <ul>
    <li>
     <details>
      <summary>js</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-enviaJson-js.html">enviaJson.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>php</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeJson-php.html">leeJson.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>srv</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-srvJson-php.html">srvJson.php</a></p>
  </li>
      </ul>
     </details>
    </li>
   </ul>
  </div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que recibe y devuelve
   JSON (Separado)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que recibe y devuelve
   JSON (Separado)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"corto.html"</span><span
     style="color: #800000;">&gt;</span>Versión corta<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">envia</span><span
     style="color: #0000ff;">()"</span><span
     style="color: #800000;">&gt;</span>Envía JSON<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraError</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">enviaJson</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/enviaJson.js"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">envia</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">datos</span> =&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">saludo</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"Hola"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">nombre</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"pp"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">resultado</span> =</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">enviaJson</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"srv/srvJson.php"</span>, <span
     style="color: #0070c1;">datos</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #0070c1;">resultado</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"envia"</span>] = <span
     style="color: #795e26;">envia</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. corto.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que recibe y devuelve
   JSON (Corto)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/enviaJson.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que recibe y devuelve
   JSON (Corto)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Versión separada<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">datos</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">saludo</span><span
     style="color: #0000ff;">: </span><span
     style="color: #a31515;">'Hola'</span><span
     style="color: #0000ff;">,</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">: </span><span
     style="color: #a31515;">'pp'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">enviaJson</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvJson.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #0070c1;">datos</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Envía JSON</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >J. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m09srvjson/m-srv/m-srvJson-php.html">srv / srvJson.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvJson.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span>&nbsp;&nbsp;<span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeJson.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">leeJson</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$saludo</span> = <span
     style="color: #001080;">$json</span>-&gt;<span
     style="color: #001080;">saludo</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #001080;">$json</span>-&gt;<span
     style="color: #001080;">nombre</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> =</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"{</span><span
     style="color: #001080;">$saludo</span><span
     style="color: #a31515;">}&nbsp;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}."</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >K. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >L. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-js/m-enviaJson-js.html">lib / js / enviaJson.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / enviaJson.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Object }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">datos</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">enviaJson</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">datos</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">headers</span><span
     style="color: #001080;">:</span>&nbsp;{ <span
     style="color: #a31515;">"Content-Type"</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"application/json"</span> },</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">stringify</span>(<span
     style="color: #001080;">datos</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"enviaJson"</span>] = <span
     style="color: #795e26;">enviaJson</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m09srvjson/m-lib/m-php/m-leeJson-php.html">lib / php / leeJson.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeJson.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeJson</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">json_decode</span>(<span
     style="color: #795e26;">file_get_contents</span>(<span
     style="color: #a31515;">"php://input"</span>));</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >M. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró un ejemplo que envía JSON a un servicio y, como
    respuesta, recibe datos JSON de ese mismo servicio.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >11. Servicio que procesa una forma</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m10form/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mBsubmit.html">La función <code>submitForma</code></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mCleeTexto.html">La función <code>leeTexto</code></a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mDdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/">Ejemplo que procesa forma con error</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/">Ejemplo que procesa forma con éxito</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mGinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-corto-html.html">corto.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejemplo muestra como procesar el contenido de una forma usando
    servicios.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvform?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvform?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. La función <code>submitForma</code></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Se introduce la función <code>submitForma</code>, que permite enviar los
    datos capturados en un formulario hacia una URL.
   </p>
  </li>
  <li>
   <p>
    Se utiliza el formato <q>mutipart/form-data</q>, lo cual permite transmitir
    el contenido de archivos.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importar el archivo donde está definida esta función y
    luego invocarla pasándole el evento generado al hacer submit a la forma, la
    URL del servicio que precesa los datos, la forma con los datos capturados y
    el método de envío, que por omisión es POST.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección y las siguientes, se profundiza en el uso y
    estructura de esta función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. La función <code>leeTexto</code></h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para que los servicios en el servidor puedan leer los datos tipo texto
    enviados por un formulario, por cookies o parámetros en la URL, se introduce
    la función <code>leeTexto</code>, escrita en PHP.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importarla con <code>require</code> o
    <code>require_once</code>, invocarla pasándole el nombre del parámetro o
    campo que deseas leer y recibir el texto resultante. Si el nombre no está
    incluido en la solicitud, se recibe un texto vacío.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección y las siguientes, se profundiza en el uso y
    estructura de esta función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m10form/srvformdistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section>
         <h1 >E. Ejemplo que procesa forma con error</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m1captura.html">El usuario activa la forma sin capturar datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m2submit.html">Se activa el código del evento submit.</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m3invoca.html">Se invoca el servicio, incluyendo los datos de la forma</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m4leeDatos.html">El servicio lee los datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m5validaDatos.html">El servicio valida que el saludo no sea un texto vacío</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m6aborta.html">Como el saludo está en blanco, aborta y genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m7devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m8throwCliente.html">Como hay error, lanza una excepción que atrapa catch</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m9muestra.html">Muestra la excepción en la consola y el texto de la excepción en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mEfunFormError/m10termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. El usuario activa la forma sin capturar datos</h1><section>
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;" class="resaltado"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se activa el código del evento submit.</h1><section style="vertical-align: middle;">
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
 <section style="display: block;">
  <h1>index.html</h1>
  <muestra-codigo class="resaltado">
   <div>
    <div><span
       style="color: #af00db;">try</span>&nbsp;{</div>
    <div> <span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">resultado</span> =</div>
    <div>&nbsp;&nbsp;<span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</div>
    <div>&nbsp;&nbsp;&nbsp;<span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
    <div>&nbsp;&nbsp;&nbsp;<span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</div>
    <div> <span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</div>
    <div>}&nbsp;<span
       style="color: #af00db;">catch</span> (<span
       style="color: #001080;">error</span>)&nbsp;{</div>
    <div> <span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</div>
    <div>}</div>
   </div>
  </muestra-codigo>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. Se invoca el servicio, incluyendo los datos de la forma</h1><section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
 <section style="display: block;">
  <h1>index.html</h1>
  <muestra-codigo>
   <div>
    <div><span
       style="color: #af00db;">try</span>&nbsp;{</div>
    <div> <span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">resultado</span> =</div>
    <div>&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #af00db;">await</span> <span
        style="color: #795e26;">submitForma</span>(</mark></div>
    <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
    <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #001080;">event</span>, <span
        style="color: #001080;">forma</span>)</mark></div>
    <div> <span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</div>
    <div>}&nbsp;<span
       style="color: #af00db;">catch</span> (<span
       style="color: #001080;">error</span>)&nbsp;{</div>
    <div> <span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</div>
    <div>}</div>
   </div>
  </muestra-codigo>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>Request</h1>
 <dl class="resaltado">
  <dt>URL</dt>
  <dd>
   <a rel="noopener"
     href="https://srvform.gilbertopachec5.repl.co/srv/srvProcesa.php"
     target="_blank">srvProcesa.php</a>
  </dd>
  <dt>Method</dt>
  <dd>POST</dd>
  <dt>body</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd><em>vacío</em></dd>
    <dt>nombre</dt>
    <dd><em>vacío</em></dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despierta y recibe request.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio lee los datos</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span class="resaltado"><span
       style="color: #001080;">$saludo</span><span
       style="color: #000000;"> = </span><span
       style="color: #795e26;">leeTexto</span><span
       style="color: #000000;">(</span><span
       style="color: #a31515;">"saludo"</span><span
       style="color: #000000;">);</span></span></div>
   <div><span class="resaltado"><span
       style="color: #001080;">$nombre</span><span
       style="color: #000000;"> = </span><span
       style="color: #795e26;">leeTexto</span><span
       style="color: #000000;">(</span><span
       style="color: #a31515;">"nombre"</span><span
       style="color: #000000;">);</span></span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Request</h1>
  <dl>
   <dt>URL</dt>
   <dd>
    <a rel="noopener"
      href="https://srvform.gilbertopachec5.repl.co/srv/srvProcesa.php"
      target="_blank">srvProcesa.php</a>
   </dd>
   <dt>Method</dt>
   <dd>POST</dd>
   <dt>body</dt>
   <dd>
    <dl>
     <dt class="resaltado">saludo</dt>
     <dd class="resaltado"><em>vacío</em></dd>
     <dt class="resaltado">nombre</dt>
     <dd class="resaltado"><em>vacío</em></dd>
    </dl>
   </dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria (Servidor)</h1>
  <dl class="resaltado">
   <dt>$saludo</dt>
   <dd>""</dd>
   <dt>$nombre</dt>
   <dd>""</dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. El servicio valida que el saludo no sea un texto vacío</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span class="resaltado"><span
       style="color: #af00db;">if</span><span
       style="color: #000000;"> (</span><span
       style="color: #001080;">$saludo</span><span
       style="color: #000000;"> === </span><span
       style="color: #a31515;">""</span><span
       style="color: #000000;">)&nbsp;{</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria (Servidor)</h1>
 <dl>
  <dt class="resaltado">$saludo</dt>
  <dd class="resaltado">""</dd>
  <dt>$nombre</dt>
  <dd>""</dd>
 </dl>
</section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. Como el saludo está en blanco, aborta y genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span class="resaltado"><span
       style="color: #af00db;">throw</span><span
       style="color: #000000;"> </span><span
       style="color: #0000ff;">new</span><span
       style="color: #000000;"> </span><span
       style="color: #267f99;">Exception</span><span
       style="color: #000000;">(</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span class="resaltado"><span
       style="color: #a31515;">"Falta el saludo"</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Response</h1>
 <dl class="resaltado">
  <dt>code</dt>
  <dd>500</dd>
  <dt>contenido</dt>
  <dd>Falta el saludo</dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >7. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despiesta y recibe response.</p>
</section>
<section style="vertical-align: top;">
 <h1>Response</h1>
 <dl class="resaltado" style="padding: 0.5rem;">
  <dt>code</dt>
  <dd>500</dd>
  <dt>contenido</dt>
  <dd>Falta el saludo</dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo class="resaltado3">
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >8. Como hay error, lanza una excepción que atrapa catch</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">submitForma</span>(</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #001080;">event</span>, <span
      style="color: #001080;">forma</span>)</div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<mark class="resaltado"><span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</mark></div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Response</h1>
  <dl style="padding: 0.5rem;">
   <dt>code</dt>
   <dd>500</dd>
   <dt>contenido</dt>
   <dd>Falta el saludo</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl class="resaltado">
   <dt>error</dt>
   <dd>
    <dl>
     <dt>message</dt>
     <dd>"Falta el saludo"</dd>
    </dl>
   </dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >9. Muestra la excepción en la consola y el texto de la excepción en un alert</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">submitForma</span>(</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #001080;">event</span>, <span
      style="color: #001080;">forma</span>)</div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <mark class="resaltado"><span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</mark></div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl class="resaltado">
  <dt>error</dt>
  <dd>
   <dl>
    <dt>message</dt>
    <dd>"Falta el saludo"</dd>
   </dl>
  </dd>
 </dl>
</section>
<section>
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>Falta el saludo</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
 </div>
</section>
<section>
 <h1>Consola</h1>
 <muestra-codigo class="resaltado">
  <div>Error: Falta el saludo</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at ejecuta (ejecuta.js:24:9)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at async procesaForma ((índice):50:6)</div>
 </muestra-codigo>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >10. Al cerrar el alert, termina el evento</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">submitForma</span>(</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #001080;">event</span>, <span
      style="color: #001080;">forma</span>)</div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section>
 <h1>Consola</h1>
 <muestra-codigo>
  <div>Error: Falta el saludo</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at ejecuta (ejecuta.js:24:9)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at async procesaForma ((índice):50:6)</div>
 </muestra-codigo>
</section>
      </section>
      </section>
     <section>
         <h1 >F. Ejemplo que procesa forma con éxito</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m1captura.html">El usuario captura datos y activa la forma</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m2submit.html">Se activa el código del evento submit.</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m3invoca.html">Se invoca el servicio, incluyendo los datos de la forma</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m4leeDatos.html">El servicio lee los datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m5validaSaludo.html">El servicio valida que el saludo no sea un texto vacío</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m6validaNombre.html">Como el saludo no está vacío, el servicio valida que el nombre no sea un texto vacío</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m7procesaDatos.html">Como el nombre no está vacío, el servicio procesa los datos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m8response.html">El servicio genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m9devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m10muestra.html">Muestra el texto recibido en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/mFfunFormOk/m11termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. El usuario captura datos y activa la forma</h1><section>
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;" class="resaltado"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo" value="hola">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre" value="pp">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se activa el código del evento submit.</h1><section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo" value="hola">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre" value="pp">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
 <section style="display: block;">
  <h1>index.html</h1>
  <muestra-codigo class="resaltado">
   <div>
    <div><span
       style="color: #af00db;">try</span>&nbsp;{</div>
    <div> <span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">resultado</span> =</div>
    <div>&nbsp;&nbsp;<span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</div>
    <div>&nbsp;&nbsp;&nbsp;<span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
    <div>&nbsp;&nbsp;&nbsp;<span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</div>
    <div> <span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</div>
    <div>}&nbsp;<span
       style="color: #af00db;">catch</span> (<span
       style="color: #001080;">error</span>)&nbsp;{</div>
    <div> <span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</div>
    <div>}</div>
    <div></div>
   </div>
  </muestra-codigo>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. Se invoca el servicio, incluyendo los datos de la forma</h1><section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Forma</h1>
  <form action="javascript:;"
    style="overflow: auto; padding: 0 1rem;">
   <p>
    <label>
     Saludo:
     <input name="saludo" value="hola">
    </label>
   </p>
   <p>
    <label>
     Nombre:
     <input name="nombre" value="pp">
    </label>
   </p>
   <p>
    <button>Procesa</button>
   </p>
  </form>
 </section>
 <section style="display: block;">
  <h1>index.html</h1>
  <muestra-codigo>
   <div>
    <div><span
       style="color: #af00db;">try</span>&nbsp;{</div>
    <div> <span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">resultado</span> =</div>
    <div>&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #af00db;">await</span> <span
        style="color: #795e26;">submitForma</span>(</mark></div>
    <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
    <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
        style="color: #001080;">event</span>, <span
        style="color: #001080;">forma</span>)</mark></div>
    <div> <span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</div>
    <div>}&nbsp;<span
       style="color: #af00db;">catch</span> (<span
       style="color: #001080;">error</span>)&nbsp;{</div>
    <div> <span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</div>
    <div>}</div>
   </div>
  </muestra-codigo>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>Request</h1>
 <dl class="resaltado">
  <dt>URL</dt>
  <dd>
   <a rel="noopener"
     href="https://srvform.gilbertopachec5.repl.co/srv/srvProcesa.php"
     target="_blank">srvProcesa.php</a>
  </dd>
  <dt>Method</dt>
  <dd>POST</dd>
  <dt>body</dt>
  <dd>
   <dl>
    <dt>saludo</dt>
    <dd>hola</dd>
    <dt>nombre</dt>
    <dd>pp</dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despierta y recibe request.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio lee los datos</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span class="resaltado"><span
       style="color: #001080;">$saludo</span><span
       style="color: #000000;"> = </span><span
       style="color: #795e26;">leeTexto</span><span
       style="color: #000000;">(</span><span
       style="color: #a31515;">"saludo"</span><span
       style="color: #000000;">);</span></span></div>
   <div><span class="resaltado"><span
       style="color: #001080;">$nombre</span><span
       style="color: #000000;"> = </span><span
       style="color: #795e26;">leeTexto</span><span
       style="color: #000000;">(</span><span
       style="color: #a31515;">"nombre"</span><span
       style="color: #000000;">);</span></span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Request</h1>
  <dl>
   <dt>URL</dt>
   <dd>
    <a rel="noopener"
      href="https://srvform.gilbertopachec5.repl.co/srv/srvProcesa.php"
      target="_blank">srvProcesa.php</a>
   </dd>
   <dt>Method</dt>
   <dd>POST</dd>
   <dt>body</dt>
   <dd>
    <dl>
     <dt class="resaltado">saludo</dt>
     <dd class="resaltado">hola</dd>
     <dt class="resaltado">nombre</dt>
     <dd class="resaltado">pp</dd>
    </dl>
   </dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria (Servidor)</h1>
  <dl class="resaltado">
   <dt>$saludo</dt>
   <dd>"hola"</dd>
   <dt>$nombre</dt>
   <dd>"pp"</dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. El servicio valida que el saludo no sea un texto vacío</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span class="resaltado"><span
       style="color: #af00db;">if</span><span
       style="color: #000000;"> (</span><span
       style="color: #001080;">$saludo</span><span
       style="color: #000000;"> === </span><span
       style="color: #a31515;">""</span><span
       style="color: #000000;">)&nbsp;{</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria (Servidor)</h1>
 <dl>
  <dt class="resaltado">$saludo</dt>
  <dd class="resaltado">"hola"</dd>
  <dt>$nombre</dt>
  <dd>"pp"</dd>
 </dl>
</section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. Como el saludo no está vacío, el servicio valida que el nombre no sea un texto vacío</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>SrvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span class="resaltado"><span
       style="color: #af00db;">if</span><span
       style="color: #000000;"> (</span><span
       style="color: #001080;">$nombre</span><span
       style="color: #000000;"> === </span><span
       style="color: #a31515;">""</span><span
       style="color: #000000;">)&nbsp;{</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria (Servidor)</h1>
 <dl>
  <dt>$saludo</dt>
  <dd>"hola"</dd>
  <dt class="resaltado">$nombre</dt>
  <dd class="resaltado">"pp"</dd>
 </dl>
</section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >7. Como el nombre no está vacío, el servicio procesa los datos</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span class="resaltado"><span
       style="color: #001080;">$resultado</span><span
       style="color: #000000;"> =</span></span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span class="resaltado"><span
       style="color: #a31515;">"{</span><span
       style="color: #001080;">$saludo</span><span
       style="color: #a31515;">}&nbsp;{</span><span
       style="color: #001080;">$nombre</span><span
       style="color: #a31515;">}."</span><span
       style="color: #000000;">;</span></span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria (Servidor)</h1>
 <dl class="resaltado">
  <dt>$saludo</dt>
  <dd>"hola"</dd>
  <dt">$nombre</dt>
  <dd>"pp"</dd>
  <dt>$resultado</dt>
  <dd>"hola pp"</dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >8. El servicio genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado3"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span class="resaltado"><span
       style="color: #af00db;">return</span><span
       style="color: #000000;"> </span><span
       style="color: #001080;">$resultado</span><span
       style="color: #000000;">;</span></span></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Memoria (Servidor)</h1>
  <dl>
   <dt>$saludo</dt>
   <dd>"hola"</dd>
   <dt>$nombre</dt>
   <dd>"pp"</dd>
   <dt class="resaltado">$resultado</dt>
   <dd class="resaltado">"hola pp"</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>"hola pp"</dd>
  </dl>
 </section>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >9. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <mark class="resaltado"><span
       style="color: #0000ff;">const</span> <span
       style="color: #0070c1;">resultado</span> =</mark></div>
   <div>&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">submitForma</span>(</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #a31515;">"srv/srvProcesa.php"</span>,</mark></div>
   <div>&nbsp;&nbsp;&nbsp;<mark class="resaltado"><span
       style="color: #001080;">event</span>, <span
       style="color: #001080;">forma</span>)</mark></div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado2">Despiesta y recibe response.</p>
</section>
<section style="vertical-align: top;">
 <section style="display: block;">
  <h1>Response</h1>
  <dl class="resaltado">
   <dt>code</dt>
   <dd>200</dd>
   <dt>contenido</dt>
   <dd>"hola pp"</dd>
  </dl>
 </section>
 <section style="display: block;">
  <h1>Memoria</h1>
  <dl>
   <dt class="resaltado">resultado</dt>
   <dd class="resaltado">"hola pp"</dd>
  </dl>
 </section>
</section>
<section style="vertical-align: top;">
 <h1>srvProcesa.php</h1>
 <muestra-codigo class="resaltado3">
  <div>
   <div><span
      style="color: #800000;">&lt;?php</span></div><br>
   <div><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"saludo"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> = </span><span
      style="color: #795e26;">leeTexto</span><span
      style="color: #000000;">(</span><span
      style="color: #a31515;">"nombre"</span><span
      style="color: #000000;">);</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el saludo"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #af00db;">if</span><span
      style="color: #000000;"> (</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #000000;"> === </span><span
      style="color: #a31515;">""</span><span
      style="color: #000000;">)&nbsp;{</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #af00db;">throw</span><span
      style="color: #000000;"> </span><span
      style="color: #0000ff;">new</span><span
      style="color: #000000;"> </span><span
      style="color: #267f99;">Exception</span><span
      style="color: #000000;">(</span></div>
   <div><span
      style="color: #000000;">&nbsp;&nbsp;</span><span
      style="color: #a31515;">"Falta el nombre"</span></div>
   <div><span
      style="color: #000000;">&nbsp;);</span></div>
   <div><span
      style="color: #000000;">}</span></div>
   <div><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;"> =</span></div>
   <div><span
      style="color: #000000;">&nbsp;</span><span
      style="color: #a31515;">"{</span><span
      style="color: #001080;">$saludo</span><span
      style="color: #a31515;">}&nbsp;{</span><span
      style="color: #001080;">$nombre</span><span
      style="color: #a31515;">}."</span><span
      style="color: #000000;">;</span></div>
   <div><span
      style="color: #af00db;">return</span><span
      style="color: #000000;"> </span><span
      style="color: #001080;">$resultado</span><span
      style="color: #000000;">;</span></div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >10. Muestra el texto recibido en un alert</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">submitForma</span>(</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #001080;">event</span>, <span
      style="color: #001080;">forma</span>)</div>
   <div> <mark class="resaltado"><span
       style="color: #795e26;">alert</span>(<span
       style="color: #0070c1;">resultado</span>)</mark></div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
   <div></div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl>
  <dt class="resaltado">resultado</dt>
  <dd class="resaltado">"hola pp"</dd>
 </dl>
</section>
<section>
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>hola pp</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
 </div>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >11. Al cerrar el alert, termina el evento</h1><section>
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div> <span
      style="color: #0000ff;">const</span> <span
      style="color: #0070c1;">resultado</span> =</div>
   <div>&nbsp;&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">submitForma</span>(</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
   <div>&nbsp;&nbsp;&nbsp;<span
      style="color: #001080;">event</span>, <span
      style="color: #001080;">forma</span>)</div>
   <div> <span
      style="color: #795e26;">alert</span>(<span
      style="color: #0070c1;">resultado</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
   <div></div>
  </div>
 </muestra-codigo>
</section>
      </section>
      </section>
     <section >
         <h1 >G. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m10form/srvform.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvform?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvform?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >H. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-corto-html.html">corto.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvProcesa-php.html">srvProcesa.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >I. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que procesa un
   formulario (Separado)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que procesa un formulario
   (Separado)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"corto.html"</span><span
     style="color: #800000;">&gt;</span>Versión corta<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span> <span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">procesaForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">) "</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Saludo:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Como este input tiene name="saludo", su
    valor se recupera en el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;servidor con
    leeTexto("saludo") --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"saludo"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Como este input tiene name="nombre", su
    valor se recupera en el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;servidor con
    leeTexto("nombre") --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Procesa<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraError</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">submitForma</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/submitForma.js"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;{Event}&nbsp;event</span>
  </div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*/</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">procesaForma</span>(<span
     style="color: #001080;">event</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">resultado</span> =</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">submitForma</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"srv/srvProcesa.php"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #0070c1;">resultado</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"procesaForma"</span>] = <span
     style="color: #795e26;">procesaForma</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. corto.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que procesa un
   formulario (Corto)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que procesa un formulario
   (Corto)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Versión separada<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProcesa.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Saludo:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Como este input tiene name="saludo", su
    valor se recupera en el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;servidor con
    leeTexto("saludo") --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"saludo"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Como este input tiene name="nombre", su
    valor se recupera en el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;servidor con
    leeTexto("nombre") --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Procesa<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m10form/m-srv/m-srvProcesa-php.html">srv / srvProcesa.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvProcesa.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$saludo</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"saludo"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$saludo</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"Falta el saludo"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$nombre</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"Falta el nombre"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> =</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"{</span><span
     style="color: #001080;">$saludo</span><span
     style="color: #a31515;">}&nbsp;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}."</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m10form/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m10form/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m10form/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m10form/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró un servicio que procesa una forma.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >12. Servicio que falla</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m07srverror/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mBejecuta.html">La función <code>ejecuta</code> de JavaScript.</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mCmuestraerror.html">La función <code>muestraError</code>.</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mDservicio.html">La función <code>ejecuta</code> de PHP.</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mEdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/">Funcionamiento del ejemplo con errores</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mGinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-corto-html.html">corto.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-srv/">Carpeta « srv » </a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mHresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    A partir de esta lección se estandariza la forma de procesar servicios.
   </p>
  </li>
  <li>
   <p>
    Este ejemplo muestra como procesar un servicio que detecta errores al
    ejecutarse.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srverror?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srverror?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. La función <code>ejecuta</code> de JavaScript.</h1><div class="lectura">
 <ul>
  <li>
   <p>
    El código que se muestra en el ejemplo de servicio se repite en muchos
    ejemplos posteriores; pero además debe realizar algunas cuastiones
    adicionales. Para simplificar el trabajo, se introduce la función
    <code>ejecuta</code>, que realiza todo lo necesario para controlar la
    conxión desde el navegador web hacia el servidor.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importar el archivo donde está definida esta función y
    luego invocarla pasándole la url del servicio, o alternativamente, pasándole
    el resultado de invocar la función fetch que comunica al servicio.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección y las siguientes, se profundiza en el uso y
    estructura de esta función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >C. La función <code>muestraError</code>.</h1><div class="lectura">
 <ul>
  <li>
   <p>
    También manejamos los errores de una manera uniforme con la función
    <code>muestraError</code>, la cual muestra la excepción correspondiente en
    la consola del navegador y el mensaje de la excepción en un cuadro de alert.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importar el archivo donde está definida esta función y
    colocarla dentro de un catch. Se le pasa como parámetro la excepción
    atrapada por el catch.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección y las siguientes, se profundiza en el uso y
    estructura de esta función.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >D. La función <code>ejecuta</code> de PHP.</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para que el desarrollo de servicios del lado del servidor se realice de
    manera sencilla, uniforme y no repetir código, se introduce la función
    <code>ejecuta</code>, escrita en PHP.
   </p>
  </li>
  <li>
   <p>
    Para usarla, debes importar el archivo donde está definida esta función
    usando <code>require</code> o <code>require_once</code> y luego invocarla
    pasándole la función con el código del servicio.
   </p>
  </li>
  <li>
   <p>
    A lo largo de esta lección y las siguientes, se profundiza en el uso y
    estructura de esta clase.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m07srverror/srverrordistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section>
         <h1 >F. Funcionamiento del ejemplo con errores</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m1cliente.html">Iniciamos al ejecutar código en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m2servidor.html">Se invoca el servicio en el servidor</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m3procesa.html">El servicio procesa la request, lanza una excepción y genera la response</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m4devuelve.html">El servicio devuelve la response, que es recibida en el cliente</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m5catch.html">Como hay error, se lanza una excepción que atrapa el catch</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m6muestraerror.html">Muestra la excepción en la consola y el mensaje de la excepción en un alert</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/mFfunError/m7termina.html">Al cerrar el alert, termina el evento</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section class="pruebaDeEscritorio">
         <h1 >1. Iniciamos al ejecutar código en el cliente</h1><section>
 <h1>index.html</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/srvError.php"</span>)</div>
   <div>&nbsp;<span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >2. Se invoca el servicio en el servidor</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span
      style="color: #af00db;">try</span>&nbsp;{</div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado">&nbsp;&nbsp;<span
       style="color: #a31515;">"srv/srvError.php"</span>)</mark></div>
   <div>&nbsp;<span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>}&nbsp;<span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>)&nbsp;{</div>
   <div> <span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p>
  <mark class="resaltado2">
   Ejecuta fetch y envía
  <br>request (solicitud).
  </mark>
 </p>
</section>
<section style="vertical-align: top;">
 <h1>Request</h1>
 <dl class="resaltado">
  <dt>URL</dt>
  <dd>
   <a rel="noopener"
     href="https://srverror.gilbertopachec5.repl.co/srv/srvError.php"
     target="_blank">srvError.php</a>
  </dd>
  <dt>Method</dt>
  <dd>GET</dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvError.php</h1>
 <muestra-codigo class="resaltado">
  <div>
   <div><span style="color: #af00db;">throw</span> <span
      style="color: #0000ff;">new</span> <span
      style="color: #267f99;">Exception</span>(<span
      style="color: #a31515;">"Ouch"</span>);</div>
  </div>
 </muestra-codigo>
 <p><mark class="resaltado2">Despierta y recibe request.</mark></p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >3. El servicio procesa la request, lanza una excepción y genera la response</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span style="color: #af00db;">try</span> {</div>
   <div><mark class="resaltado3">&nbsp;<span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado3">&nbsp;&nbsp;<span
       style="color: #a31515;">"srv/srvError.php"</span>)</mark></div>
   <div>&nbsp;<span style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>} <span style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>) {</div>
   <div>&nbsp;<span style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p class="resaltado3">Hace wait esperando response.</p>
</section>
<section style="vertical-align: top;">
 <h1>srvError.php</h1>
 <muestra-codigo>
  <div>
   <div><mark class="resaltado"><span
       style="color: #af00db;">throw</span> <span
       style="color: #0000ff;">new</span> <span
       style="color: #267f99;">Exception</span>(<span
       style="color: #a31515;">"Ouch"</span>);</mark></div>
  </div>
 </muestra-codigo>
 <p>
  <mark class="resaltado2">
   Procesa la request, lanza una excepción,
   <br>genera la response y aborta el proceso
   <br>en el servidor.
  </mark>
 </p>
</section>
<section style="vertical-align: top;">
 <h1>Response</h1>
 <dl class="resaltado">
  <dt>code</dt>
  <dd>500</dd>
  <dt>contenido</dt>
  <dd>Ouch</dd>
 </dl>
 <p>
  <mark class="resaltado2">
   El code 500
   <br>indica que
   <br>algo falló en
   <br>el servidor
   <br>y terminó con
   <br>error.
  </mark>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >4. El servicio devuelve la response, que es recibida en el cliente</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span style="color: #af00db;">try</span> {</div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #af00db;">await</span> <span
       style="color: #795e26;">ejecuta</span>(</mark></div>
   <div><mark class="resaltado">&nbsp;&nbsp;<span
       style="color: #a31515;">"srv/srvError.php"</span>)</mark></div>
   <div>&nbsp;<span style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>} <span style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>) {</div>
   <div>&nbsp;<span style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
 <p><mark class="resaltado2">Despiesta y recibe response.</mark></p>
</section>
<section style="vertical-align: top;">
 <h1>Response</h1>
 <dl class="resaltado">
  <dt>code</dt>
  <dd>500</dd>
  <dt>contenido</dt>
  <dd>Ouch</dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>srvError.php</h1>
 <muestra-codigo class="resaltado3">
  <div>
   <div><span style="color: #af00db;">throw</span>
    <span
      style="color: #0000ff;">new</span> <span
      style="color: #267f99;">Exception</span>(<span
      style="color: #a31515;">"Ouch"</span>);
   </div>
  </div>
 </muestra-codigo>
 <p><mark class="resaltado3">Devuelve response y se duerme.</mark></p>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >5. Como hay error, se lanza una excepción que atrapa el catch</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span style="color: #af00db;">try</span> {</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/SrvError.php"</span>)</div>
   <div>&nbsp;<span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div><mark class="resaltado">} <span
       style="color: #af00db;">catch</span> (<span
       style="color: #001080;">error</span>) {</mark></div>
   <div>&nbsp;<span style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl class="resaltado">
  <dt>error</dt>
  <dd>
   <dl>
    <dt>message</dt>
    <dd>"Ouch"</dd>
   </dl>
  </dd>
 </dl>
</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >6. Muestra la excepción en la consola y el mensaje de la excepción en un alert</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span style="color: #af00db;">try</span> {</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/SrvError.php"</span>)</div>
   <div>&nbsp;<span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>} <span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>) {</div>
   <div><mark class="resaltado">&nbsp;<span
       style="color: #795e26;">muestraError</span>(<span
       style="color: #001080;">error</span>)</mark></div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Memoria</h1>
 <dl class="resaltado">
  <dt>error</dt>
  <dd>
   <dl>
    <dt>message</dt>
    <dd>"Ouch"</dd>
   </dl>
  </dd>
 </dl>
</section>
<section style="vertical-align: top;">
 <h1>Alert</h1>
 <div class="resaltado" style="border: thin solid; padding: 0 0.5rem;">
  <p>Ouch</p>
  <p style="text-align: end;">
   <button type="button">Aceptar</button>
  </p>
 </div>
</section>
<section style="vertical-align: top;">
 <h1>Consola</h1>
 <muestra-codigo class="resaltado">
  <div>Error: Ouch</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at ejecuta (ejecuta.js:24:9)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at async procesaError ((índice):28:5)</div>
 </muestra-codigo>

</section>
      </section>
     <section class="pruebaDeEscritorio">
         <h1 >7. Al cerrar el alert, termina el evento</h1><section style="vertical-align: top;">
 <h1>index.html</h1>
 <muestra-codigo>
  <div>
   <div><span style="color: #af00db;">try</span> {</div>
   <div>&nbsp;<span
      style="color: #af00db;">await</span> <span
      style="color: #795e26;">ejecuta</span>(</div>
   <div>&nbsp;&nbsp;<span
      style="color: #a31515;">"srv/SrvError.php"</span>)</div>
   <div>&nbsp;<span
      style="color: #795e26;">alert</span>(<span
      style="color: #a31515;">"Ejecutado."</span>)</div>
   <div>} <span
      style="color: #af00db;">catch</span> (<span
      style="color: #001080;">error</span>) {</div>
   <div>&nbsp;<span
      style="color: #795e26;">muestraError</span>(<span
      style="color: #001080;">error</span>)</div>
   <div>}</div>
  </div>
 </muestra-codigo>
</section>
<section style="vertical-align: top;">
 <h1>Consola</h1>
 <muestra-codigo>
  <div>Error: Ouch</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at ejecuta (ejecuta.js:24:9)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;at async procesaError ((índice):28:5)</div>
 </muestra-codigo>
</section>
      </section>
      </section>
     <section >
         <h1 >G. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m07srverror/srverror.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srverror?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srverror?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >H. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-corto-html.html">corto.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvError-php.html">srvError.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >I. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que falla
   (Separado)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que falla (Separado)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"corto.html"</span><span
     style="color: #800000;">&gt;</span>Versión corta<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">procesaError</span><span
     style="color: #0000ff;">()"</span><span
     style="color: #800000;">&gt;</span>Error<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/ejecuta.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraError</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">procesaError</span>()&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">ejecuta</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"srv/srvError.php"</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Ejecutado."</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"procesaError"</span>] = <span
     style="color: #795e26;">procesaError</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. corto.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que falla (Corto)<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que falla (Corto)<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Versión separada<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvError.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(()=&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'Ejecutado.'</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Error</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv » </h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m07srverror/m-srv/m-srvError-php.html">srv / srvError.php</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. srv / srvError.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Ouch"</span>);</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m07srverror/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m07srverror/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m07srverror/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m07srverror/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el funcionamiento de un servicio cuando falla.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >13. Mostrar datos en el cliente</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11muestra/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/mCinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presenta un ejemplo que muestra los datos devueltos por
    un servicio.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvmuestra?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvmuestra?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img src="/img/m11muestra/srvmuestradistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >C. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m11muestra/srvmuestra.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvform?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvform?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >D. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a
            href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvDatos-php.html">srvDatos.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Muestra datos<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvDatos.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">document</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Muestra datos<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #008000;">&lt;!-- Al mostrar un dato, se usan los atributos
    "id", "name" o "data-name"</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;para buscar la propiedad a desplegar en
    la página. --&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Nombre</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad nombre del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;value del output.
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span><span
     style="color: #800000;">&gt;&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Apellido</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad apellido del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;value del input.
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"apellido"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"text"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Edad</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad edad del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;valueAsNumber del input.
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">data-name</span>=<span
     style="color: #0000ff;">"edad"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"number"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Número de la suerte</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad numero del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;value del output.
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"numero"</span><span
     style="color: #800000;">&gt;&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad aprobado del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;checked del input, poeque
    el tipo del dato es boolean y el input tiene</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;type="checkbox".
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"aprobado"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"checkbox"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Aprobado</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Gracioso</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad gracioso del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;value del output.
    --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"gracioso"</span><span
     style="color: #800000;">&gt;&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Emplacado</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad gracioso del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;valueAsNumber del input con
    false -&gt; 0 y true -&gt; 1. --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">data-name</span>=<span
     style="color: #0000ff;">"emplacado"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"range"</span> <span
     style="color: #e50000;">min</span>=<span
     style="color: #0000ff;">"0"</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"1"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span>Dirección<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad direccion del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;textContent del pre. El atributo
    data-text-content="true" indica usar la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;propiedad textContent. --&gt;</span>
  </div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;pre</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"direccion"</span> <span
     style="color: #e50000;">data-text-content</span>=<span
     style="color: #0000ff;">"true"</span><span
     style="color: #800000;">&gt;&lt;/pre&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Encabezado</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad encabezado del objeto
    descargado, usando la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;propiedad innerHTML del
    span, porque este tipo de elemento no tiene la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;propiedad value y no se usa
    el atributo data-text-content="true". --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;span</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"encabezado"</span><span
     style="color: #800000;">&gt;&lt;/span&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Nacimiento</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad nacimiento del objeto
    descargado, usando la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;propiedad value del input.
    Revisa la especificación de input para</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;los distintos formatos de
    fecha que se pueden usar. --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nacimiento"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"date"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;figure&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad imagen1 del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;src del img. --&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;img</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"imagen1"</span> <span
     style="color: #e50000;">alt</span>=<span
     style="color: #0000ff;">"Imagen 2"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;figcaption&gt;</span>Imagen 1<span
     style="color: #800000;">&lt;/figcaption&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/figure&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;figure&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad imagen2 del objeto
    descargado, usando la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;src del img. Como el valor es "",
    se oculta el img. --&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;img</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"imagen2"</span> <span
     style="color: #e50000;">alt</span>=<span
     style="color: #0000ff;">"Imagen 2"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;figcaption&gt;</span>Imagen 2<span
     style="color: #800000;">&lt;/figcaption&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/figure&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad pasatiempos[] del
    objeto descargado; como es un</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;array, usa los elementos con
    name="pasatiempos[]" y les pone la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;checked en true si su value está
    en el array; de lo contrario se las pone en</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;false. Los corchetes([]), le
    indican a PHP que la propiedad es un array</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;qpuede llegar a tener 0, 1 o más
    elementos. --&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;fieldset&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;legend&gt;</span>Pasatiempos<span
     style="color: #800000;">&lt;/legend&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"checkbox"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"pasatiempos[]"</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"fut"</span><span
     style="color: #800000;">&gt;</span>Futbol</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"checkbox"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"pasatiempos[]"</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"chess"</span><span
     style="color: #800000;">&gt;</span>Ajedrez</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"checkbox"</span> <span
     style="color: #e50000;">data-name</span>=<span
     style="color: #0000ff;">"pasatiempos[]"</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"basket"</span><span
     style="color: #800000;">&gt;</span>Basketbol</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/fieldset&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #008000;">&lt;!-- Muestra la propiedad madrugador del objeto
    descargado; como es un</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;array, usa los elementos con
    name="madrugador" y les pone la propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;checked en true si su value está
    en el array; de lo contrario se las pone en</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;false. Como el name no tiene [],
    el array solo tiene 0 o un elemento. --&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;fieldset&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;legend&gt;</span>Madrugador<span
     style="color: #800000;">&lt;/legend&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"radio"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"madrugador"</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"si"</span><span
     style="color: #800000;">&gt;</span>Si<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"radio"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"madrugador"</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"no"</span><span
     style="color: #800000;">&gt;</span>No<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/fieldset&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >F. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11muestra/m-srv/m-srvDatos-php.html">srv / srvDatos.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvDatos.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"pp"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"apellido"</span> =&gt; <span
     style="color: #a31515;">"tkt"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"edad"</span> =&gt; <span
     style="color: #098658;">18</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"numero"</span> =&gt; <span
     style="color: #098658;">5</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"aprobado"</span> =&gt; <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"gracioso"</span> =&gt; <span
     style="color: #0000ff;">false</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"emplacado"</span> =&gt; <span
     style="color: #0000ff;">false</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"direccion"</span> =&gt; <span
     style="color: #a31515;">"Girasoles 23</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">colonia Rosales"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"encabezado"</span> =&gt; <span
     style="color: #a31515;">"&lt;em&gt;Hola, soy
    &lt;strong&gt;pp&lt;/strong&gt;"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"imagen1"</span> =&gt; <span
     style="color: #a31515;">"https://gilpgawoas.github.io/img/icono/maskable_icon_x48.png"</span>,
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"imagen2"</span> =&gt; <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"pasatiempos[]"</span> =&gt; [<span
     style="color: #a31515;">"fut"</span>, <span
     style="color: #a31515;">"basket"</span>],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"madrugador"</span> =&gt; [<span
     style="color: #a31515;">"no"</span>],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"nacimiento"</span> =&gt; <span
     style="color: #a31515;">"2000-07-04"</span></div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >G. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >H. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m11muestra/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >I. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se indica como mostrar en el cliente los datos devueltos por
    un servicio.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >14. Renderizado del lado del cliente</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11renderCliente/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/mCinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/m-render-js.html">render.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m11renderCliente/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para algunas partes de una página no hay componentes gráficos que puedan
    mostrar valores, como en el caso de los listados. En ese caso se tiene que
    generar el código HTM desde el programa, proceso que se conoce como
    <dfn>renderizado</dfn>.
   </p>
  </li>
  <li>
   <p>
    En esta lección se presenta un ejemplo de renderizado en el cliente.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/rendercli?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/rendercli?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m11renderCliente/renclientedistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >C. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m11renderCliente/rendercli.zip" download>Descarga el
     ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/rendercli?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/rendercli?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >D. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-render-js.html">render.js</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvLista-php.html">srvLista.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Render en el cliente<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Render en el cliente<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Crea y pone en funcionamiento el worker del
    archivo "render.js".</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">worker</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Worker</span>(<span
     style="color: #a31515;">"render.js"</span>,&nbsp;{ <span
     style="color: #001080;">type</span><span
     style="color: #001080;">:</span> <span
     style="color: #a31515;">"module"</span> })</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Se invoca cuando el worker envía un mensaje a la
    página.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0070c1;">worker</span>.<span
     style="color: #795e26;">onmessage</span> = <span
     style="color: #001080;">event</span> <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">lista</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">event</span>.<span
     style="color: #001080;">data</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. render.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/*&nbsp;Ejemplo de render en el cliente. No se usa
    import</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;porque Firefox no lo soporta en los
    web workers. */</span></div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #a31515;">"srv/srvLista.php"</span>)</div>
  <div>&nbsp;.<span
     style="color: #795e26;">then</span>(<span
     style="color: #001080;">lista</span> <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Genera el código HTML de la lista.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">render</span> = <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">modelo</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #001080;">lista</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;Codifica nombre y color para que cambie
    los</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;caracteres
    especiales y el texto no se pueda</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;interpretar como
    HTML. Esta técnica evita la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;inyección de código.
    */</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">nombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #0070c1;">modelo</span>.<span
     style="color: #001080;">nombre</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">color</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #0070c1;">modelo</span>.<span
     style="color: #001080;">color</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">render</span> += <span
     style="color: #008000;">/*&nbsp;html */</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;`<span
     style="color: #800000;">&lt;dt&gt;${</span><span
     style="color: #0070c1;">nombre</span><span
     style="color: #800000;">}&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;${</span><span
     style="color: #0070c1;">color</span><span
     style="color: #800000;">}&lt;/dd&gt;</span>`</div>
  <div>&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Verifica si el código corre dentro de un web
    worker.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">self</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">WorkerGlobalScope</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Envía el render a la página que invocó este web
    worker.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">self</span>.<span
     style="color: #795e26;">postMessage</span>(<span
     style="color: #001080;">render</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>&nbsp;.<span
     style="color: #795e26;">catch</span>(<span
     style="color: #001080;">error</span> <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #001080;">error</span>))</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Codifica un texto para que cambie los
    caracteres</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;especiales y no se pueda interpretar
    como</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;etiiqueta HTML. Esta técnica evita la
    inyección</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;de código.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">texto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> un texto que no puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;&nbsp;interpretarse como HTML.
    */</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">texto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">texto</span>.<span
     style="color: #795e26;">replace</span>(<span
     style="color: #811f3f;">/</span><span
     style="color: #d16969;">[</span><span
     style="color: #811f3f;">&lt;&gt;"'</span><span
     style="color: #d16969;">]</span><span
     style="color: #811f3f;">/</span><span
     style="color: #0000ff;">g</span>, <span
     style="color: #001080;">textoDetectado</span> <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">switch</span> (<span
     style="color: #001080;">textoDetectado</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"&lt;"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;lt;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"&gt;"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;gt;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">'"'</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;quot;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"'"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;#039;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">default</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">textoDetectado</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >G. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11renderCliente/m-srv/m-srvLista-php.html">srv / srvLista.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvLista.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = [</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"pp"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"azul"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"kq"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"rojo"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"tt"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"rosa"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"bb"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"azul"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$lista</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >H. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >I. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m11renderCliente/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m11renderCliente/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >J. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró un ejemplo de renderizado en el cliente.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >15. Renderizado del lado del servidor</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m12renderServidor/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/mCinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para algunas partes de una página no hay componentes gráficos que puedan
    mostrar valores, como en el caso de los listados. En ese caso se tiene que
    generar el código HTM desde el programa, proceso que se conoce como
    <dfn>renderizado</dfn>.
   </p>
  </li>
  <li>
   <p>
    En esta lección se presenta un ejemplo de renderizado en el servidor.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/renderserv?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/renderserv?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m12renderServidor/renserverdistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >C. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m12renderServidor/renderserv.zip" download>Descarga el
     ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/renderserv?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/renderserv?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >D. Archivos</h1>
  <div class="lectura">
   <p>Haz clic en los triángulos para expandir las carpetas</p>
   <ul class="tree">
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
    <li>
     <details>
      <summary>lib</summary>
      <ul>
    <li>
     <details>
      <summary>js</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>php</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>srv</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-srvRender-php.html">srvRender.php</a></p>
  </li>
      </ul>
     </details>
    </li>
   </ul>
  </div>
      </section>
     <section >
         <h1 >E. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Render en el servidor<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvRender.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Render en el servidor<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >G. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m12renderServidor/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section>
         <h1 >H. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m12renderServidor/m-srv/m-srvRender-php.html">srv / srvRender.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvRender.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = [</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"pp"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"azul"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"qk"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"rojo"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"tt"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"rosa"</span></div>
  <div>&nbsp;&nbsp;],</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #a31515;">"bb"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"color"</span> =&gt; <span
     style="color: #a31515;">"azul"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;];</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Genera el código HTML de la lista.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;Codifica nombre y color para que cambie
    los</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*&nbsp;caracteres especiales y el
    texto no se pueda</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*&nbsp;interpretar como HTML.
    Esta técnica evita la</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;*&nbsp;inyección de código.
    */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>[<span
     style="color: #a31515;">"nombre"</span>]);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$color</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>[<span
     style="color: #a31515;">"color"</span>]);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;dt&gt;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}&lt;/dt&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;{</span><span
     style="color: #001080;">$color</span><span
     style="color: #a31515;">}&lt;/dd&gt;"</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >I. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró un ejemplo de renderizado en el servidor.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >16. Bases de datos</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m13bd/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-agrega-html.html">agrega.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-modifica-html.html">modifica.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra el acceso a bases de datos con servicios.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvbd?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvbd?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><figure>
 <img style="max-height: none;"
   src="/img/m13bd/bdentity.drawio.svg"
   alt="Diagrama entidad relaciónn">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m13bd/bqrel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m13bd/bdpaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m13bd/bddistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m13bd/srvbd.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvbd?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvbd?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1>
  <div class="lectura">
   <p>Haz clic en los triángulos para expandir las carpetas</p>
   <ul class="tree">
  <li>
   <p><a href="m-agrega-html.html">agrega.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-modifica-html.html">modifica.html</a></p>
  </li>
    <li>
     <details>
      <summary>lib</summary>
      <ul>
    <li>
     <details>
      <summary>js</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-confirmaEliminar-js.html">confirmaEliminar.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>php</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeEntero-php.html">leeEntero.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>srv</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-srvPasatiempoAgrega-php.html">srvPasatiempoAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvPasatiempoBusca-php.html">srvPasatiempoBusca.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvPasatiempoConsulta-php.html">srvPasatiempoConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvPasatiempoElimina-php.html">srvPasatiempoElimina.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvPasatiempoModifica-php.html">srvPasatiempoModifica.php</a></p>
  </li>
    <li>
     <details>
      <summary>dao</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-pasatiempoAgrega-php.html">pasatiempoAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-pasatiempoBusca-php.html">pasatiempoBusca.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-pasatiempoConsulta-php.html">pasatiempoConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-pasatiempoElimina-php.html">pasatiempoElimina.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-pasatiempoModifica-php.html">pasatiempoModifica.php</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>modelo</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-modelo/m-Pasatiempo-php.html">Pasatiempo.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
   </ul>
  </div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Acceso a base de datos<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoConsulta.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Acceso a base de datos<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"agrega.html"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;ul</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;li&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/li&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/ul&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. agrega.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Agregar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoAgrega.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Agregar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. modifica.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Modificar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/confirmaEliminar.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoModifica.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Modificar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"id"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"Cargando&amp;hellip;"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Guardar<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirmaEliminar</span><span
     style="color: #0000ff;">())&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoElimina.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Eliminar</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m13bd/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-srvPasatiempoAgrega-php.html">srv / srvPasatiempoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-srvPasatiempoBusca-php.html">srv / srvPasatiempoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-srvPasatiempoConsulta-php.html">srv / srvPasatiempoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-srvPasatiempoElimina-php.html">srv / srvPasatiempoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-srvPasatiempoModifica-php.html">srv / srvPasatiempoModifica.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m13bd/m-srv/m-modelo/m-Pasatiempo-php.html">srv / modelo / Pasatiempo.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Pasatiempo.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Pasatiempo</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span> = <span
     style="color: #a31515;">""</span>, <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> = <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Faltala el nombre."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-pasatiempoAgrega-php.html">srv / dao / pasatiempoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-pasatiempoBusca-php.html">srv / dao / pasatiempoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-pasatiempoConsulta-php.html">srv / dao / pasatiempoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-pasatiempoElimina-php.html">srv / dao / pasatiempoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-srv/m-dao/m-pasatiempoModifica-php.html">srv / dao / pasatiempoModifica.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> PASATIEMPO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_NOMBRE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PAS_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(PAS_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PAS_NOM_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(PAS_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvbd.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / pasatiempoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoAgrega</span>(<span
     style="color: #267f99;">Pasatiempo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(PAS_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:nombre)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / pasatiempoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>): <span
     style="color: #0000ff;">false</span>|<span
     style="color: #267f99;">Pasatiempo</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> nombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PAS_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Pasatiempo</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / pasatiempoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Pasatiempo</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> nombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> PAS_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Pasatiempo</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / pasatiempoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PAS_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / pasatiempoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoModifica</span>(<span
     style="color: #267f99;">Pasatiempo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span><span
     style="color: #a31515;"> PAS_NOMBRE </span>=<span
     style="color: #a31515;"> :nombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PAS_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span></div>
  <div>&nbsp;]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >C. srv / srvPasatiempoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoAgrega.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(nombre: <span
     style="color: #001080;">$nombre</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">pasatiempoAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. srv / srvPasatiempoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">pasatiempoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Pasatiempo no encontrado."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvPasatiempoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">pasatiempoConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;li&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}&lt;/a&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvPasatiempoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoElimina.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">pasatiempoElimina</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvPasatiempoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoModifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(nombre: <span
     style="color: #001080;">$nombre</span>, id: <span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">pasatiempoModifica</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-confirmaEliminar-js.html">lib / js / confirmaEliminar.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / confirmaEliminar.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">confirmaEliminar</span>()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">confirm</span>(<span
     style="color: #a31515;">"Confirma la eliminación"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"confirmaEliminar"</span>] = <span
     style="color: #795e26;">confirmaEliminar</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >16. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >17. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m13bd/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-php/m-leeEntero-php.html">lib / php / leeEntero.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m13bd/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeEntero.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve el valor entero de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibido en el servidor por medio de
    GET,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;POST o cookie. Si parámetro no se
    puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;convertir a entero, se genera un
    error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Si el parámetro no se recibe,
    devuelve</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;null.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): ?<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el acceso a bases de datos con servicios.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >17. Chat sencillo - Protocolos de comunicación</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m14chat/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mBdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/">chathtml</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/">chatwss</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se presentan un chat sencillo.
   </p>
  </li>
  <li>
   <p>
    Primero levanta el servidor de websockets ejecutando la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/chatwss?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/chatwss?v=1</a>
    (no es un website).
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    Cuando trabajes en tu propio proyecto, desde el ára de desarrollo, en la
    consola, puedes observar conexiones, desconexiones y los mensajes enviados..
   </p>
  </li>
  <li>
   <p>
    Luego lanza el el chat desde varios navegadores y dispositivos ejecutano la
    app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/chathtml?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/chathtml?v=1</a>.
      Hazle fork al proyecto, ajusta la URL del websocket y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m14chat/chatdistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >C. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    Este ejemplo requiere 2 proyectos
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en chatwss en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/chatwss?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/chatwss?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto chathtml en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/chathtml?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/chathtml?v=1</a>.
    Hazle fork al proyecto, ajusta la URL del websocket y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="/src/m14chat/chatwss.zip" download>Descarga chatwss.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="/src/m14chat/chathtml.zip" download>Descarga chathtml.</a>
   </p>
  </li>
  <li>
   <p>
    chathtml puede correr simultáneamente en varios navegadores y computadoras,
    todos interactuando con la misma instancia de chatwss, obteniendo un chat
    muy simple.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1VIry7_AW6uT5d7zrATxWeDP7Eb_yffW4/view?usp=sharing"
      target="_blank" rel="nooper">Crea el proyecto chatwss con la categoría
     <em>PHP CLI</em> en Replit y edita o sube los archivos de chatwss.</a>
   </p>
  </li>
  <li>
   <p>
    El archivo <q>chatwss.zip</q> ya contiene la carpeta <q>vendor</q> y el
    archivo <q>composer.lock</q>, pero si quieres crearlos, debes seguir estos
    pasos:
   </p>
   <ol>
    <li>
     <p>
      Instalar composer. Si trabajas desde Replit, los archivos <q>.replit</q> y
      <q>replit.nix</q> de este proyecto lo instalan automáticamente. Para
      Windows, usa el instalador de
      <a
        href="https://getcomposer.org/download/">https://getcomposer.org/download/</a>.
     </p>
    </li>
    <li>
     <p>
      Para Replit, usa la pestaña <q>shell</q>, que ya está posicionada en la
      carpeta del proyecto.
      Si estas en Windows, debes abrir el símbolo del sistema y usar el comando
      <samp>cd</samp> para llegar a la carpeta del proyecto.
     </p>
    </li>
    <li>
     <p>
      Ejecuta el comando
      <br><samp>composer update</samp>
     </p>
    </li>
   </ol>
  </li>
  <li>
   <p>
    Haz clic en el botón <q>Run</q>. En la página de desarrollo, en la pestaña
    Console aparece la salida del servidor. Puedes observar cuando levanta o
    alguien se conecta o los mensajes que envía. También aparecerán algunos
    avisos, que aunque llenan la consola, no impiden que el servidor funcione
    correctamente.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1XgYDkmFqbFlCgkcCNEnW8O2AL5HfKyy-/view?usp=sharing"
      target="_blank" rel="nooper">Crea el proyecto chathtml con la
     categoría
     <em>HTML, CSS, JS</em> en Replit y edita o sube los archivos de
     chathtml.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section>
         <h1 >D. chathtml</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m14chat/mCchathtml/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a
            href="m-lib/m-js/m-errorEnWebSocket-js.html">errorEnWebSocket.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-webSocketCerrado-js.html">webSocketCerrado.js</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >2. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Chat<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraError</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">errorEnWebSocket</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/errorEnWebSocket.js"</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">webSocketCerrado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./lib/js/webSocketCerrado.js"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Cambia la url por la de tu servicio. */</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">ws</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">WebSocket</span>(<span
     style="color: #a31515;">"wss://chatwss.gilbertopachec5.repl.co/"</span>)
  </div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Se invoca cuando se ha establecido una conexión
    al servidor.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">ws</span>.<span
     style="color: #795e26;">onopen</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">pre</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #a31515;">"Conectado.</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Conectado"</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Se invoca al presentarse un error en la conexión
    al servidor.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">ws</span>.<span
     style="color: #795e26;">onerror</span> = <span
     style="color: #001080;">errorEnWebSocket</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Se invoca cuando se cierra la conexión al
    servidor.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">ws</span>.<span
     style="color: #795e26;">onclose</span> = <span
     style="color: #001080;">webSocketCerrado</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Se invoca al recibir un mensaje del
    servidor.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">ws</span>.<span
     style="color: #795e26;">onmessage</span> = <span
     style="color: #001080;">event</span> <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #001080;">pre</span>.<span
     style="color: #001080;">textContent</span> += <span
     style="color: #001080;">event</span>.<span
     style="color: #001080;">data</span> + <span
     style="color: #a31515;">"</span><span
     style="color: #ee0000;">\n\n</span><span
     style="color: #a31515;">"</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Permite que los eventos de html usen la
    variable.</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ws"</span>] = <span
     style="color: #0070c1;">ws</span></div><br>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span> <span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">try</span><span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">preventDefault</span><span
     style="color: #0000ff;">()</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">mensaje</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">`</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">inputAlias</span>.<span
     style="color: #001080;">value</span>.<span
     style="color: #795e26;">trim</span>()<span
     style="color: #0000ff;">}</span></div>
  <div><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">inputMensaje</span>.<span
     style="color: #001080;">value</span>.<span
     style="color: #795e26;">trim</span>()<span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">`</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">ws</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">send</span><span
     style="color: #0000ff;">(</span><span
     style="color: #0070c1;">mensaje</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #001080;">error</span><span
     style="color: #0000ff;">)&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraError</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">error</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Chat<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Alias *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"inputAlias"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Mensaje *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"inputMensaje"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Enviar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;pre</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"pre"</span><span
     style="color: #800000;">&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/pre&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >4. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-lib/m-js/m-errorEnWebSocket-js.html">lib / js / errorEnWebSocket.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mCchathtml/m-lib/m-js/m-webSocketCerrado-js.html">lib / js / webSocketCerrado.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / errorEnWebSocket.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">evt</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">errorEnWebSocket</span>(<span
     style="color: #001080;">evt</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">evt</span>)</div>
  <div>&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error en la conexión."</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"errorEnWebSocket"</span>] = <span
     style="color: #795e26;">errorEnWebSocket</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / webSocketCerrado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">webSocketCerrado</span>(<span
     style="color: #001080;">event</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #001080;">event</span>)</div>
  <div>&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Conexión terminada"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"webSocketCerrado"</span>] = <span
     style="color: #795e26;">webSocketCerrado</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
      </section>
     <section>
         <h1 >E. chatwss</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m14chat/mDchatwss/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/m-Chat-php.html">Chat.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/m-main-php.html">main.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/m-composer-json.html">composer.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/m--replit.html">.replit</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m14chat/mDchatwss/m-replit-nix.html">replit.nix</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m--replit.html">.replit</a></p>
  </li>
  <li>
   <p><a href="m-Chat-php.html">Chat.php</a></p>
  </li>
  <li>
   <p><a href="m-composer-json.html">composer.json</a></p>
  </li>
  <li>
   <p>composer.lock <em>(No se muestra el contenido de este archivo.)</em></p>
  </li>
  <li>
   <p><a href="m-main-php.html">main.php</a></p>
  </li>
  <li>
   <p><a href="m-replit-nix.html">replit.nix</a></p>
  </li>
  <li>
   <details>
    <summary>vendor</summary>
    <p><em>No se muestra el contenido de esta carpeta.</em></p>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >2. Chat.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">use</span> <span
     style="color: #267f99;">\SplObjectStorage</span>;</div>
  <div><span
     style="color: #0000ff;">use</span> Ratchet\<span
     style="color: #267f99;">MessageComponentInterface</span>;</div>
  <div><span
     style="color: #0000ff;">use</span> Ratchet\<span
     style="color: #267f99;">ConnectionInterface</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Chat</span> <span
     style="color: #0000ff;">implements</span> <span
     style="color: #267f99;">MessageComponentInterface</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">protected</span> <span
     style="color: #267f99;">SplObjectStorage</span> <span
     style="color: #001080;">$conexionesDeClientes</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Crea una colección que se accesa usando
    objetos.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">conexionesDeClientes</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">SplObjectStorage</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;Se invoca al abrirse una conexión desde un
    cliente. */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">onOpen</span>(<span
     style="color: #267f99;">ConnectionInterface</span> <span
     style="color: #001080;">$conexionDeCliente</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Guarda la conexión.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">conexionesDeClientes</span>-&gt;<span
     style="color: #795e26;">attach</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$conexionDeCliente</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$conexionDeCliente</span>-&gt;<span
     style="color: #001080;">resourceId</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #a31515;">"Conectado: "</span> . <span
     style="color: #001080;">$conexionDeCliente</span>-&gt;<span
     style="color: #001080;">resourceId</span> . <span
     style="color: #a31515;">"</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">"</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;Se invoca al recibir un mensaje de un
    cliente. */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">onMessage</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">ConnectionInterface</span> <span
     style="color: #001080;">$conexionDeClienteQueEnvia</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$mensaje</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">conexionesDeClientes</span>[<span
     style="color: #001080;">$conexionDeClienteQueEnvia</span>];</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #a31515;">"</span></div>
  <div><span
     style="color: #a31515;">Origen:&nbsp;{</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">}</span></div>
  <div><span
     style="color: #a31515;">Mensaje: </span><span
     style="color: #001080;">$mensaje</span></div>
  <div><span
     style="color: #a31515;">"</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">conexionesDeClientes</span> as <span
     style="color: #001080;">$conexionDeCliente</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$conexionDeCliente</span>-&gt;<span
     style="color: #795e26;">send</span>(<span
     style="color: #001080;">$mensaje</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;Se invoca al cerrar la conexión de un
    cliente. */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">onClose</span>(<span
     style="color: #267f99;">ConnectionInterface</span> <span
     style="color: #001080;">$conexionDeCliente</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">conexionesDeClientes</span>-&gt;<span
     style="color: #795e26;">detach</span>(<span
     style="color: #001080;">$conexionDeCliente</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #a31515;">"Desconectado: "</span> . <span
     style="color: #001080;">$conexionDeCliente</span>-&gt;<span
     style="color: #001080;">resourceId</span> . <span
     style="color: #a31515;">"</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">"</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;Se invoca cuando hay un error en la
    conexión de un cliente. */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">onError</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">ConnectionInterface</span> <span
     style="color: #001080;">$conexionDeCliente</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Exception</span> <span
     style="color: #001080;">$error</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #a31515;">"Error: "</span> . <span
     style="color: #001080;">$error</span>-&gt;<span
     style="color: #795e26;">getMessage</span>() . <span
     style="color: #a31515;">"</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">"</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$conexionDeCliente</span>-&gt;<span
     style="color: #795e26;">close</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. main.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">'/vendor/autoload.php'</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Chat.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">use</span> Ratchet\Server\<span
     style="color: #267f99;">IoServer</span>;</div>
  <div><span
     style="color: #0000ff;">use</span> Ratchet\Http\<span
     style="color: #267f99;">HttpServer</span>;</div>
  <div><span
     style="color: #0000ff;">use</span> Ratchet\WebSocket\<span
     style="color: #267f99;">WsServer</span>;</div><br>
  <div><span
     style="color: #001080;">$server</span> = <span
     style="color: #267f99;">IoServer</span>::<span
     style="color: #795e26;">factory</span>(</div>
  <div>&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">HttpServer</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">WsServer</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Chat</span>()</div>
  <div>&nbsp;&nbsp;)</div>
  <div>&nbsp;),</div>
  <div>&nbsp;<span
     style="color: #098658;">80</span></div>
  <div>);</div><br>
  <div><span
     style="color: #001080;">$server</span>-&gt;<span
     style="color: #795e26;">run</span>();</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. composer.json</h1><muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"require"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"cboden/ratchet"</span>: <span
     style="color: #a31515;">"^0.4.4"</span></div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. .replit</h1><muestra-codigo>
 <div>run = ["php", "main.php"]</div>
 <div><br></div>
 <div>entrypoint = "main.php"</div>
 <div><br></div>
 <div>[nix]</div>
 <div>channel = "stable-22_11"</div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. replit.nix</h1><muestra-codigo>
 <div>{ pkgs }:&nbsp;{</div>
 <div>&nbsp;&nbsp;deps = [</div>
 <div>&nbsp;&nbsp;&nbsp;&nbsp;pkgs.php82</div>
 <div>&nbsp;&nbsp;&nbsp;&nbsp;pkgs.php82Packages.composer</div>
 <div>&nbsp;&nbsp;];</div>
 <div>}</div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >F. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró un chat sencillo.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section >
         <h1 >18. Ejemplo de streaming</h1><iframe src="/src/m15streaming/youtube.html" height="415"></iframe>
<p class="noPrint">
 <a href="/src/m15streaming/youtube.html" target="_blank" rel="nooper">Ábrelo
  en otra pestaña.</a>
</p>
<muestra-codigo>
 <div>
  <div><span style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #ff0000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span style="color: #800000;">&lt;html</span> <span
     style="color: #ff0000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span
     style="color: #ff0000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>YouTube<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div><span style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;h1&gt;</span>YouTube<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span style="color: #800000;">&lt;iframe</span> <span
     style="color: #ff0000;">width</span>=<span
     style="color: #0000ff;">"560"</span> <span
     style="color: #ff0000;">height</span>=<span
     style="color: #0000ff;">"315"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">src</span>=<span
     style="color: #0000ff;">"https://www.youtube.com/embed/DiItGE3eAyQ"</span>
  </div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">frameborder</span>=<span
     style="color: #0000ff;">"0"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allow</span>=<span
     style="color: #0000ff;">"accelerometer; autoplay; encrypted-media;
    gyroscope; picture-in-picture"</span></div>
  <div>&nbsp; &nbsp;<span style="color: #ff0000;">allowfullscreen</span><span
     style="color: #800000;">&gt;&lt;/iframe&gt;</span></div>
  <div><span style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >19. Relaciones a uno en la base de datos</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m17auno/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-agrega-html.html">agrega.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-modifica-html.html">modifica.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra el acceso a bases de datos que implementan
    relaciones a uno, usando servicios.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvauno?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvauno?v=1</a>.
      Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    La técnica aquí mostrada se usa en el lado con la llave foránea de las
    asocioaciones uno a uno y uno a muchos.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><figure>
 <img style="max-height: none;"
   src="/img/m17auno/aunoder.drawio.svg"
   alt="Diagrama entidad relación">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m17auno/aunorel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m17auno/aunopaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m17auno/aunodeploy.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m17auno/srvauno.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvauno?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvauno?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-agrega-html.html">agrega.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-modifica-html.html">modifica.html</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a
            href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-confirmaEliminar-js.html">confirmaEliminar.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeEntero-php.html">leeEntero.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvAmigoAgrega-php.html">srvAmigoAgrega.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvAmigoBusca-php.html">srvAmigoBusca.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvAmigoConsulta-php.html">srvAmigoConsulta.php</a>
      </p>
     </li>
     <li>
      <p><a href="m-srv/m-srvAmigoElimina-php.html">srvAmigoElimina.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvAmigoModifica-php.html">srvAmigoModifica.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvPasatiempoOpciones-php.html">srvPasatiempoOpciones.php</a>
      </p>
     </li>
     <li>
      <details>
       <summary>dao</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-amigoAgrega-php.html">amigoAgrega.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-amigoBusca-php.html">amigoBusca.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-amigoConsulta-php.html">amigoConsulta.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-amigoElimina-php.html">amigoElimina.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-amigoModifica-php.html">amigoModifica.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-pasatiempoAgrega-php.html">pasatiempoAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-pasatiempoConsulta-php.html">pasatiempoConsulta.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>modelo</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-modelo/m-Amigo-php.html">Amigo.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-modelo/m-Pasatiempo-php.html">Pasatiempo.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Relaciones a uno<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvAmigoConsulta.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Relaciones a uno<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"agrega.html"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. agrega.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Agregar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoOpciones.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">pasId</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span> <span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvAmigoAgrega.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Agregar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Pasatiempo</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;select</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"pasId"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;option</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">""</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/option&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/select&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. modifica.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Modificar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/confirmaEliminar.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvPasatiempoOpciones.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(async </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">modelo</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #af00db;">await</span><span
     style="color: #0000ff;"> </span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvAmigoBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">pasId</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #0000ff;"> </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #0070c1;">modelo</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvAmigoModifica.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Modificar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"id"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"Cargando&amp;hellip;"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Pasatiempo</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;select</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"pasId"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;option</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">""</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/option&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/select&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Guardar<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirmaEliminar</span><span
     style="color: #0000ff;">())&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvAmigoElimina.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Eliminar</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m17auno/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvAmigoAgrega-php.html">srv / srvAmigoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvAmigoBusca-php.html">srv / srvAmigoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvAmigoConsulta-php.html">srv / srvAmigoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvAmigoElimina-php.html">srv / srvAmigoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvAmigoModifica-php.html">srv / srvAmigoModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-srvPasatiempoOpciones-php.html">srv / srvPasatiempoOpciones.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m17auno/m-srv/m-modelo/m-Pasatiempo-php.html">srv / modelo / Pasatiempo.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-modelo/m-Amigo-php.html">srv / modelo / Amigo.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Pasatiempo.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Pasatiempo</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span> = <span
     style="color: #a31515;">""</span>, <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> = <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Faltala el nombre."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / modelo / Amigo.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Amigo</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> ?<span
     style="color: #267f99;">Pasatiempo</span> <span
     style="color: #001080;">$pasatiempo</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;?<span
     style="color: #267f99;">Pasatiempo</span> <span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> = <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">pasatiempo</span> = <span
     style="color: #001080;">$pasatiempo</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Faltala el nombre."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-amigoAgrega-php.html">srv / dao / amigoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-amigoBusca-php.html">srv / dao / amigoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-amigoConsulta-php.html">srv / dao / amigoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-amigoElimina-php.html">srv / dao / amigoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-amigoModifica-php.html">srv / dao / amigoModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-pasatiempoAgrega-php.html">srv / dao / pasatiempoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-srv/m-dao/m-pasatiempoConsulta-php.html">srv / dao / pasatiempoConsulta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> PASATIEMPO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_NOMBRE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PAS_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(PAS_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PAS_NOM_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(PAS_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> AMIGO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;AMI_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;AMI_NOMBRE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> AMI_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(AMI_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> AMI_NOM_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(AMI_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> AMI_PAS_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (PAS_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> PASATIEMPO(PAS_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/pasatiempoConsulta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/pasatiempoAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvauno.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #795e26;">pasatiempoConsulta</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">sizeof</span>(<span
     style="color: #001080;">$pasatiempo</span>) === <span
     style="color: #098658;">0</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(nombre: <span
     style="color: #a31515;">"Futbol"</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoAgrega</span>(<span
     style="color: #001080;">$pasatiempo</span>);</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(nombre: <span
     style="color: #a31515;">"Videojuegos"</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoAgrega</span>(<span
     style="color: #001080;">$pasatiempo</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / amigoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Amigo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">amigoAgrega</span>(<span
     style="color: #267f99;">Amigo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> AMIGO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(AMI_NOMBRE, PAS_ID)</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:nombre,
    :pasId)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":pasId"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasatiempo</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasatiempo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>&nbsp;}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / amigoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Amigo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">amigoBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$amiId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.AMI_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> amiId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.AMI_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> amiNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.PAS_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> pasId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PAS_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> pasNombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> AMIGO A</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> PASATIEMPO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> A.PAS_ID </span>=<span
     style="color: #a31515;"> P.PAS_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> A.AMI_ID </span>=<span
     style="color: #a31515;"> :amiId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":amiId"</span> =&gt; <span
     style="color: #001080;">$amiId</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #001080;">$obj</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$obj</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">pasId</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(nombre: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">pasNombre</span>, id: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">pasId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$amigo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Amigo</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;nombre: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">amiNombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;pasatiempo: <span
     style="color: #001080;">$pasatiempo</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;id: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">amiId</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$amigo</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / amigoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">amigoConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.AMI_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> amiId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.AMI_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> amiNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PAS_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> pasNombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> AMIGO A</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> PASATIEMPO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> A.PAS_ID </span>=<span
     style="color: #a31515;"> P.PAS_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> A.AMI_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / amigoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">amigoElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> AMIGO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> AMI_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / amigoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Amigo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">amigoModifica</span>(<span
     style="color: #267f99;">Amigo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> AMIGO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;AMI_NOMBRE </span>=<span
     style="color: #a31515;"> :nombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span>=<span
     style="color: #a31515;"> :pasId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> AMI_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":pasId"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasatiempo</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasatiempo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. srv / dao / pasatiempoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoAgrega</span>(<span
     style="color: #267f99;">Pasatiempo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(PAS_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:nombre)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. srv / dao / pasatiempoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Pasatiempo</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">pasatiempoConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PAS_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> nombre</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PASATIEMPO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> PAS_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Pasatiempo</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >C. srv / srvAmigoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Amigo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/amigoAgrega.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$pasId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"pasId"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #001080;">$pasId</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(id: <span
     style="color: #001080;">$pasId</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Amigo</span>(nombre: <span
     style="color: #001080;">$nombre</span>, pasatiempo: <span
     style="color: #001080;">$pasatiempo</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">amigoAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. srv / srvAmigoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/amigoBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">amigoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Amigo no encontrado."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasatiempo</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"pasId"</span> =&gt; <span
     style="color: #001080;">$pasatiempo</span> === <span
     style="color: #0000ff;">null</span> ? <span
     style="color: #0000ff;">null</span> : <span
     style="color: #001080;">$pasatiempo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;];</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvAmigoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/amigoConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">amigoConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$amiId</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">amiId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$amiNombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">amiNombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$pasNombre</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasNombre</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #a31515;">"&lt;em&gt;-- Sin pasatiempo --&lt;/em&gt;"</span>
  </div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">pasNombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;dt&gt;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$amiId</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$amiNombre</span><span
     style="color: #a31515;">}&lt;/a&gt;&lt;/dt&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$amiId</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$pasNombre</span><span
     style="color: #a31515;">}&lt;/a&gt;&lt;/dd&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvAmigoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/amigoElimina.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">amigoElimina</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvAmigoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Amigo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/amigoModifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$pasId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"pasId"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$pasatiempo</span> = <span
     style="color: #001080;">$pasId</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Pasatiempo</span>(id: <span
     style="color: #001080;">$pasId</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Amigo</span>(nombre: <span
     style="color: #001080;">$nombre</span>, pasatiempo: <span
     style="color: #001080;">$pasatiempo</span>, id: <span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">amigoModifica</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. srv / srvPasatiempoOpciones.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/pasatiempoConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">pasatiempoConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">"&lt;option value=''&gt;-- Sin pasatiempo
    --&lt;/option&gt;"</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .= <span
     style="color: #a31515;">"&lt;option value='</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}&lt;/option&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-confirmaEliminar-js.html">lib / js / confirmaEliminar.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / confirmaEliminar.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">confirmaEliminar</span>()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">confirm</span>(<span
     style="color: #a31515;">"Confirma la eliminación"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"confirmaEliminar"</span>] = <span
     style="color: #795e26;">confirmaEliminar</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >16. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >17. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m17auno/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-php/m-leeEntero-php.html">lib / php / leeEntero.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m17auno/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeEntero.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve el valor entero de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibido en el servidor por medio de
    GET,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;POST o cookie. Si parámetro no se
    puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;convertir a entero, se genera un
    error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Si el parámetro no se recibe,
    devuelve</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;null.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): ?<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el acceso a bases de datos que implementan
    relaciones a uno, usando servicios..
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >20. Relaciones a muchos - Usuarios y roles</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m18amuchos/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-agrega-html.html">agrega.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-modifica-html.html">modifica.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra el acceso a bases de datos que implementan
    relaciones a muchos, usando servicios.
   </p>
  </li>
  <li>
   <p>
    El ejemplo es una estructura de usuarios y roles.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvamuchos?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvamuchos?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    La técnica aquí mostrada se usa para el lado muchos de una asociación uno a
    muchos y en cualquiera de los lados de una asociación muchos a muchos.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Algunos navegadores web bloquean las interfaces que muestran etiquetas como
    <q>usuario</q>, <q>id</q>, <q>email</q>, etcétera, suponiendo que es un
    intento de engañar al usuario; para evitar este problema, al campo con el
    nombre de usuario se le llama <q>cue</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m18amuchos/amuchosder.drawio.svg"
   alt="Diagrama entidad relación">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m18amuchos/amuchosrel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m18amuchos/amuchospaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m18amuchos/amuchosdeploy.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m18amuchos/srvamuchos.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvamuchos?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvamuchos?v=1</a>.
      Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1>
  <div class="lectura">
   <p>Haz clic en los triángulos para expandir las carpetas</p>
   <ul class="tree">
  <li>
   <p><a href="m-agrega-html.html">agrega.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-modifica-html.html">modifica.html</a></p>
  </li>
    <li>
     <details>
      <summary>lib</summary>
      <ul>
    <li>
     <details>
      <summary>js</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-confirmaEliminar-js.html">confirmaEliminar.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>php</summary>
      <ul>
  <li>
   <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeArray-php.html">leeArray.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeEntero-php.html">leeEntero.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
  </li>
  <li>
   <p><a href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>srv</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-srvRolOpciones-php.html">srvRolOpciones.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvUsuarioAgrega-php.html">srvUsuarioAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvUsuarioBusca-php.html">srvUsuarioBusca.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvUsuarioConsulta-php.html">srvUsuarioConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvUsuarioElimina-php.html">srvUsuarioElimina.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-srvUsuarioModifica-php.html">srvUsuarioModifica.php</a></p>
  </li>
    <li>
     <details>
      <summary>dao</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-rolAgrega-php.html">rolAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-rolConsulta-php.html">rolConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuarioAgrega-php.html">usuarioAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuarioBusca-php.html">usuarioBusca.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuarioConsulta-php.html">usuarioConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuarioElimina-php.html">usuarioElimina.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuarioModifica-php.html">usuarioModifica.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuRolAgrega-php.html">usuRolAgrega.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuRolConsulta-php.html">usuRolConsulta.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-dao/m-usuRolElimina-php.html">usuRolElimina.php</a></p>
  </li>
      </ul>
     </details>
    </li>
    <li>
     <details>
      <summary>modelo</summary>
      <ul>
  <li>
   <p><a href="m-srv/m-modelo/m-Rol-php.html">Rol.php</a></p>
  </li>
  <li>
   <p><a href="m-srv/m-modelo/m-Usuario-php.html">Usuario.php</a></p>
  </li>
      </ul>
     </details>
    </li>
      </ul>
     </details>
    </li>
   </ul>
  </div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Relaciones a muchos<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvUsuarioConsulta.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Relaciones a muchos<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"agrega.html"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. agrega.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Agregar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvRolOpciones.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">roles</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvUsuarioAgrega.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Agregar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Usamos cue para que los navegadores no
    bloqueen la página. --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Cue *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"cue"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;fieldset&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;legend&gt;</span>Roles<span
     style="color: #800000;">&lt;/legend&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;div</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"roles"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/div&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/fieldset&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. modifica.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Modificar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/confirmaEliminar.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvRolOpciones.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(async </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">modelo</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #af00db;">await</span><span
     style="color: #0000ff;"> </span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #795e26;">fetch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvUsuarioBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">roles</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">opciones</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #0000ff;"> </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #0070c1;">modelo</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvUsuarioModifica.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Modificar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"id"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Usamos cue para que los navegadores no
    bloqueen la página. --&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Cue *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"cue"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"Cargando&amp;hellip;"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;fieldset&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;legend&gt;</span>Roles<span
     style="color: #800000;">&lt;/legend&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;div</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"roles"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/div&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/fieldset&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Guardar<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirmaEliminar</span><span
     style="color: #0000ff;">())&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvUsuarioElimina.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Eliminar</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvRolOpciones-php.html">srv / srvRolOpciones.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvUsuarioAgrega-php.html">srv / srvUsuarioAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvUsuarioBusca-php.html">srv / srvUsuarioBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvUsuarioConsulta-php.html">srv / srvUsuarioConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvUsuarioElimina-php.html">srv / srvUsuarioElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-srvUsuarioModifica-php.html">srv / srvUsuarioModifica.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-modelo/m-Rol-php.html">srv / modelo / Rol.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-modelo/m-Usuario-php.html">srv / modelo / Usuario.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Rol.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Rol</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$descripcion</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$descripcion</span> = <span
     style="color: #a31515;">""</span>, <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">descripcion</span> = <span
     style="color: #001080;">$descripcion</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">descripcion</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Faltala la descripción."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / modelo / Usuario.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Rol.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Usuario</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$roles</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$roles</span> = [],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cue</span> = <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">roles</span> = <span
     style="color: #001080;">$roles</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cue</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el cue."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">$rol</span> instanceof <span
     style="color: #267f99;">Rol</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Tipo incorrecto para un rol."</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-rolAgrega-php.html">srv / dao / rolAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-rolConsulta-php.html">srv / dao / rolConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuarioAgrega-php.html">srv / dao / usuarioAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuarioBusca-php.html">srv / dao / usuarioBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuarioConsulta-php.html">srv / dao / usuarioConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuarioElimina-php.html">srv / dao / usuarioElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuarioModifica-php.html">srv / dao / usuarioModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuRolAgrega-php.html">srv / dao / usuRolAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuRolConsulta-php.html">srv / dao / usuRolConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-srv/m-dao/m-usuRolElimina-php.html">srv / dao / usuRolElimina.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> USUARIO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_CUE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(USU_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_CUE_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(USU_CUE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> ROL (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> ROL_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(ROL_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> ROL_DESCR_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(ROL_DESCRIPCION)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> USU_ROL (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(USU_ID, ROL_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_USU_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (USU_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> USUARIO(USU_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_ROL_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (ROL_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> ROL(ROL_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/rolConsulta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/rolAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvamuchos.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">sizeof</span>(<span
     style="color: #795e26;">rolConsulta</span>()) === <span
     style="color: #098658;">0</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$administrador</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;id: <span
     style="color: #a31515;">"Administrador"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;descripcion: <span
     style="color: #a31515;">"Administra el sistema."</span></div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #001080;">$administrador</span>);</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$cliente</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;id: <span
     style="color: #a31515;">"Cliente"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;descripcion: <span
     style="color: #a31515;">"Realiza compras."</span></div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #001080;">$cliente</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / rolAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #267f99;">Rol</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(ROL_ID,
    ROL_DESCRIPCION)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:id,
    :descripcion)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":descripcion"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">descripcion</span></div>
  <div>&nbsp;]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / rolConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">rolConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> descripcion</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> ROL_ID</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Rol</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / usuarioAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioAgrega</span>(<span
     style="color: #267f99;">Usuario</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(USU_CUE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:cue)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":cue"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cue</span>,</div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuRolAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / usuarioBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolConsulta.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$usuId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_CUE </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> cue</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> USU_ID </span>=<span
     style="color: #a31515;"> :usuId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuId</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Usuario</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">false</span><span
     style="color: #008000;">|</span><span
     style="color: #267f99;">Usuario</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$usuario</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span> = <span
     style="color: #795e26;">usuRolConsulta</span>(<span
     style="color: #001080;">$usuId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$usuario</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / usuarioConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;U.USU_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> usuId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;U.USU_CUE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> usuCue,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;GROUP_CONCAT(R.ROL_ID, ',
    ') </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> roles</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USUARIO U</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> USU_ROL UR</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> U.USU_ID </span>=<span
     style="color: #a31515;"> UR.USU_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> ROL R</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> UR.ROL_ID </span>=<span
     style="color: #a31515;"> R.ROL_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">GROUP BY</span><span
     style="color: #a31515;"> U.USU_CUE</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> U.USU_CUE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. srv / dao / usuarioElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolElimina.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuRolElimina</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> USU_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. srv / dao / usuarioModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div>&nbsp;<span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolAgrega.php"</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolElimina.php"</span>;</div>
  <div>&nbsp;</div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioModifica</span>(<span
     style="color: #267f99;">Usuario</span> <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span><span
     style="color: #a31515;"> USU_CUE </span>=<span
     style="color: #a31515;"> :cue</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> USU_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":cue"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cue</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuRolElimina</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuRolAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. srv / dao / usuRolAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuRolAgrega</span>(<span
     style="color: #267f99;">Usuario</span> <span
     style="color: #001080;">$usuario</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$roles</span> = <span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">sizeof</span>(<span
     style="color: #001080;">$roles</span>) &gt; <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> USU_ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(USU_ID,
    ROL_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(:usuId,
    :rolId)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":rolId"</span> =&gt; <span
     style="color: #001080;">$rol</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;]</div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. srv / dao / usuRolConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuRolConsulta</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$usuId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;UR.ROL_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;R.ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> descripcion</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USU_ROL UR, ROL R</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;UR.ROL_ID </span>=<span
     style="color: #a31515;"> R.ROL_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> UR.USU_ID </span>=<span
     style="color: #a31515;"> :usuId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> UR.ROL_ID</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuId</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Rol</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. srv / dao / usuRolElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuRolElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$usuId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USU_ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> USU_ID </span>=<span
     style="color: #a31515;"> :usuId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuId</span>]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >C. srv / srvRolOpciones.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/rolConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">rolConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$descripcion</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">descripcion</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;p&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label
    style='display: flex'&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input
    type='checkbox' name='rolIds[]' value='</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">'&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;strong&gt;{</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">}&lt;/strong&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;{</span><span
     style="color: #001080;">$descripcion</span><span
     style="color: #a31515;">}</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/label&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. srv / srvUsuarioAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeArray.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioAgrega.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"cue"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$rolIds</span> = <span
     style="color: #795e26;">leeArray</span>(<span
     style="color: #a31515;">"rolIds"</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> $roles */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$roles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$rolIds</span> as <span
     style="color: #001080;">$rolId</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$roles</span>[] = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(id: <span
     style="color: #001080;">$rolId</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Usuario</span>(cue: <span
     style="color: #001080;">$cue</span>, roles: <span
     style="color: #001080;">$roles</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuarioAgrega</span>(<span
     style="color: #001080;">$usuario</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$usuario</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvUsuarioBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">usuarioBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Usuario no encontrado."</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$rolIds</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$rolIds</span>[] = <span
     style="color: #001080;">$rol</span>-&gt;<span
     style="color: #001080;">id</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"cue"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cue</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"rolIds[]"</span> =&gt; <span
     style="color: #001080;">$rolIds</span></div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvUsuarioConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">usuarioConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$usuId</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">usuId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$usuCue</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">usuCue</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$roles</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">roles</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">roles</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #a31515;">"&lt;em&gt;-- Sin roles --&lt;/em&gt;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">roles</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;dt&gt;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$usuId</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$usuCue</span><span
     style="color: #a31515;">}&lt;/a&gt;&lt;/dt&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$usuId</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$roles</span><span
     style="color: #a31515;">}&lt;/a&gt;&lt;/dd&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvUsuarioElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioElimina.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuarioElimina</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. srv / srvUsuarioModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeArray.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioModifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"cue"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$rolIds</span> = <span
     style="color: #795e26;">leeArray</span>(<span
     style="color: #a31515;">"rolIds"</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> $roles */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$roles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$rolIds</span> as <span
     style="color: #001080;">$rolId</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$roles</span>[] = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(id: <span
     style="color: #001080;">$rolId</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Usuario</span>(cue: <span
     style="color: #001080;">$cue</span>, roles: <span
     style="color: #001080;">$roles</span>, id: <span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuarioModifica</span>(<span
     style="color: #001080;">$usuario</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$usuario</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-confirmaEliminar-js.html">lib / js / confirmaEliminar.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / confirmaEliminar.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">confirmaEliminar</span>()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">confirm</span>(<span
     style="color: #a31515;">"Confirma la eliminación"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"confirmaEliminar"</span>] = <span
     style="color: #795e26;">confirmaEliminar</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >16. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >17. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/m-leeArray-php.html">lib / php / leeArray.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/m-leeEntero-php.html">lib / php / leeEntero.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m18amuchos/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeArray.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve los valores asociados a
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;parámetro multivaluado; por ejemplo,
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;grupo de checkbox, recibido en el
    servidor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;por medio de GET, POST o cookie. Si no
    se</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibe el parámetro, devuelve un
    arreglo</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;vacío. Si el valor recibido no es
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;arreglo, lo coloca dentro de
    uno.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string[]</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeArray</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">is_array</span>(<span
     style="color: #001080;">$valor</span>)</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$valor</span></div>
  <div>&nbsp;&nbsp;: [<span
     style="color: #001080;">$valor</span>];</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / leeEntero.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve el valor entero de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibido en el servidor por medio de
    GET,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;POST o cookie. Si parámetro no se
    puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;convertir a entero, se genera un
    error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Si el parámetro no se recibe,
    devuelve</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;null.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): ?<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el acceso a bases de datos que implementan
    relaciones a muchos, usando servicios. El ejemplo también implementa una
    estructura de usuarios y roles.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >21. Autenticación</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m19aut/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-perfil-html.html">perfil.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-login-html.html">login.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-admin-html.html">admin.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-cliente-html.html">cliente.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/">Carpeta « js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se amplía el ejemplo de la lección anterior para controlar
    el acceso a una app.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvaut?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvaut?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>Prueba con los siguientes usarios y contraseñas:</p>
   <dl>
    <dt>pepito</dt>
    <dd>cuentos</dd>
    <dt>susana</dt>
    <dd>alegria</dd>
    <dt>bebe</dt>
    <dd>saurio</dd>
   </dl>
  </li>
  <li>
   <p>
    Este ejmplo se puede complementar usando reCaptcha..
   </p>
  </li>
  <li>
   <p>
    Este ejemplo usa <dfn>sesión en el navegador</dfn>, que es un archivo en el
    servidor que permite guardar la información del usuario. Este mecanismo está
    cayendo en desuso, porque limita la veocidad del servidor y lo expone a
    fallas de seguridad.
   </p>
  </li>
  <li>
   <p>
    Hoy en día se prefiere usar servidores de <dfn>OAuth 2</dfn> para autenticar
    usuarios. Los principales servidores para este tipo de autenticación son
    Google, Facebook y Microsoft.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Algunos navegadores web bloquean las interfaces que muestran etiquetas como
    <q>contraseña</q>, <q>usuario</q>, <q>id</q>, <q>email</q>, etcétera,
    suponiendo que es un
    intento de engañar al usuario; para evitar este problema, al campo con el
    nombre de usuario se le llama <q>cue</q> y a la conreaseña <q>match</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m19aut/autder.drawio.svg"
   alt="Diagrama entidad relación">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m19aut/autrel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m19aut/autpaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m19aut/autdeploy.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m19aut/srvaut.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvaut?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvaut?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-admin-html.html">admin.html</a></p>
  </li>
  <li>
   <p><a href="m-cliente-html.html">cliente.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-login-html.html">login.html</a></p>
  </li>
  <li>
   <p><a href="m-perfil-html.html">perfil.html</a></p>
  </li>
  <li>
   <details>
    <summary>js</summary>
    <ul>
     <li>
      <p><a href="m-js/m-Sesion-js.html">Sesion.js</a></p>
     </li>
     <li>
      <details>
       <summary>const</summary>
       <ul>
        <li>
         <p><a href="m-js/m-const/m-CUE-js.html">CUE.js</a></p>
        </li>
        <li>
         <p><a
            href="m-js/m-const/m-ROL_ADMINISTRADOR-js.html">ROL_ADMINISTRADOR.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-js/m-const/m-ROL_CLIENTE-js.html">ROL_CLIENTE.js</a></p>
        </li>
        <li>
         <p><a href="m-js/m-const/m-ROL_IDS-js.html">ROL_IDS.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>custom</summary>
       <ul>
        <li>
         <p><a href="m-js/m-custom/m-mi-nav-js.html">mi-nav.js</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-htmlentities-js.html">htmlentities.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvLogin-php.html">srvLogin.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvLogout-php.html">srvLogout.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvSaludoCliente-php.html">srvSaludoCliente.php</a>
      </p>
     </li>
     <li>
      <p><a href="m-srv/m-srvSesion-php.html">srvSesion.php</a></p>
     </li>
     <li>
      <details>
       <summary>const</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-const/m-CUE-php.html">CUE.php</a></p>
        </li>
        <li>
         <p><a
            href="m-srv/m-const/m-ROL_ADMINISTRADOR-php.html">ROL_ADMINISTRADOR.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-const/m-ROL_CLIENTE-php.html">ROL_CLIENTE.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-const/m-ROL_IDS-php.html">ROL_IDS.php</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>dao</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-rolAgrega-php.html">rolAgrega.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-rolConsulta-php.html">rolConsulta.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-usuarioAgrega-php.html">usuarioAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-usuarioBuscaCue-php.html">usuarioBuscaCue.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-usuarioVerifica-php.html">usuarioVerifica.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-usuRolAgrega-php.html">usuRolAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-usuRolConsulta-php.html">usuRolConsulta.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>modelo</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-modelo/m-Rol-php.html">Rol.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-modelo/m-Usuario-php.html">Usuario.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Autenticación<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/custom/mi-nav.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/Sesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSesion.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> new </span><span
     style="color: #795e26;">Sesion</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nav</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;mi-nav</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nav"</span><span
     style="color: #800000;">&gt;&lt;/mi-nav&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Autenticación<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>Bienvenid@.<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. perfil.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Perfil<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/custom/mi-nav.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/Sesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSesion.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> new </span><span
     style="color: #795e26;">Sesion</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nav</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">cue</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">cue</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #0070c1;">cue</span><span
     style="color: #0000ff;"> </span>===<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">''</span><span
     style="color: #0000ff;">)&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">login</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> false</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">outputCue</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'No ha iniciado sesión.'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">outputRoles</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">''</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">logout</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> false</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">outputCue</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">cue</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">rolIds</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">rolIds</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">outputRoles</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">rolIds</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">size</span><span
     style="color: #0000ff;"> </span>===<span
     style="color: #0000ff;"> </span><span
     style="color: #098658;">0</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>?<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'Sin roles'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </span><span
     style="color: #267f99;">Array</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">from</span><span
     style="color: #0000ff;">(</span><span
     style="color: #0070c1;">rolIds</span><span
     style="color: #0000ff;">).</span><span
     style="color: #795e26;">join</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">', '</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;mi-nav</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nav"</span><span
     style="color: #800000;">&gt;&lt;/mi-nav&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Perfil<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"outputCue"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"outputRoles"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;a</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"login"</span> <span
     style="color: #e50000;">hidden</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"login.html"</span><span
     style="color: #800000;">&gt;</span>Iniciar sesión<span
     style="color: #800000;">&lt;/a&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"logout"</span> <span
     style="color: #e50000;">hidden</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvLogout.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">reload</span><span
     style="color: #0000ff;">())</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Terminar sesión</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. login.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Iniciar sesión<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/custom/mi-nav.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/Sesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSesion.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> new </span><span
     style="color: #795e26;">Sesion</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">cue</span><span
     style="color: #0000ff;"> </span>===<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">''</span><span
     style="color: #0000ff;">)&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nav</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">login</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> false</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'perfil.html'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;mi-nav</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nav"</span><span
     style="color: #800000;">&gt;&lt;/mi-nav&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"login"</span> <span
     style="color: #e50000;">hidden</span> <span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvLogin.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">login</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'perfil.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Iniciar Sesión<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Cue</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"cue"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Match</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"password"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"match"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Iniciar sesión<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >K. admin.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Solo Administradores<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/const/ROL_ADMINISTRADOR.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/custom/mi-nav.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/Sesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSesion.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> new </span><span
     style="color: #795e26;">Sesion</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">rolIds</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">has</span><span
     style="color: #0000ff;">(</span><span
     style="color: #0070c1;">ROL_ADMINISTRADOR</span><span
     style="color: #0000ff;">))&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nav</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">main</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> false</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;mi-nav</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nav"</span><span
     style="color: #800000;">&gt;&lt;/mi-nav&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;main</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"main"</span> <span
     style="color: #e50000;">hidden</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Solo Administradores<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>Hola.<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSaludoCliente.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">saludo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">saludo</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Ejecuta servicio</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/main&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >L. cliente.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Solo Clientes<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/const/ROL_CLIENTE.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/custom/mi-nav.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"./js/Sesion.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSesion.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;const </span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> new </span><span
     style="color: #795e26;">Sesion</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #0070c1;">sesion</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">rolIds</span><span
     style="color: #0000ff;">.</span><span
     style="color: #795e26;">has</span><span
     style="color: #0000ff;">(</span><span
     style="color: #0070c1;">ROL_CLIENTE</span><span
     style="color: #0000ff;">))&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">nav</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">sesion</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">sesion</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">main</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> false</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #0000ff;">&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;mi-nav</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"nav"</span><span
     style="color: #800000;">&gt;&lt;/mi-nav&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;main</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"main"</span> <span
     style="color: #e50000;">hidden</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Solo Clientes<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>Hola.<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span> <span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvSaludoCliente.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">saludo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">saludo</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Ejecuta servicio</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/main&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >M. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >N. Carpeta « js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m19aut/m-js/m-const/">Carpeta « js / const »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/m-Sesion-js.html">js / Sesion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/m-custom/">Carpeta « js / custom »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « js / const »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-js/m-const/m-CUE-js.html">js / const / CUE.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/m-const/m-ROL_ADMINISTRADOR-js.html">js / const / ROL_ADMINISTRADOR.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/m-const/m-ROL_CLIENTE-js.html">js / const / ROL_CLIENTE.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-js/m-const/m-ROL_IDS-js.html">js / const / ROL_IDS.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. js / const / CUE.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">CUE</span> = <span
     style="color: #a31515;">"cue"</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. js / const / ROL_ADMINISTRADOR.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">ROL_ADMINISTRADOR</span> = <span
     style="color: #a31515;">"Administrador"</span></div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    constante.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ROL_ADMINISTRADOR"</span>] = <span
     style="color: #0070c1;">ROL_ADMINISTRADOR</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. js / const / ROL_CLIENTE.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">ROL_CLIENTE</span> = <span
     style="color: #a31515;">"Cliente"</span></div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    constante.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ROL_CLIENTE"</span>] = <span
     style="color: #0070c1;">ROL_CLIENTE</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. js / const / ROL_IDS.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">ROL_IDS</span> = <span
     style="color: #a31515;">"rolIds"</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >B. js / Sesion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">CUE</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./const/CUE.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ROL_IDS</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./const/ROL_IDS.js"</span></div><br>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Sesion</span>&nbsp;{</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*/</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">constructor</span>(<span
     style="color: #001080;">objeto</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@readonly</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">this</span>.<span
     style="color: #001080;">cue</span> = <span
     style="color: #001080;">objeto</span>[<span
     style="color: #0070c1;">CUE</span>]</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0000ff;">this</span>.<span
     style="color: #001080;">cue</span> !== <span
     style="color: #a31515;">"string"</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"cue debe ser string."</span>)</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@readonly</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">rolIds</span> = <span
     style="color: #001080;">objeto</span>[<span
     style="color: #0070c1;">ROL_IDS</span>]</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">rolIds</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"rolIds debe ser arreglo."</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@readonly</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">this</span>.<span
     style="color: #001080;">rolIds</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #0070c1;">rolIds</span>)</div><br>
  <div>&nbsp;}</div><br>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    clase.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"Sesion"</span>] = <span
     style="color: #267f99;">Sesion</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >C. Carpeta « js / custom »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-js/m-custom/m-mi-nav-js.html">js / custom / mi-nav.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. js / custom / mi-nav.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">htmlentities</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"../../lib/js/htmlentities.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">Sesion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"../Sesion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ROL_ADMINISTRADOR</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"../const/ROL_ADMINISTRADOR.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ROL_CLIENTE</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"../const/ROL_CLIENTE.js"</span></div><br>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">MiNav</span> <span
     style="color: #0000ff;">extends</span> <span
     style="color: #267f99;">HTMLElement</span>&nbsp;{</div><br>
  <div>&nbsp;<span
     style="color: #795e26;">connectedCallback</span>()&nbsp;{</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">this</span>.<span
     style="color: #001080;">style</span>.<span
     style="color: #001080;">display</span> = <span
     style="color: #a31515;">"block"</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">this</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #008000;">/*&nbsp;html */</span></div>
  <div>&nbsp;&nbsp;&nbsp;`<span
     style="color: #800000;">&lt;nav&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;ul</span> <span
     style="color: #e50000;">style</span>=<span
     style="color: #0000ff;">"display: flex;</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flex-wrap:
    wrap;</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;padding:0;</span>
  </div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gap:
    0.5em;</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list-style-type:
    none"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;li&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/li&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/ul&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/nav&gt;</span>`</div><br>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Sesion}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">sesion</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*/</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">set</span> <span
     style="color: #795e26;">sesion</span>(<span
     style="color: #001080;">sesion</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">cue</span> = <span
     style="color: #001080;">sesion</span>.<span
     style="color: #001080;">cue</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">rolIds</span> = <span
     style="color: #001080;">sesion</span>.<span
     style="color: #001080;">rolIds</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">innerHTML</span> =<span
     style="color: #008000;"> /*&nbsp;html */ </span>`<span
     style="color: #800000;">&lt;li&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Inicio<span
     style="color: #800000;">&lt;/a&gt;&lt;/li&gt;</span>`</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">innerHTML</span> += <span
     style="color: #0000ff;">this</span>.<span
     style="color: #795e26;">hipervinculosAdmin</span>(<span
     style="color: #0070c1;">rolIds</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">innerHTML</span> += <span
     style="color: #0000ff;">this</span>.<span
     style="color: #795e26;">hipervinculosCliente</span>(<span
     style="color: #0070c1;">rolIds</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">cueHtml</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #0070c1;">cue</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">cue</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">innerHTML</span> += <span
     style="color: #008000;">&nbsp;/*&nbsp;html */ </span>`<span
     style="color: #800000;">&lt;li&gt;${</span><span
     style="color: #0070c1;">cueHtml</span><span
     style="color: #800000;">}&lt;/li&gt;</span>`</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">innerHTML</span> +=<span
     style="color: #008000;"> /*&nbsp;html */ </span>`<span
     style="color: #800000;">&lt;li&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"perfil.html"</span><span
     style="color: #800000;">&gt;</span>Perfil<span
     style="color: #800000;">&lt;/a&gt;&lt;/li&gt;</span>`</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">ul</span> = <span
     style="color: #0000ff;">this</span>.<span
     style="color: #795e26;">querySelector</span>(<span
     style="color: #a31515;">"ul"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">ul</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">ul</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">innerHTML</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Set&lt;string&gt;}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">rolIds</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*/</span></div>
  <div>&nbsp;<span
     style="color: #795e26;">hipervinculosAdmin</span>(<span
     style="color: #001080;">rolIds</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">rolIds</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">ROL_ADMINISTRADOR</span>) ?</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">&nbsp;/*&nbsp;html */ </span>`<span
     style="color: #800000;">&lt;li&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"admin.html"</span><span
     style="color: #800000;">&gt;</span>Para administradores<span
     style="color: #800000;">&lt;/a&gt;&lt;/li&gt;</span>`</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Set&lt;string&gt;}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">rolIds</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*/</span></div>
  <div>&nbsp;<span
     style="color: #795e26;">hipervinculosCliente</span>(<span
     style="color: #001080;">rolIds</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">rolIds</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">ROL_CLIENTE</span>) ?</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">&nbsp;/*&nbsp;html */ </span>`<span
     style="color: #800000;">&lt;li&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"cliente.html"</span><span
     style="color: #800000;">&gt;</span>Para clientes<span
     style="color: #800000;">&lt;/a&gt;&lt;/li&gt;</span>`</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #001080;">customElements</span>.<span
     style="color: #795e26;">define</span>(<span
     style="color: #a31515;">"mi-nav"</span>, <span
     style="color: #267f99;">MiNav</span>)</div>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section>
         <h1 >O. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m19aut/m-srv/m-const/">Carpeta « srv / const »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-srvLogin-php.html">srv / srvLogin.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-srvLogout-php.html">srv / srvLogout.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-srvSaludoCliente-php.html">srv / srvSaludoCliente.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-srvSesion-php.html">srv / srvSesion.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / const »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-srv/m-const/m-CUE-php.html">srv / const / CUE.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-const/m-ROL_ADMINISTRADOR-php.html">srv / const / ROL_ADMINISTRADOR.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-const/m-ROL_CLIENTE-php.html">srv / const / ROL_CLIENTE.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-const/m-ROL_IDS-php.html">srv / const / ROL_IDS.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / const / CUE.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">const</span> CUE = <span
     style="color: #a31515;">"cue"</span>;</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / const / ROL_ADMINISTRADOR.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">const</span> ROL_ADMINISTRADOR = <span
     style="color: #a31515;">"Administrador"</span>;</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / const / ROL_CLIENTE.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">const</span> ROL_CLIENTE = <span
     style="color: #a31515;">"Cliente"</span>;</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / const / ROL_IDS.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">const</span> ROL_IDS = <span
     style="color: #a31515;">"rolIds"</span>;</div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-srv/m-modelo/m-Rol-php.html">srv / modelo / Rol.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-modelo/m-Usuario-php.html">srv / modelo / Usuario.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Rol.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Rol</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$descripcion</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$descripcion</span> = <span
     style="color: #a31515;">""</span>, <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">descripcion</span> = <span
     style="color: #001080;">$descripcion</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">descripcion</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Faltala la descripción."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / modelo / Usuario.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Rol.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Usuario</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$match</span>;</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$roles</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$match</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$roles</span> = [],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cue</span> = <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">match</span> = <span
     style="color: #001080;">$match</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">roles</span> = <span
     style="color: #001080;">$roles</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cue</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el cue."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">match</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el match."</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">$rol</span> instanceof <span
     style="color: #267f99;">Rol</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Tipo incorrecto para un rol."</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >C. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-rolAgrega-php.html">srv / dao / rolAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-rolConsulta-php.html">srv / dao / rolConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-usuarioAgrega-php.html">srv / dao / usuarioAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-usuarioBuscaCue-php.html">srv / dao / usuarioBuscaCue.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-usuarioVerifica-php.html">srv / dao / usuarioVerifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-usuRolAgrega-php.html">srv / dao / usuRolAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-srv/m-dao/m-usuRolConsulta-php.html">srv / dao / usuRolConsulta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> USUARIO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_CUE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_MATCH </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(USU_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_CUE_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(USU_CUE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> ROL (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> ROL_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(ROL_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> ROL_DESCR_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(ROL_DESCRIPCION)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> USU_ROL (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(USU_ID, ROL_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_USU_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (USU_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> USUARIO(USU_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> USU_ROL_ROL_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (ROL_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> ROL(ROL_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../const/ROL_CLIENTE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../const/ROL_ADMINISTRADOR.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuarioBuscaCue.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuarioAgrega.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/rolConsulta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/rolAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvaut.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$roles</span> = <span
     style="color: #795e26;">rolConsulta</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">sizeof</span>(<span
     style="color: #001080;">$roles</span>) === <span
     style="color: #098658;">0</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$administrador</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;id: ROL_ADMINISTRADOR,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;descripcion: <span
     style="color: #a31515;">"Administra el sistema."</span></div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #001080;">$administrador</span>);</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$cliente</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Rol</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;id: ROL_CLIENTE,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;descripcion: <span
     style="color: #a31515;">"Realiza compras."</span></div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #001080;">$cliente</span>);</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioBuscaCue</span>(<span
     style="color: #a31515;">"pepito"</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #001080;">$usuario</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Usuario</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cue: <span
     style="color: #a31515;">"pepito"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">match</span>: "cuentos",</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roles: [$cliente]</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;usuarioAgrega(<span
     style="color: #001080;">$usuario</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioBuscaCue</span>(<span
     style="color: #a31515;">"susana"</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #001080;">$usuario</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Usuario</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cue: <span
     style="color: #a31515;">"susana"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">match</span>: "alegria",</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roles: [$administrador]</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;usuarioAgrega(<span
     style="color: #001080;">$usuario</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioBuscaCue</span>(<span
     style="color: #a31515;">"bebe"</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #001080;">$usuario</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Usuario</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cue: <span
     style="color: #a31515;">"bebe"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">match</span>: "saurio",</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roles: [$administrador, $cliente]</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;usuarioAgrega(<span
     style="color: #001080;">$usuario</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / rolAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">rolAgrega</span>(<span
     style="color: #267f99;">Rol</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(ROL_ID,
    ROL_DESCRIPCION)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:id,
    :descripcion)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":descripcion"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">descripcion</span></div>
  <div>&nbsp;]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / rolConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">rolConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> descripcion</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> ROL_ID</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Rol</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / usuarioAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioAgrega</span>(<span
     style="color: #267f99;">Usuario</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(USU_CUE, USU_MATCH)</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:cue, :match)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":cue"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cue</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":match"</span> =&gt; <span
     style="color: #795e26;">password_hash</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">match</span>, PASSWORD_DEFAULT)</div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>&nbsp;<span
     style="color: #795e26;">usuRolAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / usuarioBuscaCue.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuRolConsulta.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioBuscaCue</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_CUE </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> cue,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;USU_MATCH </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> match</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USUARIO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> USU_CUE </span>=<span
     style="color: #a31515;"> :cue</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":cue"</span> =&gt; <span
     style="color: #001080;">$cue</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Usuario</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">false</span><span
     style="color: #008000;">|</span><span
     style="color: #267f99;">Usuario</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$usuario</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span> = <span
     style="color: #795e26;">usuRolConsulta</span>(<span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$usuario</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / usuarioVerifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/usuarioBuscaCue.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuarioVerifica</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$cue</span>, <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$match</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioBuscaCue</span>(<span
     style="color: #001080;">$cue</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$usuario</span> !== <span
     style="color: #0000ff;">false</span> &amp;&amp; <span
     style="color: #795e26;">password_verify</span>(<span
     style="color: #001080;">$match</span>, <span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">match</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$usuario</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. srv / dao / usuRolAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Usuario.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuRolAgrega</span>(<span
     style="color: #267f99;">Usuario</span> <span
     style="color: #001080;">$usuario</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$roles</span> = <span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">sizeof</span>(<span
     style="color: #001080;">$roles</span>) &gt; <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> USU_ROL</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(USU_ID,
    ROL_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(:usuId,
    :rolId)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":rolId"</span> =&gt; <span
     style="color: #001080;">$rol</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;]</div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. srv / dao / usuRolConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">usuRolConsulta</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$usuId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;UR.ROL_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;R.ROL_DESCRIPCION
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> descripcion</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> USU_ROL UR, ROL R</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;UR.ROL_ID </span>=<span
     style="color: #a31515;"> R.ROL_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> UR.USU_ID </span>=<span
     style="color: #a31515;"> :usuId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> UR.ROL_ID</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":usuId"</span> =&gt; <span
     style="color: #001080;">$usuId</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Rol</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >D. srv / srvLogin.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/CUE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_IDS.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioVerifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"cue"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$match</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"match"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioVerifica</span>(<span
     style="color: #001080;">$cue</span>, <span
     style="color: #001080;">$match</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$usuario</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Datos incorrectos."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$rolIds</span> = [];</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$rolIds</span>[] = <span
     style="color: #001080;">$rol</span>-&gt;<span
     style="color: #001080;">id</span>;</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[CUE] = <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS] = <span
     style="color: #001080;">$rolIds</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;&nbsp;CUE =&gt; <span
     style="color: #001080;">$cue</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;ROL_IDS =&gt; <span
     style="color: #001080;">$rolIds</span></div>
  <div>&nbsp;&nbsp;];</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvLogout.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/CUE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_IDS.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[CUE]))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">unset</span>(<span
     style="color: #001080;">$_SESSION</span>[CUE]);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS]))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">unset</span>(<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS]);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">session_destroy</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvSaludoCliente.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/CUE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_IDS.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_CLIENTE.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[CUE])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_SESSION</span>[CUE]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$rolIds</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_SESSION</span>[ROL_IDS]</div>
  <div>&nbsp;&nbsp;: [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">array_search</span>(ROL_CLIENTE, <span
     style="color: #001080;">$rolIds</span>) === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"No permitido."</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"Hola "</span> . <span
     style="color: #001080;">$cue</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvSesion.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/CUE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_IDS.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[CUE])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_SESSION</span>[CUE]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$rolIds</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_SESSION</span>[ROL_IDS]</div>
  <div>&nbsp;&nbsp;: [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;CUE =&gt; <span
     style="color: #001080;">$cue</span>,</div>
  <div>&nbsp;&nbsp;ROL_IDS =&gt; <span
     style="color: #001080;">$rolIds</span></div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >P. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m19aut/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-js/m-htmlentities-js.html">lib / js / htmlentities.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / htmlentities.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Codifica un texto para que cambie los
    caracteres</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;especiales y no se pueda interpretar
    como</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;etiiqueta HTML. Esta técnica evita la
    inyección</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;de código.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">texto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> un texto que no puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;&nbsp;interpretarse como HTML.
    */</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">texto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">texto</span>.<span
     style="color: #795e26;">replace</span>(<span
     style="color: #811f3f;">/</span><span
     style="color: #d16969;">[</span><span
     style="color: #811f3f;">&lt;&gt;"'</span><span
     style="color: #d16969;">]</span><span
     style="color: #811f3f;">/</span><span
     style="color: #0000ff;">g</span>, <span
     style="color: #001080;">textoDetectado</span> <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">switch</span> (<span
     style="color: #001080;">textoDetectado</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"&lt;"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;lt;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"&gt;"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;gt;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">'"'</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;quot;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">case</span> <span
     style="color: #a31515;">"'"</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"&amp;#039;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">default</span>: <span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">textoDetectado</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"htmlentities"</span>] = <span
     style="color: #795e26;">htmlentities</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m19aut/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m19aut/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >Q. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se amplió el ejemplo de la lección anterior para controlar
    el acceso a una app.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >22. Archivos en la base de datos</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m20archivos/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-agrega-html.html">agrega.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-modifica-html.html">modifica.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra el almacenamiento de un archivo por registro de
    la base de datos, usando servicios.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvarchivos?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvarchivos?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    Este ejemplo toma como base la lección de asociaciones a uno, pero en caso
    de necesitar varios archivos por producto, puedes tomar como base la
    lección de asociaciones a muchos.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><figure>
 <img style="max-height: none;"
   src="/img/m20archivos/archivosder.drawio.svg"
   alt="Diagrama entidad relación">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m20archivos/archivosrel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m20archivos/archivospaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m20archivos/archivosrel.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m20archivos/srvarchivos.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvarchivos?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvarchivos?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-agrega-html.html">agrega.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-modifica-html.html">modifica.html</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a
            href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-confirmaEliminar-js.html">confirmaEliminar.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraImagenNueva-js.html">muestraImagenNueva.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraImagenReemplazada-js.html">muestraImagenReemplazada.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeBytes-php.html">leeBytes.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeEntero-php.html">leeEntero.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvArchivo-php.html">srvArchivo.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvProductoAgrega-php.html">srvProductoAgrega.php</a>
      </p>
     </li>
     <li>
      <p><a href="m-srv/m-srvProductoBusca-php.html">srvProductoBusca.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvProductoConsulta-php.html">srvProductoConsulta.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvProductoElimina-php.html">srvProductoElimina.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvProductoModifica-php.html">srvProductoModifica.php</a>
      </p>
     </li>
     <li>
      <details>
       <summary>dao</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-archivoAgrega-php.html">archivoAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-archivoBusca-php.html">archivoBusca.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-archivoElimina-php.html">archivoElimina.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-archivoModifica-php.html">archivoModifica.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoAgrega-php.html">productoAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-productoBusca-php.html">productoBusca.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoConsulta-php.html">productoConsulta.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoElimina-php.html">productoElimina.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoModifica-php.html">productoModifica.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>modelo</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-modelo/m-Archivo-php.html">Archivo.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-modelo/m-Producto-php.html">Producto.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Archivos<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #795e26;">fetch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoConsulta.php'</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Archivos<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"agrega.html"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. agrega.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Agregar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraImagenNueva.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">muestraImagenNueva</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">bytes</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">imagen</span><span
     style="color: #0000ff;">).</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoAgrega.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">objeto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Agregar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Imagen *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"bytes"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"file"</span> <span
     style="color: #e50000;">accept</span>=<span
     style="color: #0000ff;">"image/*"</span> <span
     style="color: #e50000;">required</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">oninput</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">muestraImagenNueva</span><span
     style="color: #0000ff;">(this, </span><span
     style="color: #001080;">imagen</span><span
     style="color: #0000ff;">).</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;figure&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;img</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"imagen"</span> <span
     style="color: #e50000;">hidden</span> <span
     style="color: #e50000;">alt</span>=<span
     style="color: #0000ff;">"Imagen del producto"</span> <span
     style="color: #e50000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">max-width: 100%;"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/figure&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. modifica.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Modificar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/confirmaEliminar.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraImagenReemplazada.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoModifica.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">json</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Modificar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"id"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">value</span>=<span
     style="color: #0000ff;">"Cargando&amp;hellip;"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Imagen</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"bytes"</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"file"</span> <span
     style="color: #e50000;">accept</span>=<span
     style="color: #0000ff;">"image/*"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">oninput</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">muestraImagenReemplazada</span><span
     style="color: #0000ff;">(this, </span><span
     style="color: #001080;">imagen</span><span
     style="color: #0000ff;">).</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Guardar<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirmaEliminar</span><span
     style="color: #0000ff;">())&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoElimina.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Eliminar</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;figure&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;img</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"imagen"</span> <span
     style="color: #e50000;">hidden</span> <span
     style="color: #e50000;">alt</span>=<span
     style="color: #0000ff;">"Imagen del producto"</span> <span
     style="color: #e50000;">style</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #0000ff;">max-width: 100%;"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">data-input</span>=<span
     style="color: #0000ff;">"bytes"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/figure&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >K. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvArchivo-php.html">srv / srvArchivo.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvProductoAgrega-php.html">srv / srvProductoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvProductoBusca-php.html">srv / srvProductoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvProductoConsulta-php.html">srv / srvProductoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvProductoElimina-php.html">srv / srvProductoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-srvProductoModifica-php.html">srv / srvProductoModifica.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-modelo/m-Archivo-php.html">srv / modelo / Archivo.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-modelo/m-Producto-php.html">srv / modelo / Producto.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Archivo.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Archivo</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$bytes</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$bytes</span> = <span
     style="color: #a31515;">""</span>,&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">bytes</span> = <span
     style="color: #001080;">$bytes</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">bytes</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el contenido del archivo."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / modelo / Producto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span>&nbsp;&nbsp;<span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Archivo.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Producto</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> ?<span
     style="color: #267f99;">Archivo</span> <span
     style="color: #001080;">$archivo</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Archivo</span> <span
     style="color: #001080;">$archivo</span> = <span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span>,</div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> = <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">archivo</span> = <span
     style="color: #001080;">$archivo</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">validaNuevo</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el nombre."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">archivo</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el archivo."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el nombre."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-archivoAgrega-php.html">srv / dao / archivoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-archivoBusca-php.html">srv / dao / archivoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-archivoElimina-php.html">srv / dao / archivoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-archivoModifica-php.html">srv / dao / archivoModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-productoAgrega-php.html">srv / dao / productoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-productoBusca-php.html">srv / dao / productoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-productoConsulta-php.html">srv / dao / productoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-productoElimina-php.html">srv / dao / productoElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-srv/m-dao/m-productoModifica-php.html">srv / dao / productoModifica.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> ARCHIVO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_BYTES BLOB
   </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> ARCH_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(ARCH_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> PRODUCTO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_NOMBRE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PROD_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(PROD_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PROD_NOM_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(PROD_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PROD_ARCH_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (ARCH_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> ARCHIVO(ARCH_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvarchivos.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / archivoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">archivoAgrega</span>(<span
     style="color: #267f99;">Archivo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> ARCHIVO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(ARCH_BYTES)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:bytes)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":bytes"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">bytes</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / archivoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">archivoBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>): <span
     style="color: #0000ff;">false</span>|<span
     style="color: #267f99;">Archivo</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_BYTES </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> bytes</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> ARCHIVO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> ARCH_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Archivo</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / archivoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">archivoElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> ARCHIVO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> ARCH_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / archivoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">archivoModifica</span>(<span
     style="color: #267f99;">Archivo</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> ARCHIVO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span><span
     style="color: #a31515;"> ARCH_BYTES </span>=<span
     style="color: #a31515;"> :bytes</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> ARCH_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":bytes"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">bytes</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;]);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / productoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/archivoAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoAgrega</span>(<span
     style="color: #267f99;">Producto</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">validaNuevo</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #795e26;">archivoAgrega</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(PROD_NOMBRE,
    ARCH_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:nombre,
    :archId)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":archId"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. srv / dao / productoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$prodId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.ARCH_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> archId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> ARCHIVO A</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> P.ARCH_ID </span>=<span
     style="color: #a31515;"> A.ARCH_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> P.PROD_ID </span>=<span
     style="color: #a31515;"> :prodId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$prodId</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #001080;">$obj</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$obj</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodId</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodNombre</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$archId</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">archId</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #001080;">$archId</span> === <span
     style="color: #0000ff;">null</span> ? <span
     style="color: #0000ff;">null</span> : <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Archivo</span>(id: <span
     style="color: #001080;">$archId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;id: <span
     style="color: #001080;">$id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;nombre: <span
     style="color: #001080;">$nombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;archivo: <span
     style="color: #001080;">$archivo</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. srv / dao / productoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoConsulta</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;A.ARCH_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> archId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">LEFT JOIN</span><span
     style="color: #a31515;"> ARCHIVO A</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ON</span><span
     style="color: #a31515;"> P.ARCH_ID </span>=<span
     style="color: #a31515;"> A.ARCH_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> P.PROD_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. srv / dao / productoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/archivoElimina.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoBusca.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">rollBack</span>();</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">archivoElimina</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>]);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. srv / dao / productoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/archivoModifica.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoModifica</span>(<span
     style="color: #267f99;">Producto</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$anterior</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$anterior</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Producto no encontrado."</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$anterior</span>-&gt;<span
     style="color: #001080;">archivo</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el archivo anterior."</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$archivo</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #001080;">$anterior</span>-&gt;<span
     style="color: #001080;">archivo</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span> = <span
     style="color: #001080;">$archivo</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$archivo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$anterior</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">archivoModifica</span>(<span
     style="color: #001080;">$archivo</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_NOMBRE </span>=<span
     style="color: #a31515;"> :nombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;ARCH_ID </span>=<span
     style="color: #a31515;"> :archId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":archId"</span> =&gt; <span
     style="color: #001080;">$archivo</span>-&gt;<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >C. srv / srvArchivo.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/archivoBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div><span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #008000;">// Evita que la imagen se cargue en el caché de la
    computadora.</span></div>
  <div>&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Cache-Control: no-store, no-cache,
    must-revalidate, max-age=0"</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Cache-Control: post-check=0, pre-check=0"</span>,
   <span
     style="color: #0000ff;">false</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Pragma: no-cache"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #795e26;">archivoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$archivo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Archivo no encontrado."</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$archivo</span>-&gt;<span
     style="color: #001080;">bytes</span>;</div>
  <div>}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. srv / srvProductoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeBytes.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoAgrega.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$bytes</span> = <span
     style="color: #795e26;">leeBytes</span>(<span
     style="color: #a31515;">"bytes"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #001080;">$bytes</span> === <span
     style="color: #a31515;">""</span> ? <span
     style="color: #0000ff;">null</span> : <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Archivo</span>(bytes: <span
     style="color: #001080;">$bytes</span>);</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(nombre: <span
     style="color: #001080;">$nombre</span>, archivo: <span
     style="color: #001080;">$archivo</span>);</div><br>
  <div>&nbsp;<span
     style="color: #795e26;">productoAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Los bytes se descargan con SrvArchivo; no desde
    aquí.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">bytes</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvProductoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Producto no encontrado."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"imagen"</span> =&gt; <span
     style="color: #a31515;">"srv/srvArchivo.php?id="</span> . <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;];</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvProductoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">productoConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$it</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$it</span>-&gt;<span
     style="color: #001080;">prodId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$prodNombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$it</span>-&gt;<span
     style="color: #001080;">prodNombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$archId</span> = <span
     style="color: #001080;">$it</span>-&gt;<span
     style="color: #001080;">archId</span> === <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$it</span>-&gt;<span
     style="color: #001080;">archId</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;div style='display: flex; flex-direction:
    row-reverse;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;align-items:
    center; gap: 0.5rem'&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt style='flex: 1
    1 0'&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$prodId</span><span
     style="color: #a31515;">'&gt;{</span><span
     style="color: #001080;">$prodNombre</span><span
     style="color: #a31515;">}&lt;/a&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dt&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd style='flex: 1
    1 0; margin: 0'&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a
    href='modifica.html?id=</span><span
     style="color: #001080;">$prodId</span><span
     style="color: #a31515;">'&gt;&lt;img style='width: 100%'</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alt='Imagen
    del producto' src='srv/srvArchivo.php?id=</span><span
     style="color: #001080;">$archId</span><span
     style="color: #a31515;">'&gt;&lt;/a&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvProductoElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoElimina.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el parámetro id."</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">productoElimina</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. srv / srvProductoModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeBytes.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Archivo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoModifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$bytes</span> = <span
     style="color: #795e26;">leeBytes</span>(<span
     style="color: #a31515;">"bytes"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$archivo</span> = <span
     style="color: #001080;">$bytes</span> === <span
     style="color: #a31515;">""</span> ? <span
     style="color: #0000ff;">null</span> : <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Archivo</span>(bytes: <span
     style="color: #001080;">$bytes</span>);</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$id</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el id."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(nombre: <span
     style="color: #001080;">$nombre</span>, archivo: <span
     style="color: #001080;">$archivo</span>, id: <span
     style="color: #001080;">$id</span>);</div><br>
  <div>&nbsp;<span
     style="color: #795e26;">productoModifica</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">// Los bytes se descargan con SrvArchivo; no desde
    aquí.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">archivo</span>-&gt;<span
     style="color: #001080;">bytes</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >L. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >M. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-confirmaEliminar-js.html">lib / js / confirmaEliminar.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraImagenNueva-js.html">lib / js / muestraImagenNueva.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraImagenReemplazada-js.html">lib / js / muestraImagenReemplazada.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / confirmaEliminar.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">confirmaEliminar</span>()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">confirm</span>(<span
     style="color: #a31515;">"Confirma la eliminación"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"confirmaEliminar"</span>] = <span
     style="color: #795e26;">confirmaEliminar</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraImagenNueva.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLImageElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagenNueva</span>(<span
     style="color: #001080;">input</span>, <span
     style="color: #001080;">img</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div><br>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #001080;">error</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagenNueva"</span>] = <span
     style="color: #795e26;">muestraImagenNueva</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraImagenReemplazada.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLImageElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagenReemplazada</span>(<span
     style="color: #001080;">input</span>, <span
     style="color: #001080;">img</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">''</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">imagenInicial</span> = <span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">imagenInicial</span> === <span
     style="color: #0000ff;">undefined</span> || <span
     style="color: #0070c1;">imagenInicial</span> === <span
     style="color: #a31515;">''</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">imagenInicial</span></div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #001080;">error</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagenReemplazada"</span>] = <span
     style="color: #795e26;">muestraImagenReemplazada</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >16. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >17. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >18. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >19. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/m-leeBytes-php.html">lib / php / leeBytes.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/m-leeEntero-php.html">lib / php / leeEntero.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m20archivos/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeBytes.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeBytes</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el archivo se recibió y contiene bytes,
    los recupera;</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;en caso contrario, devuelve
    false. */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$contents</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_FILES</span>[<span
     style="color: #001080;">$parametro</span>]) &amp;&amp; <span
     style="color: #001080;">$_FILES</span>[<span
     style="color: #001080;">$parametro</span>][<span
     style="color: #a31515;">"size"</span>] &gt; <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;&nbsp;?&nbsp;&nbsp;<span
     style="color: #795e26;">file_get_contents</span>(<span
     style="color: #001080;">$_FILES</span>[<span
     style="color: #001080;">$parametro</span>][<span
     style="color: #a31515;">"tmp_name"</span>])</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$contents</span> === <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$contents</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / leeEntero.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve el valor entero de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibido en el servidor por medio de
    GET,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;POST o cookie. Si parámetro no se
    puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;convertir a entero, se genera un
    error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Si el parámetro no se recibe,
    devuelve</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;null.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): ?<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >N. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró el almacenamiento de un archivo por registro de
    la base de datos, usando servicios.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >23. Compras sencillas</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m21compras/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mBder.html">Diagrama entidad relación</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mBrel.html">Diagrama relacional</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mBpaquetes.html">Diagrama de paquetes</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mCdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mDinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-agrega-html.html">agrega.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-carrito-html.html">carrito.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-modifica-html.html">modifica.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra la base de una aplicación que vende o compra.
   </p>
  </li>
  <li>
   <p>
    Para poder manejar compras en línea, es necesario que la venta incluya la
    referencia al cliente.
   </p>
  </li>
  <li>
   <p>
    Puedes probar la app en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvcompras?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvcompras?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama entidad relación</h1><figure>
 <img style="max-height: none;"
   src="/img/m21compras/comprasder.drawio.svg"
   alt="Diagrama entidad relación">
</figure>
      </section>
     <section >
         <h1 >C. Diagrama relacional</h1><figure>
 <img style="max-height: none;"
   src="/img/m21compras/comprasrel.drawio.svg"
   alt="Diagrama relacional">
</figure>
      </section>
     <section >
         <h1 >D. Diagrama de paquetes</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Para este ejemplo se utilizan algunos principios de diseño conocidos como
    SOLID.
   </p>
  </li>
  <li>
   <p>
    Cada uno de los paquetes apunta con una flecha <q>use</q> a los que utiliza
    para realizar sus funciones.
   </p>
  </li>
  <li>
   <p>
    Cada paquete oculta los detalles de su implementación y tecnología.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la base de datos, así como de su configuración, se mantienen
    dentro del paquete <q>dao</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    Los detalles de la interfaz gráfica, por ejemplo las api del navegador web,
    o de las interfaces en Android, se mantienen dentro del paquete
    <q>access</q> y no se exponen fuera de dicho paquete.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>access</q> y <q>service</q>
    de acuerdo al contenido de las lecciones anteriores.
   </p>
  </li>
  <li>
   <p>
    El intercambio de datos entre los paquetes <q>service</q> y <q>dao</q>
    se realiza con el contenido del paquete <q>modelo</q>.
   </p>
  </li>
 </ul>
</div>
<figure>
 <img style="max-height: none;"
   src="/img/m21compras/compraspaquetes.drawio.svg"
   alt="Diagrama de paquetes">
</figure>
      </section>
     <section >
         <h1 >E. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m21compras/comprasdeploy.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >F. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m21compras/srvcompras.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/srvcompras?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/srvcompras?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >G. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-agrega-html.html">agrega.html</a></p>
  </li>
  <li>
   <p><a href="m-carrito-html.html">carrito.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <p><a href="m-modifica-html.html">modifica.html</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a
            href="m-lib/m-js/m-buscaElementoHtml-js.html">buscaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-confirmaEliminar-js.html">confirmaEliminar.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getArchivoSeleccionado-js.html">getArchivoSeleccionado.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getDataUrlDeSeleccion-js.html">getDataUrlDeSeleccion.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-getInputParaElementoHtml-js.html">getInputParaElementoHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraArray-js.html">muestraArray.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraBoolean-js.html">muestraBoolean.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraImagen-js.html">muestraImagen.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraInnerHtml-js.html">muestraInnerHtml.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraNumber-js.html">muestraNumber.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraObjeto-js.html">muestraObjeto.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraString-js.html">muestraString.js</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-lib/m-js/m-muestraTextContent-js.html">muestraTextContent.js</a>
         </p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraValor-js.html">muestraValor.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeArray-php.html">leeArray.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeDecimal-php.html">leeDecimal.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeEntero-php.html">leeEntero.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
        <li>
         <p><a
            href="m-lib/m-php/m-recibeFetchAll-php.html">recibeFetchAll.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a
         href="m-srv/m-srvDetalleDeVentaAgrega-php.html">srvDetalleDeVentaAgrega.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvDetalleDeVentaBusca-php.html">srvDetalleDeVentaBusca.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvDetalleDeVentaElimina-php.html">srvDetalleDeVentaElimina.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvDetalleDeVentaModifica-php.html">srvDetalleDeVentaModifica.php</a>
      </p>
     </li>
     <li>
      <p><a href="m-srv/m-srvProductoBusca-php.html">srvProductoBusca.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvProductoConsulta-php.html">srvProductoConsulta.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvVentaEnCapturaBusca-php.html">srvVentaEnCapturaBusca.php</a>
      </p>
     </li>
     <li>
      <p><a
         href="m-srv/m-srvVentaEnCapturaProcesa-php.html">srvVentaEnCapturaProcesa.php</a>
      </p>
     </li>
     <li>
      <details>
       <summary>dao</summary>
       <ul>
        <li>
         <p><a href="m-srv/m-dao/m-AccesoBd-php.html">AccesoBd.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-bdCrea-php.html">bdCrea.php</a></p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-detalleDeVentaAgrega-php.html">detalleDeVentaAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-detalleDeVentaBusca-php.html">detalleDeVentaBusca.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-detalleDeVentaConsulta-php.html">detalleDeVentaConsulta.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-detalleDeVentaElimina-php.html">detalleDeVentaElimina.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-detalleDeVentaModifica-php.html">detalleDeVentaModifica.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoAgrega-php.html">productoAgrega.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-productoBusca-php.html">productoBusca.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoConsulta-php.html">productoConsulta.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-productoCuenta-php.html">productoCuenta.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-ventaAgrega-php.html">ventaAgrega.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-dao/m-ventaCuenta-php.html">ventaCuenta.php</a></p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-ventaEnCapturaBusca-php.html">ventaEnCapturaBusca.php</a>
         </p>
        </li>
        <li>
         <p><a
            href="m-srv/m-dao/m-ventaEnCapturaProcesa-php.html">ventaEnCapturaProcesa.php</a>
         </p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>modelo</summary>
       <ul>
        <li>
         <p><a
            href="m-srv/m-modelo/m-DetalleDeVenta-php.html">DetalleDeVenta.php</a>
         </p>
        </li>
        <li>
         <p><a href="m-srv/m-modelo/m-Producto-php.html">Producto.php</a></p>
        </li>
        <li>
         <p><a href="m-srv/m-modelo/m-Venta-php.html">Venta.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >H. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Productos<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraInnerHtml.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #795e26;">fetch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoConsulta.php'</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraInnerHtml</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">lista</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">render</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Productos<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"carrito.html"</span><span
     style="color: #800000;">&gt;</span>Ver carrito<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"lista"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. agrega.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Agregar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProductoBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">producto</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">producto</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvDetalleDeVentaAgrega.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Agregar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"id"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Producto</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"producto"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Precio</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"precio"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Cantidad *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"cantidad"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"number"</span> <span
     style="color: #e50000;">min</span>=<span
     style="color: #0000ff;">"0"</span> <span
     style="color: #e50000;">step</span>=<span
     style="color: #0000ff;">"0.01"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Agregar<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. carrito.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Carrito<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvVentaEnCapturaBusca.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">venta</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">document</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">venta</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Carrito<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Productos<span
     style="color: #800000;">&lt;/a&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">'button'</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirm</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'Confirma procesar'</span><span
     style="color: #0000ff;">))&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvVentaEnCapturaProcesa.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Procesar compra</div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;Folio</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"folio"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;fieldset&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;legend&gt;</span>Detalle<span
     style="color: #800000;">&lt;/legend&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dl</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"detalles"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dt&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/dt&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;dd&gt;&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;&lt;/dd&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/dl&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/fieldset&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >K. modifica.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Modificar<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraObjeto.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/confirmaEliminar.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Obtiene los parámetros de la página.</span>
  </div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">parametros</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">URL</span>(<span
     style="color: #001080;">location</span>.<span
     style="color: #001080;">href</span>).<span
     style="color: #001080;">searchParams</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvDetalleDeVentaBusca.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #795e26;">muestraObjeto</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;">))</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvDetalleDeVentaModifica.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">modelo</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'carrito.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Modificar<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"carrito.html"</span><span
     style="color: #800000;">&gt;</span>Cancelar<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"prodId"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Producto</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"prodNombre"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Precio</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"precio"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;progress</span> <span
     style="color: #e50000;">max</span>=<span
     style="color: #0000ff;">"100"</span><span
     style="color: #800000;">&gt;</span>Cargando<span
     style="color: #0000ff;">&amp;hellip;</span><span
     style="color: #800000;">&lt;/progress&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Cantidad *</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"cantidad"</span> <span
     style="color: #e50000;">required</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"number"</span> <span
     style="color: #e50000;">min</span>=<span
     style="color: #0000ff;">"0"</span> <span
     style="color: #e50000;">step</span>=<span
     style="color: #0000ff;">"0.01"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span>*&nbsp;Obligatorio<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Guardar<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"button"</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onclick</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #af00db;">if</span><span
     style="color: #0000ff;"> (</span><span
     style="color: #795e26;">confirmaEliminar</span><span
     style="color: #0000ff;">())&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvDetalleDeVentaElimina.php?'</span><span
     style="color: #0000ff;"> </span>+<span
     style="color: #0000ff;"> </span><span
     style="color: #0070c1;">parametros</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(() =&gt; </span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'carrito.html'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Eliminar</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >L. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m21compras/m-srv/m-modelo/">Carpeta « srv / modelo »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/">Carpeta « srv / dao »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvDetalleDeVentaAgrega-php.html">srv / srvDetalleDeVentaAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvDetalleDeVentaBusca-php.html">srv / srvDetalleDeVentaBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvDetalleDeVentaElimina-php.html">srv / srvDetalleDeVentaElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvDetalleDeVentaModifica-php.html">srv / srvDetalleDeVentaModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvProductoBusca-php.html">srv / srvProductoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvProductoConsulta-php.html">srv / srvProductoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvVentaEnCapturaBusca-php.html">srv / srvVentaEnCapturaBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-srvVentaEnCapturaProcesa-php.html">srv / srvVentaEnCapturaProcesa.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « srv / modelo »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m21compras/m-srv/m-modelo/m-Producto-php.html">srv / modelo / Producto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-modelo/m-DetalleDeVenta-php.html">srv / modelo / DetalleDeVenta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-modelo/m-Venta-php.html">srv / modelo / Venta.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / modelo / Producto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Producto</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$existencias</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$precio</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$nombre</span> = <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$existencias</span> = NAN,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$precio</span> = NAN,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> = <span
     style="color: #001080;">$nombre</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">existencias</span> = <span
     style="color: #001080;">$existencias</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">precio</span> = <span
     style="color: #001080;">$precio</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">nombre</span> === <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el nombre."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">is_nan</span>(<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">existencias</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Las existencias no pueden ser NAN."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">is_nan</span>(<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">precio</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El precio no puede ser NAN."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / modelo / DetalleDeVenta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/Producto.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">DetalleDeVenta</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> ?<span
     style="color: #267f99;">Venta</span> <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> ?<span
     style="color: #267f99;">Producto</span> <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$cantidad</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$precio</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$cantidad</span> = NAN,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">float</span> <span
     style="color: #001080;">$precio</span> = NAN,</div>
  <div>&nbsp;&nbsp;?<span
     style="color: #267f99;">Producto</span> <span
     style="color: #001080;">$producto</span> = <span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;?<span
     style="color: #267f99;">Venta</span> <span
     style="color: #001080;">$venta</span> = <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cantidad</span> = <span
     style="color: #001080;">$cantidad</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">precio</span> = <span
     style="color: #001080;">$precio</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">producto</span> = <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">venta</span> = <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">producto</span> === <span
     style="color: #0000ff;">null</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Detalle de venta sin producto."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">is_nan</span>(<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">cantidad</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"La cantidad no puede ser NAN."</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">is_nan</span>(<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">precio</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El precio no puede ser NAN."</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / modelo / Venta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/DetalleDeVenta.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">Venta</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">bool</span> <span
     style="color: #001080;">$enCaptura</span>;</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">DetalleDeVenta</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$detalles</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">__construct</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">bool</span> <span
     style="color: #001080;">$enCaptura</span> = <span
     style="color: #0000ff;">false</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$detalles</span> = [],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span> = <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">enCaptura</span> = <span
     style="color: #001080;">$enCaptura</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">detalles</span> = <span
     style="color: #001080;">$detalles</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">valida</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #001080;">detalles</span> as <span
     style="color: #001080;">$detalle</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">$detalle</span> instanceof <span
     style="color: #267f99;">DetalleDeVenta</span>))</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Tipo incorrecto para un detalle de
    venta."</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$detalle</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « srv / dao »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-bdCrea-php.html">srv / dao / bdCrea.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-AccesoBd-php.html">srv / dao / AccesoBd.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-detalleDeVentaAgrega-php.html">srv / dao / detalleDeVentaAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-detalleDeVentaBusca-php.html">srv / dao / detalleDeVentaBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-detalleDeVentaConsulta-php.html">srv / dao / detalleDeVentaConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-detalleDeVentaElimina-php.html">srv / dao / detalleDeVentaElimina.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-detalleDeVentaModifica-php.html">srv / dao / detalleDeVentaModifica.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-productoAgrega-php.html">srv / dao / productoAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-productoBusca-php.html">srv / dao / productoBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-productoConsulta-php.html">srv / dao / productoConsulta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-productoCuenta-php.html">srv / dao / productoCuenta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-ventaAgrega-php.html">srv / dao / ventaAgrega.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-ventaCuenta-php.html">srv / dao / ventaCuenta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-ventaEnCapturaBusca-php.html">srv / dao / ventaEnCapturaBusca.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-srv/m-dao/m-ventaEnCapturaProcesa-php.html">srv / dao / ventaEnCapturaProcesa.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. srv / dao / bdCrea.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> VENTA (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;VENT_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;VENT_EN_CAPTURA
   </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> VENT_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(VENT_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> PRODUCTO (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_NOMBRE </span><span
     style="color: #0000ff;">TEXT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_EXISTENCIAS
   </span><span
     style="color: #0000ff;">REAL</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_PRECIO </span><span
     style="color: #0000ff;">REAL</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PROD_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;">(PROD_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> PROD_NOM_UNQ</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">UNIQUE</span><span
     style="color: #a31515;">(PROD_NOMBRE)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">exec</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">'</span><span
     style="color: #0000ff;">CREATE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">TABLE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">IF</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">EXISTS</span><span
     style="color: #a31515;"> DET_VENTA (</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;VENT_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_ID </span><span
     style="color: #0000ff;">INTEGER</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DTV_CANTIDAD </span><span
     style="color: #0000ff;">REAL</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DTV_PRECIO </span><span
     style="color: #0000ff;">REAL</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">NOT NULL</span><span
     style="color: #a31515;">,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> DTV_PK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">PRIMARY KEY</span><span
     style="color: #a31515;"> (VENT_ID, PROD_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> DTV_VENT_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (VENT_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> VENTA(VENT_ID),</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">CONSTRAINT</span><span
     style="color: #a31515;"> DTV_PROD_FK</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FOREIGN KEY</span><span
     style="color: #a31515;"> (PROD_ID) </span><span
     style="color: #0000ff;">REFERENCES</span><span
     style="color: #a31515;"> PRODUCTO(PROD_ID)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;)</span><span
     style="color: #a31515;">'</span></div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. srv / dao / AccesoBd.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/bdCrea.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoCuenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoAgrega.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaCuenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">AccesoBd</span></div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> ?<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">null</span>;</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getCon</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span> = <span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">conecta</span>();</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">self</span>::<span
     style="color: #795e26;">prepara</span>(<span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">self</span>::<span
     style="color: #001080;">$con</span>;</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">conecta</span>(): <span
     style="color: #267f99;">PDO</span></div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">PDO</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// cadena de conexión</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"sqlite:srvcompras.db"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// usuario</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// contraseña</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">null</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;[<span
     style="color: #267f99;">PDO</span>::ATTR_ERRMODE =&gt; <span
     style="color: #267f99;">PDO</span>::ERRMODE_EXCEPTION]</div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">private</span> <span
     style="color: #0000ff;">static</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">prepara</span>(<span
     style="color: #267f99;">PDO</span> <span
     style="color: #001080;">$con</span>)</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">bdCrea</span>(<span
     style="color: #001080;">$con</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">productoCuenta</span>() === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">productoAgrega</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(nombre: <span
     style="color: #a31515;">"Sandwich"</span>, existencias: <span
     style="color: #098658;">50</span>, precio: <span
     style="color: #098658;">15</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">productoAgrega</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(nombre: <span
     style="color: #a31515;">"Hot dog"</span>, existencias: <span
     style="color: #098658;">40</span>, precio: <span
     style="color: #098658;">30</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">productoAgrega</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(nombre: <span
     style="color: #a31515;">"Hamburguesa"</span>, existencias: <span
     style="color: #098658;">30</span>, precio: <span
     style="color: #098658;">40</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">ventaCuenta</span>() === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">ventaAgrega</span>(<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Venta</span>(enCaptura: <span
     style="color: #0000ff;">true</span>));</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. srv / dao / detalleDeVentaAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaEnCapturaBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoBusca.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">detalleDeVentaAgrega</span>(<span
     style="color: #267f99;">DetalleDeVenta</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">producto</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$producto</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Producto no encontrado."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$venta</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$venta</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Venta no encontrada."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">venta</span> = <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span> = <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">precio</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">producto</span> = <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> DET_VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(VENT_ID, PROD_ID,
    DTV_CANTIDAD, DTV_PRECIO)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(:ventId, :prodId,
    :cantidad, :precio)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":ventId"</span> =&gt; <span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":cantidad"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cantidad</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":precio"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">precio</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. srv / dao / detalleDeVentaBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaEnCapturaBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoBusca.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">detalleDeVentaBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$prodId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$venta</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$venta</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$prodId</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$producto</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.PROD_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.DTV_CANTIDAD
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> cantidad,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.DTV_PRECIO </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> precio</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> DET_VENTA DV, PRODUCTO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.PROD_ID </span>=<span
     style="color: #a31515;"> P.PROD_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> DV.VENT_ID </span>=<span
     style="color: #a31515;"> :ventId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> DV.PROD_ID </span>=<span
     style="color: #a31515;"> :prodId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":ventId"</span> =&gt; <span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$prodId</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #001080;">$obj</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$obj</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$dtv</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">DetalleDeVenta</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">venta</span> = <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">producto</span> = <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">cantidad</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">cantidad</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">precio</span> = <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">precio</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$dtv</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. srv / dao / detalleDeVentaConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">detalleDeVentaConsulta</span>(<span
     style="color: #267f99;">Venta</span> <span
     style="color: #001080;">$venta</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.PROD_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodId,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodNombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_EXISTENCIAS
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodExistencias,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;P.PROD_PRECIO </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> prodPrecio,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.DTV_CANTIDAD
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> cantidad,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.DTV_PRECIO </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> precio</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> DET_VENTA DV, PRODUCTO P</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DV.PROD_ID </span>=<span
     style="color: #a31515;"> P.PROD_ID</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> DV.VENT_ID </span>=<span
     style="color: #a31515;"> :ventId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> P.PROD_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":ventId"</span> =&gt; <span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">id</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #001080;">$objs</span> = <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">DetalleDeVenta</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$detalles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$objs</span> as <span
     style="color: #001080;">$obj</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;id: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodId</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;nombre: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodNombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;existencias: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodExistencias</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;precio: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">prodPrecio</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$detalle</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">DetalleDeVenta</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;venta: <span
     style="color: #001080;">$venta</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;producto: <span
     style="color: #001080;">$producto</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;cantidad: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">cantidad</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;precio: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">precio</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$detalles</span>[] = <span
     style="color: #001080;">$detalle</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$detalles</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. srv / dao / detalleDeVentaElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaEnCapturaBusca.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">detalleDeVentaElimina</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$prodId</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$venta</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$venta</span> !== <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">DELETE</span><span
     style="color: #a31515;"> </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> DET_VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> VENT_ID </span>=<span
     style="color: #a31515;"> :ventId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :prodId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":ventId"</span> =&gt; <span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$prodId</span>,</div>
  <div>&nbsp;&nbsp;]);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. srv / dao / detalleDeVentaModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaEnCapturaBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/productoBusca.php"</span>;</div><br><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">detalleDeVentaModifica</span>(<span
     style="color: #267f99;">DetalleDeVenta</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">producto</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$producto</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Producto no encontrado."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$venta</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$venta</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Venta no encontrada."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">venta</span> = <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">producto</span> = <span
     style="color: #001080;">$producto</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span> =&nbsp;&nbsp;<span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">precio</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> DET_VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DTV_CANTIDAD </span>=<span
     style="color: #a31515;"> :cantidad,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;DTV_PRECIO </span>=<span
     style="color: #a31515;"> :precio</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> </span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;VENT_ID </span>=<span
     style="color: #a31515;"> :ventId</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">AND</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :prodId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(</div>
  <div>&nbsp;&nbsp;[</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":ventId"</span> =&gt; <span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":cantidad"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cantidad</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":precio"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. srv / dao / productoAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoAgrega</span>(<span
     style="color: #267f99;">Producto</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(PROD_NOMBRE,
    PROD_EXISTENCIAS, PROD_PRECIO)</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:nombre, :existencias,
    :precio)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":nombre"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":existencias"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">existencias</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">":precio"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span></div>
  <div>&nbsp;]);</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. srv / dao / productoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$id</span>): <span
     style="color: #0000ff;">false</span>|<span
     style="color: #267f99;">Producto</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_ID </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_NOMBRE </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> nombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_PRECIO </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> precio,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_EXISTENCIAS
   </span><span
     style="color: #0000ff;">AS</span><span
     style="color: #a31515;"> existencias</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$id</span>]);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Producto</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. srv / dao / productoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../../lib/php/recibeFetchAll.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Producto</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoConsulta</span>(): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_NOMBRE </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> nombre,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_PRECIO </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> precio,</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;PROD_EXISTENCIAS
   </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> existencias</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">ORDER BY</span><span
     style="color: #a31515;"> PROD_NOMBRE</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">PDO</span>::FETCH_CLASS | <span
     style="color: #267f99;">PDO</span>::FETCH_PROPS_LATE,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #267f99;">Producto</span>::<span
     style="color: #0000ff;">class</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. srv / dao / productoCuenta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">productoCuenta</span>(): <span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span><span
     style="color: #a31515;"> </span><span
     style="color: #795e26;">COUNT</span><span
     style="color: #a31515;">(</span>*<span
     style="color: #a31515;">) </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> PRODUCTO</span><span
     style="color: #a31515;">"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchColumn</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. srv / dao / ventaAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ventaAgrega</span>(<span
     style="color: #267f99;">Venta</span> <span
     style="color: #001080;">$modelo</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">INSERT INTO</span><span
     style="color: #a31515;"> VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(VENT_EN_CAPTURA)</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">VALUES</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;(:enCaptura)</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(([<span
     style="color: #a31515;">":enCaptura"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">enCaptura</span>]));</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si usas una secuencia para generar el
    id,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;pasa como parámetro de
    lastInsertId el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;nombre de dicha secuencia.
    */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">lastInsertId</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. srv / dao / ventaCuenta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ventaCuenta</span>(): <span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span><span
     style="color: #a31515;"> </span><span
     style="color: #795e26;">COUNT</span><span
     style="color: #a31515;">(</span>*<span
     style="color: #a31515;">) </span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> VENTA</span><span
     style="color: #a31515;">"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetchColumn</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. srv / dao / ventaEnCapturaBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/detalleDeVentaConsulta.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ventaEnCapturaBusca</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">query</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">SELECT</span><span
     style="color: #a31515;"> VENT_ID </span><span
     style="color: #0000ff;">as</span><span
     style="color: #a31515;"> id</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">FROM</span><span
     style="color: #a31515;"> VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> VENT_EN_CAPTURA </span>=<span
     style="color: #a31515;"> </span><span
     style="color: #098658;">1</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">setFetchMode</span>(<span
     style="color: #267f99;">PDO</span>::FETCH_OBJ);</div>
  <div>&nbsp;<span
     style="color: #001080;">$obj</span> = <span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">fetch</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$obj</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">false</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$venta</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Venta</span>(id: <span
     style="color: #001080;">$obj</span>-&gt;<span
     style="color: #001080;">id</span>, enCaptura: <span
     style="color: #0000ff;">true</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$venta</span>-&gt;<span
     style="color: #001080;">detalles</span> = <span
     style="color: #795e26;">detalleDeVentaConsulta</span>(<span
     style="color: #001080;">$venta</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$venta</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. srv / dao / ventaEnCapturaProcesa.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../modelo/Venta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/AccesoBd.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaEnCapturaBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/ventaAgrega.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ventaEnCapturaProcesa</span>()</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span> = <span
     style="color: #267f99;">AccesoBd</span>::<span
     style="color: #795e26;">getCon</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">beginTransaction</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Venta no encontrada."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #795e26;">valida</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$detalles</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">detalles</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> PRODUCTO</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span><span
     style="color: #a31515;"> PROD_EXISTENCIAS </span>=<span
     style="color: #a31515;"> :existencias</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> PROD_ID </span>=<span
     style="color: #a31515;"> :prodId</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$detalles</span> as <span
     style="color: #001080;">$dtv</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">producto</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>(([</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":prodId"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">":existencias"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">existencias</span> - <span
     style="color: #001080;">$dtv</span>-&gt;<span
     style="color: #001080;">cantidad</span></div>
  <div>&nbsp;&nbsp;]));</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span> = <span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">prepare</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"</span><span
     style="color: #0000ff;">UPDATE</span><span
     style="color: #a31515;"> VENTA</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">SET</span><span
     style="color: #a31515;"> VENT_EN_CAPTURA </span>=<span
     style="color: #a31515;"> </span><span
     style="color: #098658;">0</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">WHERE</span><span
     style="color: #a31515;"> VENT_ID </span>=<span
     style="color: #a31515;"> :id</span><span
     style="color: #a31515;">"</span></div>
  <div>&nbsp;);</div>
  <div>&nbsp;<span
     style="color: #001080;">$stmt</span>-&gt;<span
     style="color: #795e26;">execute</span>([<span
     style="color: #a31515;">":id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>]);</div>
  <div>&nbsp;<span
     style="color: #795e26;">ventaAgrega</span>(<span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Venta</span>(enCaptura: <span
     style="color: #0000ff;">true</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$con</span>-&gt;<span
     style="color: #795e26;">commit</span>();</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >C. srv / srvDetalleDeVentaAgrega.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeDecimal.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/detalleDeVentaAgrega.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$cantidad</span> = <span
     style="color: #795e26;">leeDecimal</span>(<span
     style="color: #a31515;">"cantidad"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(id: <span
     style="color: #001080;">$prodId</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">DetalleDeVenta</span>(producto: <span
     style="color: #001080;">$producto</span>, cantidad: <span
     style="color: #001080;">$cantidad</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">detalleDeVentaAgrega</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">// Rompe el ciclo de referencias para poder generar
    JSON.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">venta</span>-&gt;<span
     style="color: #001080;">detalles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >D. srv / srvDetalleDeVentaBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/detalleDeVentaBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"prodId"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">detalleDeVentaBusca</span>(<span
     style="color: #001080;">$prodId</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Detalle de venta no encontrado."</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">producto</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"prodId"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"prodNombre"</span> =&gt; <span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"precio"</span> =&gt; <span
     style="color: #a31515;">"$"</span> . <span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span>, <span
     style="color: #098658;">2</span>),</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"cantidad"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">cantidad</span>,</div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >E. srv / srvDetalleDeVentaElimina.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/detalleDeVentaElimina.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"prodId"</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">detalleDeVentaElimina</span>(<span
     style="color: #001080;">$prodId</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. srv / srvDetalleDeVentaModifica.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeDecimal.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Producto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/detalleDeVentaModifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"prodId"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Producto</span>(id: <span
     style="color: #001080;">$prodId</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$cantidad</span> = <span
     style="color: #795e26;">leeDecimal</span>(<span
     style="color: #a31515;">"cantidad"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">DetalleDeVenta</span>(producto: <span
     style="color: #001080;">$producto</span>, cantidad: <span
     style="color: #001080;">$cantidad</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">detalleDeVentaModifica</span>(<span
     style="color: #001080;">$modelo</span>);</div>
  <div>&nbsp;<span
     style="color: #008000;">// Rompe el ciclo de referencias para poder generar
    JSON.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">venta</span>-&gt;<span
     style="color: #001080;">detalles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$modelo</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >G. srv / srvProductoBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeEntero.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #a31515;">"id"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">productoBusca</span>(<span
     style="color: #001080;">$id</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Producto no encontrado."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"id"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"producto"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"precio"</span> =&gt; <span
     style="color: #a31515;">"$"</span> . <span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span>, <span
     style="color: #098658;">2</span>),</div>
  <div>&nbsp;&nbsp;];</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >H. srv / srvProductoConsulta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/productoConsulta.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">productoConsulta</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$render</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$modelo</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">nombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$precio</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #a31515;">"$"</span> . <span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">precio</span>, <span
     style="color: #098658;">2</span>));</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$existencias</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">existencias</span>, <span
     style="color: #098658;">2</span>));</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$render</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;dt&gt;</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">&lt;/dt&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a
    href='agrega.html?id=</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">'&gt;Agregar al carrito&lt;/a&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dl&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Precio&lt;/dt&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span><span
     style="color: #001080;">$precio</span><span
     style="color: #a31515;">&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Existencias&lt;/dt&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span><span
     style="color: #001080;">$existencias</span><span
     style="color: #a31515;">&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dl&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$render</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >I. srv / srvVentaEnCapturaBusca.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/DetalleDeVenta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/ventaEnCapturaBusca.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span> = <span
     style="color: #795e26;">ventaEnCapturaBusca</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$modelo</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Venta no encontrada"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$detalles</span> = <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">detalles</span>;</div>
  <div>&nbsp;<span
     style="color: #001080;">$productoIds</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$detalles</span> as <span
     style="color: #001080;">$detalle</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$id</span> = <span
     style="color: #001080;">$detalle</span>-&gt;<span
     style="color: #001080;">producto</span>-&gt;<span
     style="color: #001080;">id</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$productoIds</span>[<span
     style="color: #001080;">$id</span>] = <span
     style="color: #0000ff;">true</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$renderDetalles</span> = <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$detalles</span> as <span
     style="color: #001080;">$detalle</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$producto</span> = <span
     style="color: #001080;">$detalle</span>-&gt;<span
     style="color: #001080;">producto</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$prodId</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">id</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$prodNombre</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #001080;">$producto</span>-&gt;<span
     style="color: #001080;">nombre</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$precio</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #a31515;">"$"</span> . <span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$detalle</span>-&gt;<span
     style="color: #001080;">precio</span>, <span
     style="color: #098658;">2</span>));</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$cantidad</span> = <span
     style="color: #795e26;">htmlentities</span>(<span
     style="color: #795e26;">number_format</span>(<span
     style="color: #001080;">$detalle</span>-&gt;<span
     style="color: #001080;">cantidad</span>, <span
     style="color: #098658;">2</span>));</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$renderDetalles</span> .=</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"&lt;dt&gt;</span><span
     style="color: #001080;">$prodNombre</span><span
     style="color: #a31515;">&lt;/dt&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href=
    'modifica.html?prodId=</span><span
     style="color: #001080;">$prodId</span><span
     style="color: #a31515;">'&gt;Modificar o eliminar&lt;/a&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dl&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Cantidad&lt;/dt&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span><span
     style="color: #001080;">$cantidad</span><span
     style="color: #a31515;">&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dt&gt;Precio&lt;/dt&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;dd&gt;</span><span
     style="color: #001080;">$precio</span><span
     style="color: #a31515;">&lt;/dd&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dl&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/dd&gt;"</span>;</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">detalles</span> = [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"folio"</span> =&gt; <span
     style="color: #001080;">$modelo</span>-&gt;<span
     style="color: #001080;">id</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"detalles"</span> =&gt; <span
     style="color: #001080;">$renderDetalles</span></div>
  <div>&nbsp;];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >J. srv / srvVentaEnCapturaProcesa.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/ventaEnCapturaProcesa.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">ventaEnCapturaProcesa</span>();</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >M. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >N. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-buscaElementoHtml-js.html">lib / js / buscaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-confirmaEliminar-js.html">lib / js / confirmaEliminar.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-getArchivoSeleccionado-js.html">lib / js / getArchivoSeleccionado.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-getDataUrlDeSeleccion-js.html">lib / js / getDataUrlDeSeleccion.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-getInputParaElementoHtml-js.html">lib / js / getInputParaElementoHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraArray-js.html">lib / js / muestraArray.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraBoolean-js.html">lib / js / muestraBoolean.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraImagen-js.html">lib / js / muestraImagen.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraInnerHtml-js.html">lib / js / muestraInnerHtml.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraNumber-js.html">lib / js / muestraNumber.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraObjeto-js.html">lib / js / muestraObjeto.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraString-js.html">lib / js / muestraString.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraTextContent-js.html">lib / js / muestraTextContent.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-muestraValor-js.html">lib / js / muestraValor.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / buscaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">nombre</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">nombre</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelector</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`#</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">,[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">nombre</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"buscaElementoHtml"</span>] = <span
     style="color: #795e26;">buscaElementoHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / confirmaEliminar.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">confirmaEliminar</span>()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">confirm</span>(<span
     style="color: #a31515;">"Confirma la eliminación"</span>)</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"confirmaEliminar"</span>] = <span
     style="color: #795e26;">confirmaEliminar</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / js / getArchivoSeleccionado.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLInputElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #001080;">input</span>.<span
     style="color: #001080;">files</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #0070c1;">length</span> === <span
     style="color: #098658;">0</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">seleccion</span>.<span
     style="color: #795e26;">item</span>(<span
     style="color: #098658;">0</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getArchivoSeleccionado"</span>] = <span
     style="color: #795e26;">getArchivoSeleccionado</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / js / getDataUrlDeSeleccion.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getArchivoSeleccionado</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getArchivoSeleccionado.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLInputElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">input</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@returns</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Promise&lt;string&gt;}</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #001080;">input</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Promise</span>((<span
     style="color: #795e26;">resolve</span>, <span
     style="color: #795e26;">reject</span>) <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">seleccion</span> = <span
     style="color: #795e26;">getArchivoSeleccionado</span>(<span
     style="color: #001080;">input</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">seleccion</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">reader</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FileReader</span>()</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onload</span> = () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">result</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #0070c1;">dataUrl</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">onerror</span> = () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">reject</span>(<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #0070c1;">error</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">reader</span>.<span
     style="color: #795e26;">readAsDataURL</span>(<span
     style="color: #0070c1;">seleccion</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">resolve</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;})</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getDataUrlDeSeleccion"</span>] = <span
     style="color: #795e26;">getDataUrlDeSeleccion</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / js / getInputParaElementoHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInputId</span> = <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-input"</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInputId</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">posibleInput</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">posibleInputId</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">posibleInput</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0070c1;">posibleInput</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"getInputParaElementoHtml"</span>] = <span
     style="color: #795e26;">getInputParaElementoHtml</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. lib / js / muestraArray.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">propiedad</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any[]}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valores</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">propiedad</span>, <span
     style="color: #001080;">valores</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">conjunto</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Set</span>(<span
     style="color: #001080;">valores</span>)</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementos</span> = <span
     style="color: #001080;">raizHtml</span>.<span
     style="color: #795e26;">querySelectorAll</span>(</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">`[name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"],[data-name="</span><span
     style="color: #0000ff;">${</span><span
     style="color: #001080;">propiedad</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;">"]`</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">from</span>(<span
     style="color: #0070c1;">elementos</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elemento</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #0070c1;">conjunto</span>.<span
     style="color: #795e26;">has</span>(<span
     style="color: #0070c1;">elemento</span>.<span
     style="color: #001080;">value</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraArray"</span>] = <span
     style="color: #795e26;">muestraArray</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >8. lib / js / muestraBoolean.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{boolean}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"checkbox"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">checked</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLInputElement</span></div>
  <div>&nbsp;&nbsp;&amp;&amp; <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">type</span> === <span
     style="color: #a31515;">"range"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">valueAsNumber</span> = <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #098658;">1</span> : <span
     style="color: #098658;">0</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">true</span> ? <span
     style="color: #a31515;">"verdadero"</span> : <span
     style="color: #a31515;">"falso"</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraBoolean"</span>] = <span
     style="color: #795e26;">muestraBoolean</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >9. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >10. lib / js / muestraImagen.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getDataUrlDeSeleccion</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getDataUrlDeSeleccion.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">getInputParaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./getInputParaElementoHtml.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ HTMLImageElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">img</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #0070c1;">dataset</span>.<span
     style="color: #001080;">inicial</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">input</span> = <span
     style="color: #795e26;">getInputParaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">img</span>)</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> === <span
     style="color: #0000ff;">null</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">input</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">dataUrl</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">getDataUrlDeSeleccion</span>(<span
     style="color: #0070c1;">input</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{ <span
     style="color: #008000;">// input !== null</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> === <span
     style="color: #a31515;">""</span> &amp;&amp; <span
     style="color: #001080;">valor</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">dataUrl</span> !== <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">hidden</span> = <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">img</span>.<span
     style="color: #001080;">src</span> = <span
     style="color: #0070c1;">dataUrl</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraImagen"</span>] = <span
     style="color: #795e26;">muestraImagen</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >11. lib / js / muestraInnerHtml.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{any}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">innerHTML</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraInnerHtml"</span>] = <span
     style="color: #795e26;">muestraInnerHtml</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >12. lib / js / muestraNumber.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ number }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isNaN</span>(<span
     style="color: #001080;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>.<span
     style="color: #795e26;">toString</span>())</div>
  <div>&nbsp;}</div>
  <div>}</div>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraNumber"</span>] = <span
     style="color: #795e26;">muestraNumber</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >13. lib / js / muestraObjeto.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">buscaElementoHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./buscaElementoHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraArray</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraArray.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraValor</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraValor.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">objeto</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraObjeto</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">objeto</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">for</span> (<span
     style="color: #0000ff;">const</span> [<span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>] <span
     style="color: #0000ff;">of</span> <span
     style="color: #267f99;">Object</span>.<span
     style="color: #795e26;">entries</span>(<span
     style="color: #001080;">objeto</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #267f99;">Array</span>.<span
     style="color: #795e26;">isArray</span>(<span
     style="color: #0070c1;">valor</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraArray</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">elementoHtml</span> = <span
     style="color: #795e26;">buscaElementoHtml</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">propiedad</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">elementoHtml</span> !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #0070c1;">elementoHtml</span>, <span
     style="color: #0070c1;">valor</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraObjeto"</span>] = <span
     style="color: #795e26;">muestraObjeto</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >14. lib / js / muestraString.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraInnerHtml</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraInnerHtml.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraTextContent</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraTextContent.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #a31515;">"value"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">value</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #795e26;">getAttribute</span>(<span
     style="color: #a31515;">"data-text-content"</span>) !== <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraInnerHtml</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraString"</span>] = <span
     style="color: #795e26;">muestraString</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >15. lib / js / muestraTextContent.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Element}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraTextContent</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">textContent</span> = <span
     style="color: #001080;">valor</span></div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraTextContent"</span>] = <span
     style="color: #795e26;">muestraTextContent</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >16. lib / js / muestraValor.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraBoolean</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraBoolean.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraImagen</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraImagen.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraNumber</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraNumber.js"</span></div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">muestraString</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./muestraString.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Document | HTMLElement }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">raizHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Element }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">elementoHtml</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ any }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">valor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraValor</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">elementoHtml</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">HTMLImageElement</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">await</span> <span
     style="color: #795e26;">muestraImagen</span>(<span
     style="color: #001080;">raizHtml</span>, <span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"number"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraNumber</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">null</span> || <span
     style="color: #001080;">valor</span> === <span
     style="color: #0000ff;">undefined</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraString</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #a31515;">""</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">valor</span> === <span
     style="color: #a31515;">"boolean"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">muestraBoolean</span>(<span
     style="color: #001080;">elementoHtml</span>, <span
     style="color: #001080;">valor</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">name</span> = <span
     style="color: #a31515;">"name"</span> <span
     style="color: #0000ff;">in</span> <span
     style="color: #001080;">elementoHtml</span></div>
  <div>&nbsp;&nbsp;&nbsp;? <span
     style="color: #001080;">elementoHtml</span>[<span
     style="color: #a31515;">"name"</span>]</div>
  <div>&nbsp;&nbsp;&nbsp;: <span
     style="color: #001080;">elementoHtml</span>.<span
     style="color: #001080;">id</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">`El valor de </span><span
     style="color: #0000ff;">${</span><span
     style="color: #0070c1;">name</span><span
     style="color: #0000ff;">}</span><span
     style="color: #a31515;"> no es soportado.`</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraValor"</span>] = <span
     style="color: #795e26;">muestraValor</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >17. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-leeArray-php.html">lib / php / leeArray.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-leeDecimal-php.html">lib / php / leeDecimal.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-leeEntero-php.html">lib / php / leeEntero.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m21compras/m-lib/m-php/m-recibeFetchAll-php.html">lib / php / recibeFetchAll.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / leeArray.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve los valores asociados a
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;parámetro multivaluado; por ejemplo,
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;grupo de checkbox, recibido en el
    servidor</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;por medio de GET, POST o cookie. Si no
    se</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibe el parámetro, devuelve un
    arreglo</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;vacío. Si el valor recibido no es
    un</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;arreglo, lo coloca dentro de
    uno.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string[]</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeArray</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: [];</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">is_array</span>(<span
     style="color: #001080;">$valor</span>)</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$valor</span></div>
  <div>&nbsp;&nbsp;: [<span
     style="color: #001080;">$valor</span>];</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / leeDecimal.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el valor decimal de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;(que puede tener fracciones) enviado
    al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeDecimal</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">float</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / leeEntero.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Devuelve el valor entero de un
    parámetro</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;recibido en el servidor por medio de
    GET,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;POST o cookie. Si parámetro no se
    puede</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;convertir a entero, se genera un
    error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Si el parámetro no se recibe,
    devuelve</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;null.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeEntero</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): ?<span
     style="color: #0000ff;">int</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #001080;">$parametro</span>));</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span> === <span
     style="color: #a31515;">""</span></div>
  <div>&nbsp;&nbsp;? <span
     style="color: #0000ff;">null</span></div>
  <div>&nbsp;&nbsp;: <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >5. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. lib / php / recibeFetchAll.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recibeFetchAll</span>(<span
     style="color: #0000ff;">false</span>|<span
     style="color: #0000ff;">array</span> <span
     style="color: #001080;">$resultado</span>): <span
     style="color: #0000ff;">array</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$resultado</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [];</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >O. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró la base de una aplicación que vende o compra.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >24. Pruebas</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m22pruebas/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mBlighthouse.html">Pruebas de rendimiento y soporte de estándares</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/">PHPUnit</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/">Jasmine</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mFcurl.html">Prueba de los servicios</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mEapp.html">Pruebas de la app</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se muestra como probar una aplicación web.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Pruebas de rendimiento y soporte de estándares</h1><div class="lectura">
 <ul>
  <li>
   <p>
    <dfn>Lighthouse</dfn>
    es una herramienta automatizada para mejorar el rendimiento, calidad y
    corrección de aplicaciones web.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/14ev2YZVrturnlNOn9cS4nMH0LvWTU5Ad/view?usp=sharing"
      target="_blank" rel="noopener">Video sobre el uso de Lighthouse.</a>
   </p>
  </li>
 </ul>
</div>
      </section>
     <section>
         <h1 >C. PHPUnit</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <ul>
  <li>
   <p>
    Las
    <dfn>pruebas de unidad</dfn>
    permiten asegurar que una parte del código cumple correctamente con sus
    funciones.
   </p>
  </li>
  <li>
   <p>
    A continuación se muestra un como realizar pruebas del servidor con PHPunit.
   </p>
  </li>
  <li>
   <p>
    En la práctica, los sistemas deben pasar todas las pruebas. En este ejemplo
    se fallan algunas.
   </p>
  </li>
  <li>
   <p>
    Puedes correr las pruebas en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/phpunit?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/phpunit?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m01instrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-src/">Carpeta « src »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-tests/">Carpeta « tests »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-composer-json.html">composer.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m--replit.html">.replit</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-replit-nix.html">replit.nix</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. Hazlo funcionar</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejercicio usa la librería PHPUnit para PHP. Puedes profundizar en este
    tema en la URL
    <a href="https://phpunit.de/" rel="noopener"
      target="_blank">https://phpunit.de/</a>
   </p>
  </li>
  <li>
   <p>
    <a href="/src/m22pruebas/phpunit.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/phpunit?v=11" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/phpunit?v=11</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1VIry7_AW6uT5d7zrATxWeDP7Eb_yffW4/view?usp=sharing"
      target="_blank" rel="nooper">Crea el proyecto phpunit con la categoría
     <em>PHP CLI</em> en Replit y edita o sube los archivos de phpunit.</a>
   </p>
  </li>
  <li>
   <p>
    El archivo <q>phpunit.zip</q> ya contiene la carpeta <q>vendor</q> y el
    archivo <q>composer.lock</q>, pero si quieres crearlos, debes seguir estos
    pasos:
   </p>
   <ol>
    <li>
     <p>
      Instalar composer. Si trabajas desde Replit, los archivos <q>.replit</q> y
      <q>replit.nix</q> de este proyecto lo instalan automáticamente. Para
      Windows, usa el instalador de
      <a
        href="https://getcomposer.org/download/">https://getcomposer.org/download/</a>.
     </p>
    </li>
    <li>
     <p>
      Para Replit, usa la pestaña <q>shell</q>, que ya está posicionada en la
      carpeta del proyecto.
      Si estas en Windows, debes abrir el símbolo del sistema y usar el comando
      <samp>cd</samp> para llegar a la carpeta del proyecto.
     </p>
    </li>
    <li>
     <p>
      Ejecuta el comando
      <br><samp>composer update</samp>
     </p>
    </li>
   </ol>
  </li>
  <li>
   <p>
    Haz clic en el botón <q>Run</q>. En la página de desarrollo, en la pestaña
    Console aparece la salida de las pruebas.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >2. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m--replit.html">.replit</a></p>
  </li>
  <li>
   <p><a href="m-composer-json.html">composer.json</a></p>
  </li>
  <li>
   <p>composer.lock <em>(No se muestra el contenido de este archivo.)</em></p>
  </li>
  <li>
   <p><a href="m-replit-nix.html">replit.nix</a></p>
  </li>
  <li>
   <details>
    <summary>src</summary>
    <ul>
     <li>
      <p><a href="m-src/m-recomienda-php.html">recomienda.php</a></p>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>tests</summary>
    <ul>
     <li>
      <p><a href="m-tests/m-RecomiendaTest-php.html">RecomiendaTest.php</a></p>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>vendor</summary>
    <p><em>No se muestra el contenido de esta carpeta.</em></p>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section>
         <h1 >3. Carpeta « src »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-src/m-recomienda-php.html">src / recomienda.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. src / recomienda.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$genero</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$genero</span> === <span
     style="color: #a31515;">"pop"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"Dua Lipa."</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">elseif</span> (<span
     style="color: #001080;">$genero</span> === <span
     style="color: #a31515;">"reg"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"Bad Bunny."</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"De eso no conozco"</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >4. Carpeta « tests »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m22pruebas/mCphpunit/m-tests/m-RecomiendaTest-php.html">tests / RecomiendaTest.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. tests / RecomiendaTest.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">use</span> PHPUnit\Framework\<span
     style="color: #267f99;">TestCase</span>;</div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../src/recomienda.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">final</span> <span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">RecomiendaTest</span> <span
     style="color: #0000ff;">extends</span> <span
     style="color: #267f99;">TestCase</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">testPop</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #795e26;">assertEquals</span>(<span
     style="color: #a31515;">"Dua Lipa."</span>, <span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"pop"</span>), <span
     style="color: #a31515;">"Probando pop"</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">testReg</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #795e26;">assertEquals</span>(<span
     style="color: #a31515;">"Bad Bunny."</span>, <span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"reg"</span>), <span
     style="color: #a31515;">"Probando reg"</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">public</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">testReg2</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">$this</span>-&gt;<span
     style="color: #795e26;">assertEquals</span>(<span
     style="color: #a31515;">"Daddy Yankee."</span>, <span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"reg"</span>), <span
     style="color: #a31515;">"Probando reg 2"</span>);</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >5. composer.json</h1><muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"require-dev"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"phpunit/phpunit"</span>: <span
     style="color: #a31515;">"^10"</span></div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. .replit</h1><muestra-codigo>
 <div>run = ["./vendor/bin/phpunit", "tests"]</div>
 <div><br></div>
 <div>entrypoint = "tests/RecomiendaTest.php"</div>
 <div><br></div>
 <div>[nix]</div>
 <div>channel = "stable-23_05"</div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. replit.nix</h1><muestra-codigo>
 <div>{ pkgs }:&nbsp;{</div>
 <div>&nbsp;&nbsp;deps = [</div>
 <div>&nbsp;&nbsp;&nbsp;&nbsp;pkgs.php82</div>
 <div>&nbsp;&nbsp;&nbsp;&nbsp;pkgs.php82Packages.composer</div>
 <div>&nbsp;&nbsp;];</div>
 <div>}</div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >D. Jasmine</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <ul>
  <li>
   <p>
    Las
    <dfn>pruebas de unidad</dfn>
    permiten asegurar que una parte del código cumple correctamente con sus
    funciones.
   </p>
  </li>
  <li>
   <p>
    A continuación se muestra un como realizar pruebas del cliente con Jasmine.
   </p>
  </li>
  <li>
   <p>
    En la práctica, los sistemas deben pasar todas las pruebas. En este ejemplo
    se fallan algunas.
   </p>
  </li>
  <li>
   <p>
    Puedes correr las pruebas en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/jasmine?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/jasmine?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
 <nav>
  <h1>Contenido</h1>
  
   <ol type="1">
    
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/mAinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-src/">Carpeta « src »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-spec/">Carpeta « spec »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-package-json.html">package.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m--replit.html">.replit</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-replit-nix.html">replit.nix</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >1. Hazlo funcionar</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejercicio usa la librería Jasmine para JavaScript. Puedes profundizar
    en este tema en la URL
    <a href="https://jasmine.github.io/" rel="noopener"
      target="_blank">https://jasmine.github.io/</a>
   </p>
  </li>
  <li>
   <p>
    <a href="/src/m22pruebas/jasmine.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/jasmine?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/jasmine?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    Crear un proyecto de tipo <q>Node.js</q> en
    <a href="https://replit.com" target="_blank"
      rel="noopener">https://replit.com</a>. Algunos archivos se generan con
    las instrucciones que siguen, por lo que no se incluyen en el zip, pero si
    se muestra su contenido en las páginas siguientes.
   </p>
  </li>
  <li>
   <p>
    Edita el archivo <q>packege.json</q> e inserta en la linea 6, sin borrar ni
    sobreescribir nada, la siguiente línea
   </p>
   <p><code>"type": "module",</code></p>
  </li>
  <li>
   <p>
    Ejecuta las siguientes instrucciones desde la pestaña <q>Shell</q>
   </p>
  </li>
  <li>
   <p>Instala Jasmine en el proyecto con la orden:</p>
   <p><samp>npm install --save-dev jasmine</samp></p>
  </li>
  <li>
   <p>Inicializa Jasmine con la orden:</p>
   <p><samp>npx jasmine init</samp></p>
  </li>
  <li>
   <p>
    Añade los archivos que vienen en el zip; esto incluye modificar el archivo
    <q>.replit</q>.
   </p>
  </li>
  <li>
   <p>
    Haz clic en el botón <q>Run</q>. En la página de desarrollo, en la pestaña
    Console aparece la salida de las pruebas.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >2. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m--replit.html">.replit</a></p>
  </li>
  <li>
   <p>package-lock.json <em>(No se muestra el contenido de este archivo.)</em></p>
  </li>
  <li>
   <p><a href="m-package-json.html">package.json</a></p>
  </li>
  <li>
   <p><a href="m-replit-nix.html">replit.nix</a></p>
  </li>
  <li>
   <details>
    <summary>spec</summary>
    <ul>
     <li>
      <p><a href="m-spec/m-recomiendaSpec-js.html">recomiendaSpec.js</a></p>
     </li>
     <li>
      <details>
       <summary>support</summary>
       <ul>
        <li>
         <p><a href="m-spec/m-support/m-jasmine-json.html">jasmine.json</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>src</summary>
    <ul>
     <li>
      <p><a href="m-src/m-recomienda-js.html">recomienda.js</a></p>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>node_modules</summary>
    <p><em>No se muestra el contenido de esta carpeta.</em></p>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section>
         <h1 >3. Carpeta « src »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-src/m-recomienda-js.html">src / recomienda.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. src / recomienda.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">genero</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #001080;">genero</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">genero</span> === <span
     style="color: #a31515;">"pop"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"Dua Lipa."</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">genero</span> === <span
     style="color: #a31515;">"reg"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"Bad Bunny."</span></div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #a31515;">"De eso no conozco."</span></div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >4. Carpeta « spec »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-spec/m-recomiendaSpec-js.html">spec / recomiendaSpec.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-spec/m-support/">Carpeta « spec / support »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. spec / recomiendaSpec.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">recomienda</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">'../src/recomienda.js'</span></div><br>
  <div><span
     style="color: #795e26;">describe</span>(<span
     style="color: #a31515;">"recomienda"</span>, () <span
     style="color: #0000ff;">=&gt;</span>&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">it</span>(<span
     style="color: #a31515;">"pop"</span>, () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">expect</span>(<span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"pop"</span>)).<span
     style="color: #795e26;">toBe</span>(<span
     style="color: #a31515;">"Dua Lipa."</span>))</div>
  <div>&nbsp;<span
     style="color: #795e26;">it</span>(<span
     style="color: #a31515;">"reg"</span>, () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">expect</span>(<span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"reg"</span>)).<span
     style="color: #795e26;">toBe</span>(<span
     style="color: #a31515;">"Bad Bunny."</span>))</div>
  <div>&nbsp;<span
     style="color: #795e26;">it</span>(<span
     style="color: #a31515;">"reg2"</span>, () <span
     style="color: #0000ff;">=&gt;</span> <span
     style="color: #795e26;">expect</span>(<span
     style="color: #795e26;">recomienda</span>(<span
     style="color: #a31515;">"reg"</span>)).<span
     style="color: #795e26;">toBe</span>(<span
     style="color: #a31515;">"Daddy Yankee."</span>))</div>
  <div>})</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >B. Carpeta « spec / support »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m22pruebas/mDjasmine/m-spec/m-support/m-jasmine-json.html">spec / support / jasmine.json</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. spec / support / jasmine.json</h1><muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"spec_dir"</span>: <span
     style="color: #a31515;">"spec"</span>,</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"spec_files"</span>: [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"**/*[sS]pec.?(m)js"</span></div>
  <div>&nbsp;],</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"helpers"</span>: [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"helpers/**/*.?(m)js"</span></div>
  <div>&nbsp;],</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"env"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"stopSpecOnExpectationFailure"</span>: <span
     style="color: #0000ff;">false</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"random"</span>: <span
     style="color: #0000ff;">true</span></div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >5. package.json</h1><muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"name"</span>: <span
     style="color: #a31515;">"nodejs"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"version"</span>: <span
     style="color: #a31515;">"1.0.0"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"description"</span>: <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"main"</span>: <span
     style="color: #a31515;">"index.js"</span>,</div>
  <div><mark class="resaltado">&nbsp;&nbsp;<span
     style="color: #0451a5;">"type"</span>: <span
     style="color: #a31515;">"module"</span>,</mark></div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"scripts"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0451a5;">"test"</span>: <span
     style="color: #a31515;">"echo </span><span
     style="color: #ee0000;">\"</span><span
     style="color: #a31515;">Error: no test specified</span><span
     style="color: #ee0000;">\"</span><span
     style="color: #a31515;"> &amp;&amp; exit 1"</span></div>
  <div>&nbsp;&nbsp;},</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"keywords"</span>: [],</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"author"</span>: <span
     style="color: #a31515;">""</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"license"</span>: <span
     style="color: #a31515;">"ISC"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"dependencies"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0451a5;">"@types/node"</span>: <span
     style="color: #a31515;">"^18.0.6"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0451a5;">"node-fetch"</span>: <span
     style="color: #a31515;">"^3.2.6"</span></div>
  <div>&nbsp;&nbsp;},</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"devDependencies"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #0451a5;">"jasmine"</span>: <span
     style="color: #a31515;">"^5.1.0"</span></div>
  <div>&nbsp;&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >6. .replit</h1><muestra-codigo>
 <div>
  <div><mark class="resaltado"><span
      style="color: #001080;">run</span> = [<span
      style="color: #a31515;">"npx"</span>, <span
      style="color: #a31515;">"jasmine"</span>]</mark></div>
  <div><span
     style="color: #001080;">entrypoint</span> = <span
     style="color: #a31515;">"src/recomienda.js"</span></div>
  <div><span
     style="color: #001080;">modules</span> = [<span
     style="color: #a31515;">"nodejs-20:v8-20230920-bd784b9"</span>]</div>
  <div><span
     style="color: #001080;">hidden</span> = [<span
     style="color: #a31515;">".config"</span>, <span
     style="color: #a31515;">"package-lock.json"</span>]</div><br>
  <div>[<span
     style="color: #001080;">nix</span>]</div>
  <div><span
     style="color: #001080;">channel</span> = <span
     style="color: #a31515;">"stable-23_05"</span></div><br>
  <div>[<span
     style="color: #001080;">unitTest</span>]</div>
  <div><span
     style="color: #001080;">language</span> = <span
     style="color: #a31515;">"nodejs"</span></div><br>
  <div>[<span
     style="color: #001080;">deployment</span>]</div>
  <div><span
     style="color: #001080;">run</span> = [<span
     style="color: #a31515;">"node"</span>, <span
     style="color: #a31515;">"index.js"</span>]</div>
  <div><span
     style="color: #001080;">deploymentTarget</span> = <span
     style="color: #a31515;">"cloudrun"</span></div>
  <div><span
     style="color: #001080;">ignorePorts</span> = <span
     style="color: #0000ff;">false</span></div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >7. replit.nix</h1><muestra-codigo>
 <div>{pkgs}:&nbsp;{</div>
 <div>&nbsp;&nbsp;deps = [ ];</div>
 <div>}</div>
 <div><br></div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >E. Prueba de los servicios</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejercicio usa el comando curl para bash, que nos permite realizar una
    conexión a un sitio. Puedes profundizar en este tema en la URL
    <a href="https://curl.se/" rel="noopener"
      target="_blank">https://curl.se/</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a href="https://replit.com/@GilbertoPachec5/curl?v=1" rel="nooper"
      target="_blank">https://replit.com/@GilbertoPachec5/curl?v=1</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    Crear un proyecto <q>curl</q> de tipo <q>Bash</q> en
    <a href="https://replit.com" target="_blank"
      rel="noopener">https://replit.com</a>.
   </p>
  </li>
  <li>
   <p>
    En el archivo principal añade la linea
   </p>
   <muestra-codigo>
    <div>
     <div>curl https://srvresultado.gilbertopachec5.repl.co/srv/srvResultado.php</div>
     <div></div>
    </div>
   </muestra-codigo>
  </li>
  <li>
   <p>
    Haz clic en el botón <q>Run</q>. En la página de desarrollo, en la pestaña
    Console aparece el resultado devuelto por el servicio.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >F. Pruebas de la app</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Hay herramientas que permiten probar toda la aplicación.
   </p>
  </li>
  <li>
   <p>
    <a href="https://www.selenium.dev/"
      target="_blank" rel="noopener">Selenium</a>.
   </p>
  </li>
  <li>
   <p>
    <a href="https://github.com/puppeteer/puppeteer"
      target="_blank" rel="noopener">Puppeteer</a>.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1TlTaJZa7iLUhN3nM9EmDap8jZfotFFOh/view?usp=sharing"
      target="_blank" rel="noopener">Video sobre la instalación de Selenium.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1XwKZekALsv2GOGqlS4EhiI29UpBgKGV9/view?usp=sharing"
      target="_blank" rel="noopener">Video sobre el uso de Selenium.</a>
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >G. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró como probar una aplicación web.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
     <section>
         <h1 >25. Servicio con token</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>
<div class="lectura">
 <nav>
  <h1>Contenido</h1>
  
   <ol type="A">
    
   <li>
    <p>
     <a href="/m23token/mAintro.html">Introducción</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/mDdeploy.html">Diagrama de despliegue</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/mGinstrucciones.html">Hazlo funcionar</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/mArchivos.html">Archivos</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-index-html.html">index.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-formulario-html.html">formulario.html</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-srv/">Carpeta « srv »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-jsconfig-json.html">jsconfig.json</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/">Carpeta « lib »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/mTresumen.html">Resumen</a>
    </p>
   </li>
   </ol>
 </nav>
</div>
     <section >
         <h1 >A. Introducción</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este ejemplo muestra como proteger servicios y formas con el uso de tokens.
   </p>
  </li>
  <li>
   <p>
    Puedes probar el ejemplo en
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvtoken?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvtoken?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >B. Diagrama de despliegue</h1><figure>
 <img style="max-height: none;"
   src="/img/m23token/srvtokendistribucion.drawio.svg"
   alt="Diagrama de despliegue">
</figure>
      </section>
     <section >
         <h1 >C. Hazlo funcionar</h1><div class="lectura">
 <ol>
  <li>
   <p>
    <a href="/src/m23token/srvtoken.zip" download>Descarga el ejemplo.</a>
   </p>
  </li>
  <li>
   <p>
    Revisa el proyecto en Replit con la URL
    <a rel="noopener" href="https://replit.com/@GilbertoPachec5/srvtoken?v=1"
      target="_blank">https://replit.com/@GilbertoPachec5/srvtoken?v=1</a>.
    Hazle fork al proyecto y córrelo.
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1ujeNp8TaHjqqRXl_TFT0omUGymmFWTLm/view?usp=sharing"
      target="_blank" rel="nooper">Usa o crea una cuenta de Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1dmifWNqm_gRmQuMEe67HqKBYzzDTwEHt/view?usp=sharing"
      target="_blank" rel="nooper">Crea una cuenta de Replit usando la cuenta de
     Google.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1uH3T58ZJrmihJb3wRdnEFhtbgil9ED6w/view?usp=sharing"
      target="_blank" rel="nooper">Crea un proyecto <em>PHP Web Server</em> en
     Replit y edita o sube los archivos de este proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1F3sHMnear4JOu1NVKIkkjVBKFg-eoMX4/view?usp=sharing"
      target="_blank" rel="nooper">Depura el proyecto.</a>
   </p>
  </li>
  <li>
   <p>
    <a href="https://drive.google.com/file/d/1LphPNEygv1rV2Bx0fEJQH5O88e7u5dvJ/view?usp=sharing"
      target="_blank" rel="nooper">Crea la <b>cover page</b> o página de
     spotlight del proyecto.</a>
   </p>
  </li>
 </ol>
</div>
      </section>
     <section >
         <h1 >D. Archivos</h1><div class="lectura">
 <p>Haz clic en los triángulos para expandir las carpetas</p>
 <ul class="tree">
  <li>
   <p><a href="m-formulario-html.html">formulario.html</a></p>
  </li>
  <li>
   <p><a href="m-index-html.html">index.html</a></p>
  </li>
  <li>
   <p><a href="m-jsconfig-json.html">jsconfig.json</a></p>
  </li>
  <li>
   <details>
    <summary>lib</summary>
    <ul>
     <li>
      <details>
       <summary>js</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-js/m-ejecuta-js.html">ejecuta.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-muestraError-js.html">muestraError.js</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-js/m-submitForma-js.html">submitForma.js</a></p>
        </li>
       </ul>
      </details>
     </li>
     <li>
      <details>
       <summary>php</summary>
       <ul>
        <li>
         <p><a href="m-lib/m-php/m-creaToken-php.html">creaToken.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-ejecuta-php.html">ejecuta.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-leeTexto-php.html">leeTexto.php</a></p>
        </li>
        <li>
         <p><a href="m-lib/m-php/m-validaToken-php.html">validaToken.php</a></p>
        </li>
       </ul>
      </details>
     </li>
    </ul>
   </details>
  </li>
  <li>
   <details>
    <summary>srv</summary>
    <ul>
     <li>
      <p><a href="m-srv/m-srvProcesa-php.html">srvProcesa.php</a></p>
     </li>
     <li>
      <p><a href="m-srv/m-srvRegistra-php.html">srvRegistra.php</a></p>
     </li>
    </ul>
   </details>
  </li>
 </ul>
</div>
      </section>
     <section >
         <h1 >E. index.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Uso de tokens<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Uso de tokens<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"formulario.html"</span><span
     style="color: #800000;">&gt;</span>Servicio que procesa un formulario con
   token.<span
     style="color: #800000;">&lt;/a&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >F. formulario.html</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span> <span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Servicio que procesa un
   formulario con token<span
     style="color: #800000;">&lt;/title&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/ejecuta.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/submitForma.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"module"</span> <span
     style="color: #e50000;">src</span>=<span
     style="color: #0000ff;">"lib/js/muestraError.js"</span><span
     style="color: #800000;">&gt;&lt;/script&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">token</span> = <span
     style="color: #a31515;">""</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/script&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #008000;">&lt;!-- Al cargar, registra este formulario en la
    sesión y recibe un token. --&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body</span> <span
     style="color: #e50000;">onload</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvRegistra.php'</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">token</span><span
     style="color: #0000ff;"> =&gt; </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">token</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #001080;">token</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Servicio que procesa un formulario
   con token<span
     style="color: #800000;">&lt;/h1&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"index.html"</span><span
     style="color: #800000;">&gt;</span>Cancela<span
     style="color: #800000;">&lt;/a&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;form</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"forma"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">onsubmit</span>=<span
     style="color: #0000ff;">"</span><span
     style="color: #795e26;">submitForma</span><span
     style="color: #0000ff;">(</span><span
     style="color: #a31515;">'srv/srvProcesa.php'</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">event</span><span
     style="color: #0000ff;">, </span><span
     style="color: #001080;">forma</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">then</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;"> =&gt;&nbsp;{</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">alert</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">resultado</span><span
     style="color: #0000ff;">)</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">location</span><span
     style="color: #0000ff;">.</span><span
     style="color: #001080;">href</span><span
     style="color: #0000ff;"> </span>=<span
     style="color: #0000ff;"> </span><span
     style="color: #a31515;">'index.html'</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;})</span></div>
  <div><span
     style="color: #0000ff;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">catch</span><span
     style="color: #0000ff;">(</span><span
     style="color: #001080;">muestraError</span><span
     style="color: #0000ff;">)"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">&lt;!-- Al enviar la forma, se envía el token
    recibido. --&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"hidden"</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"token"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Saludo:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"saludo"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;label&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;Nombre:</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;input</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"nombre"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/label&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;p&gt;&lt;button</span> <span
     style="color: #e50000;">type</span>=<span
     style="color: #0000ff;">"submit"</span><span
     style="color: #800000;">&gt;</span>Procesa<span
     style="color: #800000;">&lt;/button&gt;&lt;/p&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/form&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >G. Carpeta « srv »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m23token/m-srv/m-srvRegistra-php.html">srv / srvRegistra.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-srv/m-srvProcesa-php.html">srv / srvProcesa.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >A. srv / srvRegistra.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/creaToken.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;<span
     style="color: #008000;">// Crea un token pa la página "formulario" que
    expira en 5 minutos.</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">creaToken</span>(<span
     style="color: #a31515;">"formulario"</span>, <span
     style="color: #098658;">5</span>);</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >B. srv / srvProcesa.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/validaToken.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div><br>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$token</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"token"</span>);</div>
  <div>&nbsp;<span
     style="color: #795e26;">validaToken</span>(<span
     style="color: #a31515;">"formulario"</span>, <span
     style="color: #001080;">$token</span>);</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Si el token se halló, precesa normalmente la
    forma.</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$saludo</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"saludo"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$nombre</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"nombre"</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$saludo</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el saludo"</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$nombre</span> === <span
     style="color: #a31515;">""</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Falta el nombre"</span>);</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #001080;">$resultado</span> =</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"{</span><span
     style="color: #001080;">$saludo</span><span
     style="color: #a31515;">}&nbsp;{</span><span
     style="color: #001080;">$nombre</span><span
     style="color: #a31515;">}."</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$resultado</span>;</div>
  <div>});</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section >
         <h1 >H. jsconfig.json</h1><div class="lectura">
 <ul>
  <li>
   <p>
    Este archivo ayuda a detectar errores en los archivos del proyecto.
   </p>
  </li>
  <li>
   <p>
    Lo utiliza principalmente Visual Studio Code.
   </p>
  </li>
  <li>
   <p>
    No se explica aquí su estructura, pero puede encontrarse la explicación de
    todo en la documentación del sitio de Visual Studio Code.
   </p>
  </li>
 </ul>
</div>
<muestra-codigo>
 <div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0451a5;">"compilerOptions"</span>:&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"checkJs"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"strictNullChecks"</span>: <span
     style="color: #0000ff;">true</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"target"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"module"</span>: <span
     style="color: #a31515;">"ES6"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"moduleResolution"</span>: <span
     style="color: #a31515;">"classic"</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0451a5;">"lib"</span>: [</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"ES2017"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"WebWorker"</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #a31515;">"DOM"</span></div>
  <div>&nbsp;&nbsp;]</div>
  <div>&nbsp;}</div>
  <div>}</div>
 </div>
</muestra-codigo>
      </section>
     <section>
         <h1 >I. Carpeta « lib »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="A">
    
   <li>
    <p>
     <a href="/m23token/m-lib/m-js/">Carpeta « lib / js »</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-php/">Carpeta « lib / php »</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section>
         <h1 >A. Carpeta « lib / js »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m23token/m-lib/m-js/m-ejecuta-js.html">lib / js / ejecuta.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-js/m-muestraError-js.html">lib / js / muestraError.js</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-js/m-submitForma-js.html">lib / js / submitForma.js</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / js / ejecuta.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Espera a que la promesa de un fetch
    termine. Si</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;hay error, lanza una excepción. Si no
    hay error,</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;interpreta la respuesta del servidor
    como JSON y</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;la convierte en una literal de objeto.
   </span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ string | Promise&lt;Response&gt; }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">servicio</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">async</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">servicio</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">let</span> <span
     style="color: #001080;">f</span> = <span
     style="color: #001080;">servicio</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0000ff;">typeof</span> <span
     style="color: #001080;">servicio</span> === <span
     style="color: #a31515;">"string"</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">f</span> = <span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">servicio</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (!(<span
     style="color: #001080;">f</span> <span
     style="color: #0000ff;">instanceof</span> <span
     style="color: #267f99;">Promise</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #a31515;">"Servicio de tipo incorrecto."</span>)</div>
  <div>&nbsp;}</div>
  <div>&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">respuesta</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #001080;">f</span></div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">ok</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #0000ff;">const</span> <span
     style="color: #0070c1;">texto</span> = <span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>()</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">JSON</span>.<span
     style="color: #795e26;">parse</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">texto</span>)</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">status</span> === <span
     style="color: #098658;">500</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #af00db;">await</span> <span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #795e26;">text</span>())</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Error</span>(<span
     style="color: #0070c1;">respuesta</span>.<span
     style="color: #0070c1;">statusText</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"ejecuta"</span>] = <span
     style="color: #795e26;">ejecuta</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / js / muestraError.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Muestra un error en la consola y en un
    cuadro de</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;alerta el mensaje de una
    excepción.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ Error | null }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">error</span><span
     style="color: #008000;"> descripción del error.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">muestraError</span>(<span
     style="color: #001080;">error</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">error</span> === <span
     style="color: #0000ff;">null</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">log</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #a31515;">"Error"</span>)</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">console</span>.<span
     style="color: #795e26;">error</span>(<span
     style="color: #001080;">error</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">alert</span>(<span
     style="color: #001080;">error</span>.<span
     style="color: #001080;">message</span>)</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"muestraError"</span>] = <span
     style="color: #795e26;">muestraError</span></div>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / js / submitForma.js</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #af00db;">import</span>&nbsp;{ <span
     style="color: #001080;">ejecuta</span> }&nbsp;<span
     style="color: #af00db;">from</span> <span
     style="color: #a31515;">"./ejecuta.js"</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Envía los datos de la forma a la url
    usando la codificación</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;multipart/form-data.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{string}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">url</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{Event}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">event</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{HTMLFormElement}</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">forma</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">{ "GET" | "POST"| "PUT" | "PATCH" | "DELETE" |
    "TRACE" | "OPTIONS"</span></div>
  <div><span
     style="color: #008000;">&nbsp;*</span><span
     style="color: #267f99;">&nbsp;&nbsp;| "CONNECT" | "HEAD" }</span><span
     style="color: #008000;"> </span><span
     style="color: #001080;">metodoHttp</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #af00db;">export</span> <span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">submitForma</span>(<span
     style="color: #001080;">url</span>, <span
     style="color: #001080;">event</span>, <span
     style="color: #001080;">forma</span>, <span
     style="color: #001080;">metodoHttp</span> = <span
     style="color: #a31515;">"POST"</span>)&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #001080;">event</span>.<span
     style="color: #795e26;">preventDefault</span>()</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #795e26;">fetch</span>(<span
     style="color: #001080;">url</span>,&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">method</span><span
     style="color: #001080;">:</span> <span
     style="color: #001080;">metodoHttp</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">body</span><span
     style="color: #001080;">:</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">FormData</span>(<span
     style="color: #001080;">forma</span>)</div>
  <div>&nbsp;}))</div>
  <div>}</div><br>
  <div><span
     style="color: #008000;">// Permite que los eventos de html usen la
    función.</span></div>
  <div><span
     style="color: #001080;">window</span>[<span
     style="color: #a31515;">"submitForma"</span>] = <span
     style="color: #795e26;">submitForma</span></div>
 </div>
</muestra-codigo>
      </section>
      </section>
     <section>
         <h1 >B. Carpeta « lib / php »</h1>
   <div class="lectura"> 
    <p class="noPrint">
     <a href="print.html" target="_blank" rel="noopener">Versión para
      imprimir.</a>
    </p>
   </div>

  <div class="lectura">
   <nav>
    <h1>Contenido</h1>
    
   <ol type="1">
    
   <li>
    <p>
     <a href="/m23token/m-lib/m-php/m-creaToken-php.html">lib / php / creaToken.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-php/m-validaToken-php.html">lib / php / validaToken.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-php/m-ejecuta-php.html">lib / php / ejecuta.php</a>
    </p>
   </li>
   <li>
    <p>
     <a href="/m23token/m-lib/m-php/m-leeTexto-php.html">lib / php / leeTexto.php</a>
    </p>
   </li>
   </ol>
   </nav>
  </div>
     <section >
         <h1 >1. lib / php / creaToken.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">creaToken</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$pagina</span>, <span
     style="color: #0000ff;">int</span> <span
     style="color: #001080;">$duracionEnMinutos</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #001080;">$criptografiaFuerte</span> = <span
     style="color: #0000ff;">true</span>;</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Crea el token</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$token</span> = [</div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"expiracion"</span> =&gt; <span
     style="color: #795e26;">time</span>() + <span
     style="color: #098658;">60</span> *&nbsp;<span
     style="color: #001080;">$duracionEnMinutos</span>,</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// El token es de 80 caracteres, criptográficamente
    fuerte.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #a31515;">"texto"</span> =&gt; <span
     style="color: #795e26;">bin2hex</span>(<span
     style="color: #795e26;">openssl_random_pseudo_bytes</span>(<span
     style="color: #098658;">80</span>, <span
     style="color: #001080;">$criptografiaFuerte</span>))</div>
  <div>&nbsp;];</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Verifica que ya haya tokens $pagina.</span>
  </div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>]))&nbsp;{</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$tokensParaPagina</span> = <span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>];</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Como ya exite el arreglo, elimina los tokens
    expirados para esta pagina.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$tokensParaPagina</span> as <span
     style="color: #001080;">$llave</span> =&gt; <span
     style="color: #001080;">$tokenParaPagina</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$tokenParaPagina</span>[<span
     style="color: #a31515;">"expiracion"</span>] &gt; <span
     style="color: #795e26;">time</span>())&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">unset</span>(<span
     style="color: #001080;">$tokensParaPagina</span>[<span
     style="color: #001080;">$llave</span>]);</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Se puede usar uno o varios tokens por
    pagina.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$tokensParaPagina</span>[] = <span
     style="color: #001080;">$token</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>] = <span
     style="color: #001080;">$tokensParaPagina</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Se puede usar uno o varios tokens por pagina
   </span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>] = [<span
     style="color: #001080;">$token</span>];</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$token</span>[<span
     style="color: #a31515;">"texto"</span>];</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >2. lib / php / validaToken.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">validaToken</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$pagina</span>, <span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$token</span>)</div>
  <div>{</div><br>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>]))</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Página </span><span
     style="color: #001080;">$pagina</span><span
     style="color: #a31515;"> no registrada."</span>);</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$tokensParaPagina</span> = <span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>];</div><br>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #795e26;">is_array</span>(<span
     style="color: #001080;">$tokensParaPagina</span>))</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"No hay arereglo de tokens."</span>);</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$hallado</span> = <span
     style="color: #0000ff;">false</span>;</div><br>
  <div>&nbsp;<span
     style="color: #008000;">// Valida que el token se haya registrado.</span>
  </div>
  <div>&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$tokensParaPagina</span> as <span
     style="color: #001080;">$llave</span> =&gt; <span
     style="color: #001080;">$tokenParaPagina</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #795e26;">strcmp</span>(<span
     style="color: #001080;">$token</span>, <span
     style="color: #001080;">$tokenParaPagina</span>[<span
     style="color: #a31515;">"texto"</span>]) === <span
     style="color: #098658;">0</span>)&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$tokenParaPagina</span>[<span
     style="color: #a31515;">"expiracion"</span>] &lt; <span
     style="color: #795e26;">time</span>())&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">unset</span>(<span
     style="color: #001080;">$tokensParaPagina</span>[<span
     style="color: #001080;">$llave</span>]);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>] = <span
     style="color: #001080;">$tokensParaPagina</span>;</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Tiempo de expiración excedido."</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;}</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$hallado</span> = <span
     style="color: #0000ff;">true</span>;</div>
  <div>&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">elseif</span> (<span
     style="color: #001080;">$tokenParaPagina</span>[<span
     style="color: #a31515;">"expiracion"</span>] &gt; <span
     style="color: #795e26;">time</span>())&nbsp;{</div><br>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">// Elimina tokens expirados</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">unset</span>(<span
     style="color: #001080;">$tokensParaPagina</span>[<span
     style="color: #001080;">$llave</span>]);</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;}</div><br>
  <div>&nbsp;<span
     style="color: #001080;">$_SESSION</span>[<span
     style="color: #001080;">$pagina</span>] = <span
     style="color: #001080;">$tokensParaPagina</span>;</div><br>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$hallado</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"No autorizado"</span>);</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >3. lib / php / ejecuta.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Ejecuta una funcion que implementa un
    servicio.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #001080;">$servicio</span>)</div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #af00db;">try</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Usa utf8.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">mb_internal_encoding</span>(<span
     style="color: #a31515;">"UTF-8"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$resultado</span> = <span
     style="color: #001080;">$servicio</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve JSON.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: application/json"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$json</span> = <span
     style="color: #795e26;">json_encode</span>(<span
     style="color: #001080;">$resultado</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$json</span> === <span
     style="color: #0000ff;">false</span>)</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"El valor de regreso no puede representarse como
    JSON"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$json</span>;</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">catch</span> (<span
     style="color: #267f99;">Throwable</span> <span
     style="color: #001080;">$t</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #008000;">// Devuelve error.</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">header</span>(<span
     style="color: #a31515;">"Content-Type: text/plain"</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">http_response_code</span>(<span
     style="color: #098658;">500</span>);</div>
  <div>&nbsp;&nbsp;<span
     style="color: #795e26;">echo</span> <span
     style="color: #001080;">$t</span>-&gt;<span
     style="color: #795e26;">getMessage</span>();</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
     <section >
         <h1 >4. lib / php / leeTexto.php</h1><muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;Recupera el texto de un parámetro
    enviado al</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;servidor por medio de GET, POST o
    cookie.</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #0000ff;">string</span> <span
     style="color: #001080;">$parametro</span>): <span
     style="color: #0000ff;">string</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #008000;">/*&nbsp;Si el parámetro está asignado en
    $_REQUEST,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve su valor; de lo
    contrario,</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;*&nbsp;devuelve "". */</span></div>
  <div>&nbsp;<span
     style="color: #001080;">$valor</span> = <span
     style="color: #795e26;">isset</span>(<span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>])</div>
  <div>&nbsp;&nbsp;? <span
     style="color: #001080;">$_REQUEST</span>[<span
     style="color: #001080;">$parametro</span>]</div>
  <div>&nbsp;&nbsp;: <span
     style="color: #a31515;">""</span>;</div>
  <div>&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$valor</span>;</div>
  <div>}</div><br>
 </div>
</muestra-codigo>
      </section>
      </section>
      </section>
     <section >
         <h1 >J. Resumen</h1><div class="lectura">
 <ul>
  <li>
   <p>
    En esta lección se mostró como proteger servicios y formas con el uso de
    tokens.
   </p>
  </li>
 </ul>
</div>
      </section>
      </section>
</body>

</html>