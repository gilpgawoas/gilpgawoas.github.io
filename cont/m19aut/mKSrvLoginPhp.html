<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">__DIR__</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"/../lib/php/autoload.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"srv/const/CUE.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/const/ROL_IDS.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/dao/usuarioVerifica.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"lib/php/leeTexto.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"lib/php/leeSinEspaciosInFin.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"srv/txt/"</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #000000;">.</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"txtDatosIncorrectos.php"</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> \lib\php\</span><span
     style="color: #267f99;">Servicio</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> srv\modelo\</span><span
     style="color: #267f99;">Rol</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #0000ff;">class</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">SrvLogin</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">extends</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">Servicio</span></div>
  <div><span
     style="color: #000000;">{</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">protected</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">implementacion</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #795e26;">session_start</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$cue</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">leeSinEspaciosInFin</span><span
     style="color: #000000;">(</span><span
     style="color: #a31515;">"cue"</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$match</span><span
     style="color: #000000;"> = </span><span
     style="color: #795e26;">leeTexto</span><span
     style="color: #000000;">(</span><span
     style="color: #a31515;">"match"</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$roles</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">usuarioVerifica</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$cue</span><span
     style="color: #000000;">, </span><span
     style="color: #001080;">$match</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">$roles</span><span
     style="color: #000000;"> === </span><span
     style="color: #0000ff;">false</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">throw</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">Exception</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">txtDatosIncorrectos</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$rolIds</span><span
     style="color: #000000;"> = </span><span
     style="color: #795e26;">extraeIds</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$roles</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$_SESSION</span><span
     style="color: #000000;">[CUE] = </span><span
     style="color: #001080;">$cue</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$_SESSION</span><span
     style="color: #000000;">[ROL_IDS] = </span><span
     style="color: #001080;">$rolIds</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> [</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;CUE =&gt; </span><span
     style="color: #001080;">$cue</span><span
     style="color: #000000;">,</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;ROL_IDS =&gt; </span><span
     style="color: #001080;">$rolIds</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;];</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;}</span></div>
  <div><span
     style="color: #000000;">}</span></div><br>
  <div><span
     style="color: #001080;">$servicio</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">SrvLogin</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #001080;">$servicio</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #000000;">();</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> $roles</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string[]</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">extraeIds</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">array</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$roles</span></div>
  <div><span
     style="color: #000000;">): </span><span
     style="color: #0000ff;">array</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$rolIds</span><span
     style="color: #000000;"> = [];</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #af00db;">foreach</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">$roles</span><span
     style="color: #000000;"> as </span><span
     style="color: #001080;">$rol</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$rolIds</span><span
     style="color: #000000;">[] = </span><span
     style="color: #001080;">$rol</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">id</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$rolIds</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">}</span></div><br>
  <div><span
     style="color: #008000;">/**</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@param</span><span
     style="color: #008000;"> </span><span
     style="color: #267f99;">Rol</span><span
     style="color: #0000ff;">[]</span><span
     style="color: #008000;"> $roles</span></div>
  <div><span
     style="color: #008000;">&nbsp;*&nbsp;</span><span
     style="color: #0000ff;">@return</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string</span></div>
  <div><span
     style="color: #008000;">&nbsp;*/</span></div>
  <div><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">renderRoles</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">array</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$roles</span></div>
  <div><span
     style="color: #000000;">): </span><span
     style="color: #0000ff;">array</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #008000;">/**&nbsp;</span><span
     style="color: #0000ff;">@var</span><span
     style="color: #008000;"> </span><span
     style="color: #0000ff;">string[]</span><span
     style="color: #008000;"> */</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$render</span><span
     style="color: #000000;"> = </span><span
     style="color: #a31515;">""</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #af00db;">foreach</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">$roles</span><span
     style="color: #000000;"> as </span><span
     style="color: #001080;">$rol</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$id</span><span
     style="color: #000000;"> = </span><span
     style="color: #795e26;">htmlentities</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$rol</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">id</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$descripcion</span><span
     style="color: #000000;"> = </span><span
     style="color: #795e26;">htmlentities</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$rol</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">descripcion</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$render</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.=</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"&lt;li&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;strong&gt;{</span><span
     style="color: #001080;">$id</span><span
     style="color: #a31515;">}&lt;/strong&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;{</span><span
     style="color: #001080;">$descripcion</span><span
     style="color: #a31515;">}</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;</span>
  </div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$render</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">}</span></div><br>
 </div>
</muestra-codigo>