<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/ejecuta.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/../lib/php/leeTexto.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/CUE.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/const/ROL_IDS.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/modelo/Rol.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #a31515;">"/dao/usuarioVerifica.php"</span>;</div><br>
  <div><span
     style="color: #795e26;">ejecuta</span>(<span
     style="color: #0000ff;">function</span> ()&nbsp;{</div>
  <div>&nbsp;<span
     style="color: #795e26;">session_start</span>();</div>
  <div>&nbsp;<span
     style="color: #001080;">$cue</span> = <span
     style="color: #795e26;">trim</span>(<span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"cue"</span>));</div>
  <div>&nbsp;<span
     style="color: #001080;">$match</span> = <span
     style="color: #795e26;">leeTexto</span>(<span
     style="color: #a31515;">"match"</span>);</div>
  <div>&nbsp;<span
     style="color: #001080;">$usuario</span> = <span
     style="color: #795e26;">usuarioVerifica</span>(<span
     style="color: #001080;">$cue</span>, <span
     style="color: #001080;">$match</span>);</div>
  <div>&nbsp;<span
     style="color: #af00db;">if</span> (<span
     style="color: #001080;">$usuario</span> === <span
     style="color: #0000ff;">false</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">throw</span> <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">Exception</span>(<span
     style="color: #a31515;">"Datos incorrectos."</span>);</div>
  <div>&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$rolIds</span> = [];</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$usuario</span>-&gt;<span
     style="color: #001080;">roles</span> as <span
     style="color: #001080;">$rol</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$rolIds</span>[] = <span
     style="color: #001080;">$rol</span>-&gt;<span
     style="color: #001080;">id</span>;</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[CUE] = <span
     style="color: #001080;">$cue</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$_SESSION</span>[ROL_IDS] = <span
     style="color: #001080;">$rolIds</span>;</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> [</div>
  <div>&nbsp;&nbsp;&nbsp;CUE =&gt; <span
     style="color: #001080;">$cue</span>,</div>
  <div>&nbsp;&nbsp;&nbsp;ROL_IDS =&gt; <span
     style="color: #001080;">$rolIds</span></div>
  <div>&nbsp;&nbsp;];</div>
  <div>&nbsp;}</div>
  <div>});</div><br>
 </div>
</muestra-codigo>