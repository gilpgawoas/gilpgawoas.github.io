<section>
 <h1>index.html</h1>
 <pre><code class="language-javascript"><span class="resaltado"><span class="codeReserved">const</span> respuesta = <span
   class="codeReserved">await</span> consume(
 enviaFormRecibeJson(
  <span class="codeString">"php/valida.php"</span>, formulario))
<span class="codeReserved">const</span> json =
 <span class="codeReserved">await</span> respuesta.json()</span>
alert(json)</code></pre>
<p class="resaltado2">Despierta y recibe response.</p>
</section>
<div class="section">
 <section>
  <h1>Response</h1>
  <div class="resaltado">
   <details>
    <summary>
     HTTP/1.1 200 OK
    </summary>
    Server: openresty<br>
    Date: Fri, 02 May 2025 14:52:14 GMT<br>
    Content-Type: application/json<br>
    Transfer-Encoding: chunked<br>
    Connection: keep-alive<br>
    Cache-Control: max-age=0<br>
    Expires: Fri, 02 May 2025 14:52:14 GMT
   </details>
   "Hola pp."
  </div>
 </section>
 <section>
  <h1>Memoria</h1>
  <dl>
   <dt class="resaltado">respuesta</dt>
   <dd class="resaltado">
    <dl>
     <dt>status</dt>
     <dd>200</dd>
     <dt>body</dt>
     <dd>"Hola pp."</dd>
    </dl>
   </dd>
   <dt class="resaltado">json</dt>
   <dd class="resaltado">"Hola pp."</dd>
  </dl>
 </section>
</div>
<section>
 <h1>srv/valida.php</h1>
 <pre class="resaltado3"><code class="language-php"><span>$saludo = recibeTexto(<span class="codeString">&quot;saludo&quot;</span>);</span>
<span>$nombre = recibeTexto(<span class="codeString">&quot;nombre&quot;</span>);</span>
<span><span class="codeReserved">if</span> (</span>
<span> $saludo === <span class="codeReserved">false</span></span>
<span> || $saludo === <span class="codeString">&quot;&quot;</span></span>
<span>) {</span>
<span> <span class="codeReserved">throw</span> <span class="codeReserved">new</span> ProblemDetails(</span>
<span>  status: ProblemDetails::BadRequest,</span>
<span>  type: <span class="codeString">&quot;&#47;error&#47;faltasaludo.html&quot;</span>,</span>
<span>  title: <span class="codeString">&quot;Falta el saludo.&quot;</span>,</span>
<span> );</span>
<span>}</span>
<span><span class="codeReserved">if</span> (</span>
<span> $nombre === <span class="codeReserved">false</span></span>
<span> || $nombre === <span class="codeString">&quot;&quot;</span></span>
<span>) {</span>
<span> <span class="codeReserved">throw</span> <span class="codeReserved">new</span> ProblemDetails(</span>
<span>  status: ProblemDetails::BadRequest,</span>
<span>  type: <span class="codeString">&quot;&#47;error&#47;faltanombre.html&quot;</span>,</span>
<span>  title: <span class="codeString">&quot;Falta el nombre.&quot;</span>,</span>
<span> );</span>
<span>}</span>
<span>$resultado =</span>
<span> <span class="codeString">&quot;{$saludo} {$nombre}.&quot;</span>;</span>
<span>devuelveJson($resultado);</span></code></pre>
 <p class="resaltado3">Devuelve response y se duerme.</p>
</section>